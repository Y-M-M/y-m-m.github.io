<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://y-m-m.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://y-m-m.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/light.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/syntax.css' />
    <title>leetcode 1728 猫和老鼠二 - 陈皮的博客</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github-mark.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="
题目 一只猫和一只老鼠在玩一个叫做猫和老鼠的游戏。 它们所处的环境设定是一个 rows x cols 的方格 grid ，其中每个格子可能是一堵墙、一块地板、一位玩家（猫或者老鼠）或者食物。
玩家由字符 &lsquo;C&rsquo; （代表猫）和 &lsquo;M&rsquo; （代表老鼠）表示。 地板由字符 &lsquo;.&rsquo; 表示，玩家可以通过这个格子。 墙用字符 &lsquo;#&rsquo; 表示，玩家不能通过这个格子。 食物用字符 &lsquo;F&rsquo; 表示，玩家可以通过这个格子。 字符 &lsquo;C&rsquo; ， &lsquo;M&rsquo; 和 &lsquo;F&rsquo; 在 grid 中都只会出现一次。 猫和老鼠按照如下规则移动： 老鼠 先移动 ，然后两名玩家轮流移动。 每一次操作时，猫和老鼠可以跳到上下左右四个方向之一的格子，他们不能跳过墙也不能跳出 grid 。 catJump 和 mouseJump 是猫和老鼠分别跳一次能到达的最远距离，它们也可以跳小于最大距离的长度。 它们可以停留在原地。 老鼠可以跳跃过猫的位置。 游戏有 4 种方式会结束： 如果猫跟老鼠处在相同的位置，那么猫获胜。 如果猫先到达食物，那么猫获胜。 如果老鼠先到达食物，那么老鼠获胜。 如果老鼠不能在 1000 次操作以内到达食物，那么猫获胜。 给你 rows x cols 的矩阵 grid 和两个整数 catJump 和 mouseJump ，双方都采取最优策略，如果老鼠获胜，那么请你返回 true ，否则返回 false 。 示例 示例一 " />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://y-m-m.github.io/post/leetcode1728%E7%8C%AB%E5%92%8C%E8%80%81%E9%BC%A0%E4%BA%8C/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="leetcode 1728 猫和老鼠二 - 陈皮的博客" />
<meta name="twitter:description"
  content="
题目 一只猫和一只老鼠在玩一个叫做猫和老鼠的游戏。 它们所处的环境设定是一个 rows x cols 的方格 grid ，其中每个格子可能是一堵墙、一块地板、一位玩家（猫或者老鼠）或者食物。
玩家由字符 &lsquo;C&rsquo; （代表猫）和 &lsquo;M&rsquo; （代表老鼠）表示。 地板由字符 &lsquo;.&rsquo; 表示，玩家可以通过这个格子。 墙用字符 &lsquo;#&rsquo; 表示，玩家不能通过这个格子。 食物用字符 &lsquo;F&rsquo; 表示，玩家可以通过这个格子。 字符 &lsquo;C&rsquo; ， &lsquo;M&rsquo; 和 &lsquo;F&rsquo; 在 grid 中都只会出现一次。 猫和老鼠按照如下规则移动： 老鼠 先移动 ，然后两名玩家轮流移动。 每一次操作时，猫和老鼠可以跳到上下左右四个方向之一的格子，他们不能跳过墙也不能跳出 grid 。 catJump 和 mouseJump 是猫和老鼠分别跳一次能到达的最远距离，它们也可以跳小于最大距离的长度。 它们可以停留在原地。 老鼠可以跳跃过猫的位置。 游戏有 4 种方式会结束： 如果猫跟老鼠处在相同的位置，那么猫获胜。 如果猫先到达食物，那么猫获胜。 如果老鼠先到达食物，那么老鼠获胜。 如果老鼠不能在 1000 次操作以内到达食物，那么猫获胜。 给你 rows x cols 的矩阵 grid 和两个整数 catJump 和 mouseJump ，双方都采取最优策略，如果老鼠获胜，那么请你返回 true ，否则返回 false 。 示例 示例一 " />
<meta name="twitter:site" content="https://y-m-m.github.io/" />
<meta name="twitter:creator" content="陈皮" />
<meta name="twitter:image"
  content="https://y-m-m.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="leetcode 1728 猫和老鼠二 - 陈皮的博客">
<meta property="og:description"
  content="
题目 一只猫和一只老鼠在玩一个叫做猫和老鼠的游戏。 它们所处的环境设定是一个 rows x cols 的方格 grid ，其中每个格子可能是一堵墙、一块地板、一位玩家（猫或者老鼠）或者食物。
玩家由字符 &lsquo;C&rsquo; （代表猫）和 &lsquo;M&rsquo; （代表老鼠）表示。 地板由字符 &lsquo;.&rsquo; 表示，玩家可以通过这个格子。 墙用字符 &lsquo;#&rsquo; 表示，玩家不能通过这个格子。 食物用字符 &lsquo;F&rsquo; 表示，玩家可以通过这个格子。 字符 &lsquo;C&rsquo; ， &lsquo;M&rsquo; 和 &lsquo;F&rsquo; 在 grid 中都只会出现一次。 猫和老鼠按照如下规则移动： 老鼠 先移动 ，然后两名玩家轮流移动。 每一次操作时，猫和老鼠可以跳到上下左右四个方向之一的格子，他们不能跳过墙也不能跳出 grid 。 catJump 和 mouseJump 是猫和老鼠分别跳一次能到达的最远距离，它们也可以跳小于最大距离的长度。 它们可以停留在原地。 老鼠可以跳跃过猫的位置。 游戏有 4 种方式会结束： 如果猫跟老鼠处在相同的位置，那么猫获胜。 如果猫先到达食物，那么猫获胜。 如果老鼠先到达食物，那么老鼠获胜。 如果老鼠不能在 1000 次操作以内到达食物，那么猫获胜。 给你 rows x cols 的矩阵 grid 和两个整数 catJump 和 mouseJump ，双方都采取最优策略，如果老鼠获胜，那么请你返回 true ，否则返回 false 。 示例 示例一 " />
<meta property="og:url" content="https://y-m-m.github.io/post/leetcode1728%E7%8C%AB%E5%92%8C%E8%80%81%E9%BC%A0%E4%BA%8C/" />
<meta property="og:site_name" content="leetcode 1728 猫和老鼠二" />
<meta property="og:image"
  content="https://y-m-m.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2025-02-11 00:00:00 &#43;0000 UTC" />











</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://y-m-m.github.io/">
        <img class="octicon" height="32" width="32" src="/images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" id="search-form" action="" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://y-m-m.github.io/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="/images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://y-m-m.github.io/">
                  <img class=" avatar-user"
                    src="/images/me.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://y-m-m.github.io/">陈皮</a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="https://y-m-m.github.io/post/leetcode1728%E7%8C%AB%E5%92%8C%E8%80%81%E9%BC%A0%E4%BA%8C/">leetcode 1728 猫和老鼠二</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Tue, 11 Feb 2025 00:00:00 &#43;0000"
                    class="no-wrap">
                    Tue, 11 Feb 2025 00:00:00 &#43;0000</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Tue, 11 Feb 2025 09:42:35 &#43;0800"
                    class="no-wrap">
                    Tue, 11 Feb 2025 09:42:35 &#43;0800</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      2616 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      计算机科学与技术
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E7%AE%97%E6%B3%95%E9%A2%98">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      算法题
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/leetcode">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      leetcode
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E5%9B%BE">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      图
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      拓扑排序
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%AE%B0%E5%BF%86%E5%8C%96%E6%90%9C%E7%B4%A2">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      记忆化搜索
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E6%95%B0%E7%BB%84">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      数组
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E6%95%B0%E5%AD%A6">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      数学
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      动态规划
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E5%8D%9A%E5%BC%88">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      博弈
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E7%9F%A9%E9%98%B5">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      矩阵
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><p><img src="https://leetcode.cn/problems/cat-and-mouse-ii/description/" alt="leetcode 1728 猫和老鼠二"></p>
<h1 id="题目">题目</h1>
<blockquote>
<p>一只猫和一只老鼠在玩一个叫做猫和老鼠的游戏。           <br>
它们所处的环境设定是一个 rows x cols 的方格 grid ，其中每个格子可能是一堵墙、一块地板、一位玩家（猫或者老鼠）或者食物。</p>
<ul>
<li>玩家由字符 &lsquo;C&rsquo; （代表猫）和 &lsquo;M&rsquo; （代表老鼠）表示。</li>
<li>地板由字符 &lsquo;.&rsquo; 表示，玩家可以通过这个格子。</li>
<li>墙用字符 &lsquo;#&rsquo; 表示，玩家不能通过这个格子。</li>
<li>食物用字符 &lsquo;F&rsquo; 表示，玩家可以通过这个格子。</li>
<li>字符 &lsquo;C&rsquo; ， &lsquo;M&rsquo; 和 &lsquo;F&rsquo; 在 grid 中都只会出现一次。         <br>
猫和老鼠按照如下规则移动：</li>
<li>老鼠 先移动 ，然后两名玩家轮流移动。</li>
<li>每一次操作时，猫和老鼠可以跳到上下左右四个方向之一的格子，他们不能跳过墙也不能跳出 grid 。</li>
<li>catJump 和 mouseJump 是猫和老鼠分别跳一次能到达的最远距离，它们也可以跳小于最大距离的长度。</li>
<li>它们可以停留在原地。</li>
<li>老鼠可以跳跃过猫的位置。        <br>
游戏有 4 种方式会结束：</li>
<li>如果猫跟老鼠处在相同的位置，那么猫获胜。</li>
<li>如果猫先到达食物，那么猫获胜。</li>
<li>如果老鼠先到达食物，那么老鼠获胜。</li>
<li>如果老鼠不能在 1000 次操作以内到达食物，那么猫获胜。        <br>
给你 rows x cols 的矩阵 grid 和两个整数 catJump 和 mouseJump ，双方都采取最优策略，如果老鼠获胜，那么请你返回 true ，否则返回 false 。</li>
</ul>
</blockquote>
<h1 id="示例">示例</h1>
<h2 id="示例一">示例一</h2>
<p><img src="/images/%E6%88%AA%E5%B1%8F2025-02-11%2009.15.31.png" alt=""></p>
<blockquote>
<p>输入：grid = [&quot;####F&quot;,&quot;#C&hellip;&quot;,&ldquo;M&hellip;.&rdquo;], catJump = 1, mouseJump = 2            <br>
输出：true         <br>
解释：猫无法抓到老鼠，也没法比老鼠先到达食物。</p>
</blockquote>
<h2 id="示例二">示例二</h2>
<p><img src="/images/%E6%88%AA%E5%B1%8F2025-02-11%2009.18.34.png" alt=""></p>
<blockquote>
<p>输入：grid = [&ldquo;M.C&hellip;F&rdquo;], catJump = 1, mouseJump = 4            <br>
输出：true</p>
</blockquote>
<h2 id="示例三">示例三</h2>
<blockquote>
<p>输入：grid = [&ldquo;M.C&hellip;F&rdquo;], catJump = 1, mouseJump = 3
输出：false</p>
</blockquote>
<h2 id="示例四">示例四</h2>
<blockquote>
<p>输入：grid = [&ldquo;C&hellip;#&rdquo;,&quot;&hellip;#F&quot;,&quot;&hellip;.#&quot;,&ldquo;M&hellip;.&rdquo;], catJump = 2, mouseJump = 5        <br>
输出：false</p>
</blockquote>
<h2 id="示例五">示例五</h2>
<blockquote>
<p>输入：grid = [&quot;.M&hellip;&quot;,&quot;..#..&quot;,&quot;#..#.&quot;,&ldquo;C#.#.&rdquo;,&quot;&hellip;#F&quot;], catJump = 3, mouseJump = 1        <br>
输出：true</p>
</blockquote>
<h1 id="提示">提示</h1>
<ul>
<li>rows == grid.length</li>
<li>cols = grid[i].length</li>
<li>1 &lt;= rows, cols &lt;= 8</li>
<li>grid[i][j] 只包含字符 &lsquo;C&rsquo; ，&lsquo;M&rsquo; ，&lsquo;F&rsquo; ，&rsquo;.&rsquo; 和 &lsquo;#&rsquo; 。</li>
<li>grid 中只包含一个 &lsquo;C&rsquo; ，&lsquo;M&rsquo; 和 &lsquo;F&rsquo; 。</li>
<li>1 &lt;= catJump, mouseJump &lt;= 8</li>
</ul>
<h1 id="题解">题解</h1>
<h2 id="方法一-拓扑排序">方法一 拓扑排序</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">MOUSE_TURN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">CAT_TURN</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">MOUSE_WIN</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">CAT_WIN</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">MAX_MOVES</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span> 
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">dirs</span> <span class="o">=</span> <span class="p">{{</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}};</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">grid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">catJump</span><span class="p">,</span> <span class="n">mouseJump</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">food</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">degrees</span><span class="p">[</span><span class="mi">64</span><span class="p">][</span><span class="mi">64</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">results</span><span class="p">[</span><span class="mi">64</span><span class="p">][</span><span class="mi">64</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">canMouseWin</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">grid</span><span class="p">,</span> <span class="kt">int</span> <span class="n">catJump</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mouseJump</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">-&gt;</span><span class="n">rows</span> <span class="o">=</span> <span class="n">grid</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">-&gt;</span><span class="n">cols</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">-&gt;</span><span class="n">grid</span> <span class="o">=</span> <span class="n">grid</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">-&gt;</span><span class="n">catJump</span> <span class="o">=</span> <span class="n">catJump</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="o">-&gt;</span><span class="n">mouseJump</span> <span class="o">=</span> <span class="n">mouseJump</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">startMouse</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">startCat</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">cols</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;M&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">startMouse</span> <span class="o">=</span> <span class="n">getPos</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;C&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">startCat</span> <span class="o">=</span> <span class="n">getPos</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="sc">&#39;F&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">food</span> <span class="o">=</span> <span class="n">getPos</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">total</span> <span class="o">=</span> <span class="n">rows</span> <span class="o">*</span> <span class="n">cols</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">memset</span><span class="p">(</span><span class="n">degrees</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">degrees</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">memset</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">results</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="n">queue</span><span class="o">&lt;</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">qu</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 计算每个状态的度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">mouse</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">mouse</span> <span class="o">&lt;</span> <span class="n">total</span><span class="p">;</span> <span class="n">mouse</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">mouseRow</span> <span class="o">=</span> <span class="n">mouse</span> <span class="o">/</span> <span class="n">cols</span><span class="p">,</span> <span class="n">mouseCol</span> <span class="o">=</span> <span class="n">mouse</span> <span class="o">%</span> <span class="n">cols</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">mouseRow</span><span class="p">][</span><span class="n">mouseCol</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;#&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">cat</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">cat</span> <span class="o">&lt;</span> <span class="n">total</span><span class="p">;</span> <span class="n">cat</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">catRow</span> <span class="o">=</span> <span class="n">cat</span> <span class="o">/</span> <span class="n">cols</span><span class="p">,</span> <span class="n">catCol</span> <span class="o">=</span> <span class="n">cat</span> <span class="o">%</span> <span class="n">cols</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">catRow</span><span class="p">][</span><span class="n">catCol</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;#&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="n">degrees</span><span class="p">[</span><span class="n">mouse</span><span class="p">][</span><span class="n">cat</span><span class="p">][</span><span class="n">MOUSE_TURN</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="n">degrees</span><span class="p">[</span><span class="n">mouse</span><span class="p">][</span><span class="n">cat</span><span class="p">][</span><span class="n">CAT_TURN</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="nl">dir</span> <span class="p">:</span> <span class="n">dirs</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">mouseRow</span> <span class="o">+</span> <span class="n">dir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">col</span> <span class="o">=</span> <span class="n">mouseCol</span> <span class="o">+</span> <span class="n">dir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">jump</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">row</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">rows</span> <span class="o">&amp;&amp;</span> <span class="n">col</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">cols</span> <span class="o">&amp;&amp;</span> <span class="n">grid</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39;#&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">jump</span> <span class="o">&lt;=</span> <span class="n">mouseJump</span><span class="p">;</span> <span class="n">row</span> <span class="o">+=</span> <span class="n">dir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">col</span> <span class="o">+=</span> <span class="n">dir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">jump</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="kt">int</span> <span class="n">nextMouse</span> <span class="o">=</span> <span class="n">getPos</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">),</span> <span class="n">nextCat</span> <span class="o">=</span> <span class="n">getPos</span><span class="p">(</span><span class="n">catRow</span><span class="p">,</span> <span class="n">catCol</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="n">degrees</span><span class="p">[</span><span class="n">nextMouse</span><span class="p">][</span><span class="n">nextCat</span><span class="p">][</span><span class="n">MOUSE_TURN</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">catRow</span> <span class="o">+</span> <span class="n">dir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">col</span> <span class="o">=</span> <span class="n">catCol</span> <span class="o">+</span> <span class="n">dir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">jump</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">row</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="n">rows</span> <span class="o">&amp;&amp;</span> <span class="n">col</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="n">cols</span> <span class="o">&amp;&amp;</span> <span class="n">grid</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39;#&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">jump</span> <span class="o">&lt;=</span> <span class="n">catJump</span><span class="p">;</span> <span class="n">row</span> <span class="o">+=</span> <span class="n">dir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">col</span> <span class="o">+=</span> <span class="n">dir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">jump</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="kt">int</span> <span class="n">nextMouse</span> <span class="o">=</span> <span class="n">getPos</span><span class="p">(</span><span class="n">mouseRow</span><span class="p">,</span> <span class="n">mouseCol</span><span class="p">),</span> <span class="n">nextCat</span> <span class="o">=</span> <span class="n">getPos</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="n">degrees</span><span class="p">[</span><span class="n">nextMouse</span><span class="p">][</span><span class="n">nextCat</span><span class="p">][</span><span class="n">CAT_TURN</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 猫和老鼠在同一个单元格，猫获胜
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="n">total</span><span class="p">;</span> <span class="n">pos</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">row</span> <span class="o">=</span> <span class="n">pos</span> <span class="o">/</span> <span class="n">cols</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="n">pos</span> <span class="o">%</span> <span class="n">cols</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;#&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">pos</span><span class="p">][</span><span class="n">pos</span><span class="p">][</span><span class="n">MOUSE_TURN</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">CAT_WIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">pos</span><span class="p">][</span><span class="n">pos</span><span class="p">][</span><span class="n">MOUSE_TURN</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">pos</span><span class="p">][</span><span class="n">pos</span><span class="p">][</span><span class="n">CAT_TURN</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">CAT_WIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">pos</span><span class="p">][</span><span class="n">pos</span><span class="p">][</span><span class="n">CAT_TURN</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">qu</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">MOUSE_TURN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">qu</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">CAT_TURN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 猫和食物在同一个单元格，猫获胜
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">mouse</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">mouse</span> <span class="o">&lt;</span> <span class="n">total</span><span class="p">;</span> <span class="n">mouse</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">mouseRow</span> <span class="o">=</span> <span class="n">mouse</span> <span class="o">/</span> <span class="n">cols</span><span class="p">,</span> <span class="n">mouseCol</span> <span class="o">=</span> <span class="n">mouse</span> <span class="o">%</span> <span class="n">cols</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">mouseRow</span><span class="p">][</span><span class="n">mouseCol</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;#&#39;</span> <span class="o">||</span> <span class="n">mouse</span> <span class="o">==</span> <span class="n">food</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">mouse</span><span class="p">][</span><span class="n">food</span><span class="p">][</span><span class="n">MOUSE_TURN</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">CAT_WIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">mouse</span><span class="p">][</span><span class="n">food</span><span class="p">][</span><span class="n">MOUSE_TURN</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">mouse</span><span class="p">][</span><span class="n">food</span><span class="p">][</span><span class="n">CAT_TURN</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">CAT_WIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">mouse</span><span class="p">][</span><span class="n">food</span><span class="p">][</span><span class="n">CAT_TURN</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">qu</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">mouse</span><span class="p">,</span> <span class="n">food</span><span class="p">,</span> <span class="n">MOUSE_TURN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">qu</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">mouse</span><span class="p">,</span> <span class="n">food</span><span class="p">,</span> <span class="n">CAT_TURN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 老鼠和食物在同一个单元格且猫和食物不在同一个单元格，老鼠获胜
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">cat</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">cat</span> <span class="o">&lt;</span> <span class="n">total</span><span class="p">;</span> <span class="n">cat</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">catRow</span> <span class="o">=</span> <span class="n">cat</span> <span class="o">/</span> <span class="n">cols</span><span class="p">,</span> <span class="n">catCol</span> <span class="o">=</span> <span class="n">cat</span> <span class="o">%</span> <span class="n">cols</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">grid</span><span class="p">[</span><span class="n">catRow</span><span class="p">][</span><span class="n">catCol</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;#&#39;</span> <span class="o">||</span> <span class="n">cat</span> <span class="o">==</span> <span class="n">food</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">food</span><span class="p">][</span><span class="n">cat</span><span class="p">][</span><span class="n">MOUSE_TURN</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">MOUSE_WIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">food</span><span class="p">][</span><span class="n">cat</span><span class="p">][</span><span class="n">MOUSE_TURN</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">food</span><span class="p">][</span><span class="n">cat</span><span class="p">][</span><span class="n">CAT_TURN</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">MOUSE_WIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span><span class="p">[</span><span class="n">food</span><span class="p">][</span><span class="n">cat</span><span class="p">][</span><span class="n">CAT_TURN</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">qu</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">food</span><span class="p">,</span> <span class="n">cat</span><span class="p">,</span> <span class="n">MOUSE_TURN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="n">qu</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">food</span><span class="p">,</span> <span class="n">cat</span><span class="p">,</span> <span class="n">CAT_TURN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// 拓扑排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">qu</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">auto</span> <span class="p">[</span><span class="n">mouse</span><span class="p">,</span> <span class="n">cat</span><span class="p">,</span> <span class="n">turn</span><span class="p">]</span> <span class="o">=</span> <span class="n">qu</span><span class="p">.</span><span class="n">front</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="n">qu</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">mouse</span><span class="p">][</span><span class="n">cat</span><span class="p">][</span><span class="n">turn</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="kt">int</span> <span class="n">moves</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">mouse</span><span class="p">][</span><span class="n">cat</span><span class="p">][</span><span class="n">turn</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="n">vector</span><span class="o">&lt;</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">prevStates</span> <span class="o">=</span> <span class="n">getPrevStates</span><span class="p">(</span><span class="n">mouse</span><span class="p">,</span> <span class="n">cat</span><span class="p">,</span> <span class="n">turn</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="p">[</span><span class="n">prevMouse</span><span class="p">,</span> <span class="n">prevCat</span><span class="p">,</span> <span class="n">prevTurn</span><span class="p">]</span> <span class="o">:</span> <span class="n">prevStates</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="n">prevMouse</span><span class="p">][</span><span class="n">prevCat</span><span class="p">][</span><span class="n">prevTurn</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">UNKNOWN</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="kt">bool</span> <span class="n">canWin</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">MOUSE_WIN</span> <span class="o">&amp;&amp;</span> <span class="n">prevTurn</span> <span class="o">==</span> <span class="n">MOUSE_TURN</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="n">CAT_WIN</span> <span class="o">&amp;&amp;</span> <span class="n">prevTurn</span> <span class="o">==</span> <span class="n">CAT_TURN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="p">(</span><span class="n">canWin</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">results</span><span class="p">[</span><span class="n">prevMouse</span><span class="p">][</span><span class="n">prevCat</span><span class="p">][</span><span class="n">prevTurn</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                        <span class="n">results</span><span class="p">[</span><span class="n">prevMouse</span><span class="p">][</span><span class="n">prevCat</span><span class="p">][</span><span class="n">prevTurn</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">moves</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                        <span class="n">qu</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">prevMouse</span><span class="p">,</span> <span class="n">prevCat</span><span class="p">,</span> <span class="n">prevTurn</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="n">degrees</span><span class="p">[</span><span class="n">prevMouse</span><span class="p">][</span><span class="n">prevCat</span><span class="p">][</span><span class="n">prevTurn</span><span class="p">]</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="p">(</span><span class="n">degrees</span><span class="p">[</span><span class="n">prevMouse</span><span class="p">][</span><span class="n">prevCat</span><span class="p">][</span><span class="n">prevTurn</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="kt">int</span> <span class="n">loseResult</span> <span class="o">=</span> <span class="n">prevTurn</span> <span class="o">==</span> <span class="n">MOUSE_TURN</span> <span class="o">?</span> <span class="nl">CAT_WIN</span> <span class="p">:</span> <span class="n">MOUSE_WIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                            <span class="n">results</span><span class="p">[</span><span class="n">prevMouse</span><span class="p">][</span><span class="n">prevCat</span><span class="p">][</span><span class="n">prevTurn</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">loseResult</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                            <span class="n">results</span><span class="p">[</span><span class="n">prevMouse</span><span class="p">][</span><span class="n">prevCat</span><span class="p">][</span><span class="n">prevTurn</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">moves</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                            <span class="n">qu</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="n">prevMouse</span><span class="p">,</span> <span class="n">prevCat</span><span class="p">,</span> <span class="n">prevTurn</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">results</span><span class="p">[</span><span class="n">startMouse</span><span class="p">][</span><span class="n">startCat</span><span class="p">][</span><span class="n">MOUSE_TURN</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">MOUSE_WIN</span> <span class="o">&amp;&amp;</span> <span class="n">results</span><span class="p">[</span><span class="n">startMouse</span><span class="p">][</span><span class="n">startCat</span><span class="p">][</span><span class="n">MOUSE_TURN</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">MAX_MOVES</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">getPrevStates</span><span class="p">(</span><span class="kt">int</span> <span class="n">mouse</span><span class="p">,</span> <span class="kt">int</span> <span class="n">cat</span><span class="p">,</span> <span class="kt">int</span> <span class="n">turn</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">prevStates</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">mouseRow</span> <span class="o">=</span> <span class="n">mouse</span> <span class="o">/</span> <span class="n">cols</span><span class="p">,</span> <span class="n">mouseCol</span> <span class="o">=</span> <span class="n">mouse</span> <span class="o">%</span> <span class="n">cols</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">catRow</span> <span class="o">=</span> <span class="n">cat</span> <span class="o">/</span> <span class="n">cols</span><span class="p">,</span> <span class="n">catCol</span> <span class="o">=</span> <span class="n">cat</span> <span class="o">%</span> <span class="n">cols</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">prevTurn</span> <span class="o">=</span> <span class="n">turn</span> <span class="o">==</span> <span class="n">MOUSE_TURN</span> <span class="o">?</span> <span class="nl">CAT_TURN</span> <span class="p">:</span> <span class="n">MOUSE_TURN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">maxJump</span> <span class="o">=</span> <span class="n">prevTurn</span> <span class="o">==</span> <span class="n">MOUSE_TURN</span> <span class="o">?</span> <span class="nl">mouseJump</span> <span class="p">:</span> <span class="n">catJump</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">startRow</span> <span class="o">=</span> <span class="n">prevTurn</span> <span class="o">==</span> <span class="n">MOUSE_TURN</span> <span class="o">?</span> <span class="nl">mouseRow</span> <span class="p">:</span> <span class="n">catRow</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">startCol</span> <span class="o">=</span> <span class="n">prevTurn</span> <span class="o">==</span> <span class="n">MOUSE_TURN</span> <span class="o">?</span> <span class="nl">mouseCol</span> <span class="p">:</span> <span class="n">catCol</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">prevStates</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">mouse</span><span class="p">,</span> <span class="n">cat</span><span class="p">,</span> <span class="n">prevTurn</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="nl">dir</span> <span class="p">:</span> <span class="n">dirs</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">startRow</span> <span class="o">+</span> <span class="n">dir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">j</span> <span class="o">=</span> <span class="n">startCol</span> <span class="o">+</span> <span class="n">dir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">jump</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">rows</span> <span class="o">&amp;&amp;</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">cols</span> <span class="o">&amp;&amp;</span> <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="sc">&#39;#&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">jump</span> <span class="o">&lt;=</span> <span class="n">maxJump</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="n">dir</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">j</span> <span class="o">+=</span> <span class="n">dir</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">jump</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">prevMouseRow</span> <span class="o">=</span> <span class="n">prevTurn</span> <span class="o">==</span> <span class="n">MOUSE_TURN</span> <span class="o">?</span> <span class="nl">i</span> <span class="p">:</span> <span class="n">mouseRow</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">prevMouseCol</span> <span class="o">=</span> <span class="n">prevTurn</span> <span class="o">==</span> <span class="n">MOUSE_TURN</span> <span class="o">?</span> <span class="nl">j</span> <span class="p">:</span> <span class="n">mouseCol</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">prevCatRow</span> <span class="o">=</span> <span class="n">prevTurn</span> <span class="o">==</span> <span class="n">MOUSE_TURN</span> <span class="o">?</span> <span class="nl">catRow</span> <span class="p">:</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">prevCatCol</span> <span class="o">=</span> <span class="n">prevTurn</span> <span class="o">==</span> <span class="n">MOUSE_TURN</span> <span class="o">?</span> <span class="nl">catCol</span> <span class="p">:</span> <span class="n">j</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">prevMouse</span> <span class="o">=</span> <span class="n">getPos</span><span class="p">(</span><span class="n">prevMouseRow</span><span class="p">,</span> <span class="n">prevMouseCol</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="kt">int</span> <span class="n">prevCat</span> <span class="o">=</span> <span class="n">getPos</span><span class="p">(</span><span class="n">prevCatRow</span><span class="p">,</span> <span class="n">prevCatCol</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">prevStates</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">prevMouse</span><span class="p">,</span> <span class="n">prevCat</span><span class="p">,</span> <span class="n">prevTurn</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">prevStates</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="nf">getPos</span><span class="p">(</span><span class="kt">int</span> <span class="n">row</span><span class="p">,</span> <span class="kt">int</span> <span class="n">col</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">row</span> <span class="o">*</span> <span class="n">cols</span> <span class="o">+</span> <span class="n">col</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><ul>
<li>分析</li>
</ul>
<blockquote>
<p>为了计算从初始状态至老鼠到达食物的移动次数，在拓扑排序的过程中除了记录每个状态的结果以外，还需要记录从边界情况到达每个状态的移动次数，等价于从每个状态到边界情况的移动次数。每个状态对应的移动次数计算方法如下：              <br>
边界情况可以直接确定胜负，因此移动次数为 0；               <br>
如果状态 s<!-- raw HTML omitted -->1<!-- raw HTML omitted --> 和状态 s<!-- raw HTML omitted -->2<!-- raw HTML omitted --> 相邻（即状态 s<!-- raw HTML omitted -->2<!-- raw HTML omitted --> 是状态 s<!-- raw HTML omitted -->1<!-- raw HTML omitted --> 的上一轮的状态之一），且状态 s<!-- raw HTML omitted -->1<!-- raw HTML omitted --> 的结果和移动次数已知，记状态 s<!-- raw HTML omitted -->1<!-- raw HTML omitted --> 的移动次数为 x，如果可以确定状态 s<!-- raw HTML omitted -->2<!-- raw HTML omitted -->的结果，则状态 s<!-- raw HTML omitted -->2<!-- raw HTML omitted --> 的移动次数为 x+1。                    <br>
证明          <br>
对于上述解法的正确性证明，需要证明两点，一是未知状态的正确性，二是移动次数的正确性。            <br>
证明一：未知状态的正确性            <br>
遍历结束之后，如果一个状态的结果未知，则该状态满足以下两个条件：</p>
<ul>
<li>从该状态出发，任何移动都无法到达该状态的移动方的必胜状态；</li>
<li>从该状态出发，存在一种移动可以到达未知状态。       <br>
对于结果未知的状态，如果其实际结果是该状态的移动方必胜，则一定存在一个下一轮状态，为当前状态的移动方的必胜状态，在根据下一轮状态的结果标记当前状态的结果时会将当前状态标记为当前状态的移动方的必胜状态，和结果未知矛盾。          <br>
对于结果未知的状态，如果其实际结果是该状态的移动方必败，则所有的下一轮状态都为当前状态的移动方的必败状态，在根据下一轮状态的结果标记当前状态的结果时会将当前状态标记为当前状态的移动方的必败状态，和结果未知矛盾。         <br>
因此，对于结果不是任何一方必胜的状态，实际结果一定是未知。根据游戏规则，未知状态表示在该状态下当猫和老鼠都按照最优策略参与游戏时，双方都无法在有限的移动次数内到达食物所在的单元格，移动次数一定会超过老鼠获胜的上限，因此未知状态对应的结果都是猫获胜。               <br>
证明二：移动次数的正确性        <br>
在考虑移动次数的情况下，每个玩家的最优策略应满足以下三点：</li>
<li>当自己可以到达必胜状态时，应将移动次数最小化；</li>
<li>当自己无法到达必胜状态时，如果可以避免自己到达必败状态，则应到达未知状态；</li>
<li>当无法避免自己到达必败状态时，应将移动次数最大化。      <br>
由于拓扑排序的实现方式是广度优先搜索，因此拓扑排序的过程中遍历状态的顺序为移动次数递增的顺序。</li>
</ul>
</blockquote>
<blockquote>
<p>边界情况的移动次数为 0。从已知状态出发计算未知状态的结果和移动次数，将已知状态记为 s<!-- raw HTML omitted -->1<!-- raw HTML omitted -->，未知状态记为 s<!-- raw HTML omitted -->2<!-- raw HTML omitted -->
如果状态 s<!-- raw HTML omitted -->2<!-- raw HTML omitted --> 的移动方和状态 s<!-- raw HTML omitted -->1<!-- raw HTML omitted --> 的获胜方相同，则状态 s<!-- raw HTML omitted -->2<!-- raw HTML omitted --> 的移动方会移动到状态 s<!-- raw HTML omitted -->1<!-- raw HTML omitted --> 从而确保胜利，因此状态 s<!-- raw HTML omitted -->2<!-- raw HTML omitted --> 的移动方必胜，移动次数为 x+1，且该移动次数为状态 s<!-- raw HTML omitted -->2<!-- raw HTML omitted --> 到边界情况的最少移动次数。</p>
</blockquote>
<p>​</p>
<h1 id="参考资料">参考资料</h1>
<p><a href="https://leetcode.cn/problems/cat-and-mouse-ii/solutions/1473725/mao-he-lao-shu-ii-by-leetcode-solution-e5io/">leetcode官方题解</a></p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://y-m-m.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://y-m-m.github.io/css/toc.css' />

  
<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='https://y-m-m.github.io/css/gitalk.css'>
<script src='https://y-m-m.github.io/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'Ov23livxKNtTlPeMjV2H',
    clientSecret: '6d3bc9f47a1296f29628a63701ea5624cd28a26b',
    repo: 'y-m-m.github.io',
    owner: 'Y-M-M',
    admin: ['Y-M-M'],
    id: eval("location.pathname"), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>

</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://y-m-m.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://y-m-m.github.io/js/github-style.js"></script>





<script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
<script type="application/javascript" src='https://y-m-m.github.io/js/search.js'></script>



</html>