<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://y-m-m.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://y-m-m.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/light.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/syntax.css' />
    <title>Linux - 陈皮的博客</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github-mark.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://y-m-m.github.io/tags/linux/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Linux - 陈皮的博客" />
<meta name="twitter:description"
  content="" />
<meta name="twitter:site" content="https://y-m-m.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://y-m-m.github.io/">


<meta property="og:type" content="website" />
<meta property="og:title" content="Linux - 陈皮的博客">
<meta property="og:description"
  content="" />
<meta property="og:url" content="https://y-m-m.github.io/tags/linux/" />
<meta property="og:site_name" content="Linux" />
<meta property="og:image"
  content="https://y-m-m.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">




<link href="/tags/linux/index.xml" rel="alternate" type="application/rss+xml" title="陈皮的博客" />








</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://y-m-m.github.io/">
        <img class="octicon" height="32" width="32" src="/images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" id="search-form" action="" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://y-m-m.github.io/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="/images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  


<div class="mt-4 position-sticky top-0 d-none d-md-block bg-white width-full border-bottom color-border-secondary"
  style="z-index:3;">
  <div class="container-xl px-3 px-md-4 px-lg-5">
    <div class="gutter-condensed gutter-lg flex-column flex-md-row d-flex">
      <div class="flex-shrink-0 col-12 col-md-3 mb-4 mb-md-0">
      </div>
      <div class="flex-shrink-0 col-12 col-md-9 mb-4 mb-md-0">
        <div class="UnderlineNav width-full box-shadow-none hx_UnderlineNav-with-profile-color-modes-banner">
          <nav class="UnderlineNav-body">
            <a class="UnderlineNav-item " href="https://y-m-m.github.io/">
              <svg class="octicon octicon-book UnderlineNav-octicon hide-sm" height="16" viewBox="0 0 16 16"
                version="1.1" width="16">
                <path fill-rule="evenodd"
                  d="M0 1.75A.75.75 0 01.75 1h4.253c1.227 0 2.317.59 3 1.501A3.744 3.744 0 0111.006 1h4.245a.75.75 0 01.75.75v10.5a.75.75 0 01-.75.75h-4.507a2.25 2.25 0 00-1.591.659l-.622.621a.75.75 0 01-1.06 0l-.622-.621A2.25 2.25 0 005.258 13H.75a.75.75 0 01-.75-.75V1.75zm8.755 3a2.25 2.25 0 012.25-2.25H14.5v9h-3.757c-.71 0-1.4.201-1.992.572l.004-7.322zm-1.504 7.324l.004-5.073-.002-2.253A2.25 2.25 0 005.003 2.5H1.5v9h3.757a3.75 3.75 0 011.994.574z">
                </path>
              </svg>
              Overview
            </a>
            <a class="UnderlineNav-item " href="https://y-m-m.github.io/post">
              <svg class="octicon octicon-repo UnderlineNav-octicon hide-sm" height="16" viewBox="0 0 16 16"
                version="1.1" width="16">
                <path fill-rule="evenodd"
                  d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z">
                </path>
              </svg>
              Posts
              <span class="Counter">184</span>
            </a>
          </nav>
          <div class="profile-color-modes js-promo-color-modes-banner-profile isInitialToggle">
            <svg width="106" height="60" viewBox="0 0 106 60" fill="none" stroke-width="3" stroke-linecap="round"
              stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
              <g class="profile-color-modes-illu-group profile-color-modes-illu-red">
                <path d="M37.5 58.5V57.5C37.5 49.768 43.768 43.5 51.5 43.5V43.5C59.232 43.5 65.5 49.768 65.5 57.5V58.5">
                </path>
              </g>
              <g class="profile-color-modes-illu-group profile-color-modes-illu-orange">
                <path
                  d="M104.07 58.5C103.401 55.092 97.7635 54.3869 95.5375 57.489C97.4039 54.6411 99.7685 48.8845 94.6889 46.6592C89.4817 44.378 86.1428 50.1604 85.3786 54.1158C85.9519 50.4768 83.7226 43.294 78.219 44.6737C72.7154 46.0534 72.7793 51.3754 74.4992 55.489C74.169 54.7601 72.4917 53.3567 70.5 52.8196">
                </path>
              </g>
              <g class="profile-color-modes-illu-group profile-color-modes-illu-purple">
                <path
                  d="M5.51109 58.5V52.5C5.51109 41.4543 14.4654 32.5 25.5111 32.5C31.4845 32.5 36.8464 35.1188 40.5111 39.2709C40.7212 39.5089 40.9258 39.7521 41.1245 40">
                </path>
                <path d="M27.511 49.5C29.6777 49.5 28.911 49.5 32.511 49.5"></path>
                <path d="M27.511 56.5C29.6776 56.5 26.911 56.5 30.511 56.5"></path>
              </g>
              <g class="profile-color-modes-illu-group profile-color-modes-illu-green">
                <circle cx="5.5" cy="12.5" r="4"></circle>
                <circle cx="18.5" cy="5.5" r="4"></circle>
                <path d="M18.5 9.5L18.5 27.5"></path>
                <path d="M18.5 23.5C6 23.5 5.5 23.6064 5.5 16.5"></path>
              </g>
              <g class="profile-color-modes-illu-group profile-color-modes-illu-blue">
                <g class="profile-color-modes-illu-frame">
                  <path
                    d="M40.6983 31.5C40.5387 29.6246 40.6456 28.0199 41.1762 27.2317C42.9939 24.5312 49.7417 26.6027 52.5428 30.2409C54.2551 29.8552 56.0796 29.6619 57.9731 29.6619C59.8169 29.6619 61.5953 29.8452 63.2682 30.211C66.0833 26.5913 72.799 24.5386 74.6117 27.2317C75.6839 28.8246 75.0259 33.7525 73.9345 37.5094C74.2013 37.9848 74.4422 38.4817 74.6555 39">
                  </path>
                </g>
                <g class="profile-color-modes-illu-frame">
                  <path
                    d="M41.508 31.5C41.6336 31.2259 41.7672 30.9582 41.9085 30.6968C40.7845 26.9182 40.086 21.8512 41.1762 20.2317C42.9939 17.5312 49.7417 19.6027 52.5428 23.2409C54.2551 22.8552 56.0796 22.6619 57.9731 22.6619C59.8169 22.6619 61.5953 22.8452 63.2682 23.211C66.0833 19.5913 72.799 17.5386 74.6117 20.2317C75.6839 21.8246 75.0259 26.7525 73.9345 30.5094C75.1352 32.6488 75.811 35.2229 75.811 38.2283C75.811 38.49 75.8058 38.7472 75.7957 39">
                  </path>
                  <path d="M49.4996 33V35.6757"></path>
                  <path d="M67.3375 33V35.6757"></path>
                </g>
                <g class="profile-color-modes-illu-frame">
                  <path
                    d="M41.508 31.5C41.6336 31.2259 41.7672 30.9582 41.9085 30.6968C40.7845 26.9182 40.086 21.8512 41.1762 20.2317C42.9939 17.5312 49.7417 19.6027 52.5428 23.2409C54.2551 22.8552 56.0796 22.6619 57.9731 22.6619C59.8169 22.6619 61.5953 22.8452 63.2682 23.211C66.0833 19.5913 72.799 17.5386 74.6117 20.2317C75.6839 21.8246 75.0259 26.7525 73.9345 30.5094C75.1352 32.6488 75.811 35.2229 75.811 38.2283C75.811 38.49 75.8058 38.7472 75.7957 39">
                  </path>
                </g>
                <g class="profile-color-modes-illu-frame">
                  <path
                    d="M41.508 31.5C41.6336 31.2259 41.7672 30.9582 41.9085 30.6968C40.7845 26.9182 40.086 21.8512 41.1762 20.2317C42.9939 17.5312 49.7417 19.6027 52.5428 23.2409C54.2551 22.8552 56.0796 22.6619 57.9731 22.6619C59.8169 22.6619 61.5953 22.8452 63.2682 23.211C66.0833 19.5913 72.799 17.5386 74.6117 20.2317C75.6839 21.8246 75.0259 26.7525 73.9345 30.5094C75.1352 32.6488 75.811 35.2229 75.811 38.2283C75.811 38.49 75.8058 38.7472 75.7957 39">
                  </path>
                  <path d="M49.4996 33V35.6757"></path>
                  <path d="M67.3375 33V35.6757"></path>
                </g>
                <g class="profile-color-modes-illu-frame">
                  <path
                    d="M41.508 31.5C41.6336 31.2259 41.7672 30.9582 41.9085 30.6968C40.7845 26.9182 40.086 21.8512 41.1762 20.2317C42.9939 17.5312 49.7417 19.6027 52.5428 23.2409C54.2551 22.8552 56.0796 22.6619 57.9731 22.6619C59.8169 22.6619 61.5953 22.8452 63.2682 23.211C66.0833 19.5913 72.799 17.5386 74.6117 20.2317C75.6839 21.8246 75.0259 26.7525 73.9345 30.5094C75.1352 32.6488 75.811 35.2229 75.811 38.2283C75.811 38.49 75.8058 38.7472 75.7957 39">
                  </path>
                </g>
                <g class="profile-color-modes-illu-frame">
                  <path
                    d="M41.508 31.5C41.6336 31.2259 41.7672 30.9582 41.9085 30.6968C40.7845 26.9182 40.086 21.8512 41.1762 20.2317C42.9939 17.5312 49.7417 19.6027 52.5428 23.2409C54.2551 22.8552 56.0796 22.6619 57.9731 22.6619C59.8169 22.6619 61.5953 22.8452 63.2682 23.211C66.0833 19.5913 72.799 17.5386 74.6117 20.2317C75.6839 21.8246 75.0259 26.7525 73.9345 30.5094C75.1352 32.6488 75.811 35.2229 75.811 38.2283C75.811 38.49 75.8058 38.7472 75.7957 39">
                  </path>
                  <path d="M49.4996 33V35.6757"></path>
                  <path d="M67.3375 33V35.6757"></path>
                </g>
                <g class="profile-color-modes-illu-frame">
                  <path
                    d="M73.4999 40.2236C74.9709 38.2049 75.8108 35.5791 75.8108 32.2283C75.8108 29.2229 75.1351 26.6488 73.9344 24.5094C75.0258 20.7525 75.6838 15.8246 74.6116 14.2317C72.7989 11.5386 66.0832 13.5913 63.2681 17.211C61.5952 16.8452 59.8167 16.6619 57.973 16.6619C56.0795 16.6619 54.2549 16.8552 52.5427 17.2409C49.7416 13.6027 42.9938 11.5312 41.176 14.2317C40.0859 15.8512 40.7843 20.9182 41.9084 24.6968C41.003 26.3716 40.4146 28.3065 40.2129 30.5">
                  </path>
                  <path d="M82.9458 30.5471L76.8413 31.657"></path>
                  <path d="M76.2867 34.4319L81.8362 37.7616"></path>
                  <path d="M49.4995 27.8242V30.4999"></path>
                  <path d="M67.3374 27.8242V30.4998"></path>
                </g>
                <g class="profile-color-modes-illu-frame">
                  <path
                    d="M45.3697 34.2658C41.8877 32.1376 39.7113 28.6222 39.7113 23.2283C39.7113 20.3101 40.3483 17.7986 41.4845 15.6968C40.3605 11.9182 39.662 6.85125 40.7522 5.23168C42.5699 2.53117 49.3177 4.6027 52.1188 8.24095C53.831 7.85521 55.6556 7.66186 57.5491 7.66186C59.3929 7.66186 61.1713 7.84519 62.8442 8.21095C65.6593 4.59134 72.375 2.5386 74.1877 5.23168C75.2599 6.82461 74.6019 11.7525 73.5105 15.5094C74.7112 17.6488 75.3869 20.2229 75.3869 23.2283C75.3869 28.6222 73.2105 32.1376 69.7285 34.2658C70.8603 35.5363 72.6057 38.3556 73.3076 40">
                  </path>
                  <path d="M49.0747 19.8242V22.4999"></path>
                  <path
                    d="M54.0991 28C54.6651 29.0893 55.7863 30.0812 57.9929 30.0812C59.0642 30.0812 59.8797 29.8461 60.5 29.4788">
                  </path>
                  <path d="M66.9126 19.8242V22.4999"></path>
                  <path d="M33.2533 20.0237L39.0723 22.1767"></path>
                  <path d="M39.1369 25.0058L33.0935 27.3212"></path>
                  <path d="M81.8442 19.022L76.0252 21.1751"></path>
                  <path d="M75.961 24.0041L82.0045 26.3196"></path>
                </g>
                <g class="profile-color-modes-illu-frame">
                  <path
                    d="M73.4999 40.2236C74.9709 38.2049 75.8108 35.5791 75.8108 32.2283C75.8108 29.2229 75.1351 26.6488 73.9344 24.5094C75.0258 20.7525 75.6838 15.8246 74.6116 14.2317C72.7989 11.5386 66.0832 13.5913 63.2681 17.211C61.5952 16.8452 59.8167 16.6619 57.973 16.6619C56.0795 16.6619 54.2549 16.8552 52.5427 17.2409C49.7416 13.6027 42.9938 11.5312 41.176 14.2317C40.0859 15.8512 40.7843 20.9182 41.9084 24.6968C41.003 26.3716 40.4146 28.3065 40.2129 30.5">
                  </path>
                  <path d="M82.9458 30.5471L76.8413 31.657"></path>
                  <path d="M76.2867 34.4319L81.8362 37.7616"></path>
                  <path d="M49.4995 27.8242V30.4999"></path>
                  <path d="M67.3374 27.8242V30.4998"></path>
                </g>
                <g class="profile-color-modes-illu-frame">
                  <path
                    d="M40.6983 31.5C40.5387 29.6246 40.6456 28.0199 41.1762 27.2317C42.9939 24.5312 49.7417 26.6027 52.5428 30.2409C54.2551 29.8552 56.0796 29.6619 57.9731 29.6619C59.8169 29.6619 61.5953 29.8452 63.2682 30.211C66.0833 26.5913 72.799 24.5386 74.6117 27.2317C75.6839 28.8246 75.0259 33.7525 73.9345 37.5094C74.2013 37.9848 74.4422 38.4817 74.6555 39">
                  </path>
                </g>
              </g>
            </svg>
            <span class="profile-color-modes-toggle js-promo-color-modes-toggle no-select" tabindex="0"
              onclick="switchTheme()">
              <div class="profile-color-modes-toggle-track no-select"></div>
              <div class="profile-color-modes-toggle-thumb js-promo-color-modes-thumb">
                <svg style="fill: var(--color-profile-color-modes-toggle-moon); margin: 7px 0 0 7px;" width="14"
                  height="13" viewBox="0 0 14 13" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
                  </path>
                </svg>
              </div>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container-xl px-3 px-md-4 px-lg-5">
  <div class="gutter-condensed gutter-lg flex-column flex-md-row d-flex">
    <div class="flex-shrink-0 col-12 col-md-3 mb-4 mb-md-0">
      <div class="h-card mt-md-n5" style="margin-top:24px">
        <div class="user-profile-sticky-bar js-user-profile-sticky-bar d-none d-md-block" id="headerStuck">
          <div class="user-profile-mini-vcard d-table">
            <span class="user-profile-mini-avatar d-table-cell v-align-middle lh-condensed-ultra pr-2">
              
              <img class="rounded-1 avatar-user" height="32" width="32" src="/images/me.png">
              
            </span>
            <span class="d-table-cell v-align-middle lh-condensed">
              <strong>陈皮</strong>
            </span>
          </div>
        </div>
        <div class="clearfix d-flex d-md-block flex-items-center mb-4 mb-md-0">
          <div class="position-relative d-inline-block col-2 col-md-12 mr-3 mr-md-0 flex-shrink-0" style="z-index:4;">
            
            <a href="/images/me.png">
              <img style="height:auto;" alt="Avatar" width="260" height="260" id="headerImg"
                class="avatar avatar-user width-full border bg-white" src="/images/me.png">
            </a>
            
            
            <div class="user-status-container position-relative hide-sm hide-md">
              <div class="f5 user-status-circle-badge-container">
                <div class="user-status-circle-badge d-inline-block lh-condensed-ultra p-2">
                  <div class="d-flex flex-items-center flex-items-stretch">
                    <div class="f6 lh-condensed user-status-header d-inline-flex user-status-emoji-only-header circle">
                      <div class="user-status-emoji-container flex-shrink-0 mr-2 d-flex flex-items-center flex-justify-center ">
                        <div><g-emoji class="g-emoji">😀</g-emoji></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
          </div>

          <div
            class="vcard-names-container float-left col-10 col-md-12 pt-1 pt-md-3 pb-1 pb-md-3 js-sticky js-user-profile-sticky-fields"
            data-original-top="0px" style="position: sticky;">
            <h1 class="vcard-names pl-2 pl-md-0">
              <span class="p-name vcard-fullname d-block overflow-hidden">陈皮</span>
              
              <span class="p-nickname vcard-username d-block">Y-M-M</span>
              
            </h1>
          </div>
        </div>

        <div class="p-note user-profile-bio mb-3 js-user-profile-bio f4">
          <div>愿每一天都能学到更多知识^_^</div>
        </div>

        <div class="d-flex flex-column">
          <div class="js-profile-editable-area d-flex flex-column d-md-block">
            <ul class="vcard-details">
              
              <li class="vcard-detail pt-1 css-truncate css-truncate-target hide-sm hide-md">
                <svg class="octicon octicon-location" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M11.536 3.464a5 5 0 010 7.072L8 14.07l-3.536-3.535a5 5 0 117.072-7.072v.001zm1.06 8.132a6.5 6.5 0 10-9.192 0l3.535 3.536a1.5 1.5 0 002.122 0l3.535-3.536zM8 9a2 2 0 100-4 2 2 0 000 4z">
                  </path>
                </svg>
                <span class="p-label">China</span>
              </li>
              

              
              <li class="vcard-detail pt-1 css-truncate css-truncate-target ">
                <svg class="octicon octicon-mail" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M1.75 2A1.75 1.75 0 000 3.75v.736a.75.75 0 000 .027v7.737C0 13.216.784 14 1.75 14h12.5A1.75 1.75 0 0016 12.25v-8.5A1.75 1.75 0 0014.25 2H1.75zM14.5 4.07v-.32a.25.25 0 00-.25-.25H1.75a.25.25 0 00-.25.25v.32L8 7.88l6.5-3.81zm-13 1.74v6.441c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25V5.809L8.38 9.397a.75.75 0 01-.76 0L1.5 5.809z">
                  </path>
                </svg>
                <a class="u-email link-gray-dark " href="mailto:3364107383@qq.com">3364107383@qq.com</a>
              </li>
              

              <li class="vcard-detail pt-1 css-truncate css-truncate-target ">
                <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z">
                  </path>
                </svg>
                
                <a rel="nofollow me" class="link-gray-dark" href="https://y-m-m.github.io/">https://y-m-m.github.io/</a>
                
              </li>
            </ul>
          </div>
        </div>

        <div class="border-top color-border-secondary pt-3 mt-3 clearfix hide-sm hide-md">
          <h2 class="mb-2 h4">Organizations</h2>
          <div style="display:flex;justify-content:flex-start;flex-wrap:wrap;margin-bottom:3px;">
          
          <a style="margin: 0 10px 10px 0;" href="https://github.com/Y-M-M">
            <svg id="github-icon" viewBox="0 0 16 16" version="1.1" width="32" height="32" fill="#24292e">
              <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
              </path>
            </svg>
          </a>
          

          

          

          

          

          

          

          

          
          <a style="margin: 0 10px 10px 0;" href="https://y-m-m.github.io/index.xml">
            <img alt="@rss" width="32" height="32" src="https://y-m-m.github.io/images/rss.png" class="avatar">
          </a>
          
         </div>
        </div>
      </div>
    </div>

    <div class="flex-shrink-0 col-12 col-md-9 mb-4 mb-md-0">
      

<div class="UnderlineNav user-profile-nav d-block d-md-none position-sticky top-0 pl-3 ml-n3 mr-n3 pr-3 bg-white"
  style="z-index:3;">
  <nav class="UnderlineNav-body">
    <a class="UnderlineNav-item " href="https://y-m-m.github.io/">
      <svg class="octicon octicon-book UnderlineNav-octicon hide-sm" height="16" viewBox="0 0 16 16" version="1.1"
        width="16">
        <path fill-rule="evenodd"
          d="M0 1.75A.75.75 0 01.75 1h4.253c1.227 0 2.317.59 3 1.501A3.744 3.744 0 0111.006 1h4.245a.75.75 0 01.75.75v10.5a.75.75 0 01-.75.75h-4.507a2.25 2.25 0 00-1.591.659l-.622.621a.75.75 0 01-1.06 0l-.622-.621A2.25 2.25 0 005.258 13H.75a.75.75 0 01-.75-.75V1.75zm8.755 3a2.25 2.25 0 012.25-2.25H14.5v9h-3.757c-.71 0-1.4.201-1.992.572l.004-7.322zm-1.504 7.324l.004-5.073-.002-2.253A2.25 2.25 0 005.003 2.5H1.5v9h3.757a3.75 3.75 0 011.994.574z">
        </path>
      </svg>
      Overview
    </a>
    <a class='UnderlineNav-item   selected '
      href="https://y-m-m.github.io/post">
      <svg class="octicon octicon-repo UnderlineNav-octicon hide-sm" height="16" viewBox="0 0 16 16" version="1.1"
        width="16">
        <path fill-rule="evenodd"
          d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z">
        </path>
      </svg>
      Posts
      <span class="Counter ">184</span>
    </a>
  </nav>
</div>

      
      
<div>
  <div class="position-relative">
    <div>
      
      <div class="TableObject border-bottom border-gray-light py-3">
        <div class="user-repo-search-results-summary TableObject-item TableObject-item--primary v-align-top">
          <strong>6</strong>
          results
          for <strong>Linux</strong>
        </div>
        <div class="TableObject-item text-right v-align-top">
          <a class="issues-reset-query text-normal d-inline-block ml-3" href="https://y-m-m.github.io//post/">
            <svg class="octicon octicon-x issues-reset-query-icon mt-1" viewBox="0 0 16 16" version="1.1" width="16"
              height="16">
              <path fill-rule="evenodd"
                d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z">
              </path>
            </svg>
            Clear filter
          </a>
        </div>
      </div>
      
      <ul>
        
        <li class="col-12 d-flex width-full py-4 border-bottom color-border-secondary public source">
          <div class="col-12 d-inline-block">
            <div class="d-inline-block mb-1">
              <h3 class="wb-break-all">
                <a href="https://y-m-m.github.io/post/linux_%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/">Linux 文本文件处理</a>
              </h3>
            </div>

            <div>
              <div class="col-12 d-inline-block text-gray mb-2 pr-4">
                <h1 id="文本文件及其处理工具">文本文件及其处理工具</h1>
<ul>
<li>Linux中的文本信息
<ul>
<li>文本文件
<ul>
<li>C语言，Java语言等编程文件的源程序语言</li>
<li>文本格式的数据文件</li>
<li>文本格式的文字信息</li>
</ul>
</li>
<li>程序输出</li>
<li>系统配置信息
<ul>
<li>/etc下的配置文件（功能类似windows的注册表）</li>
</ul>
</li>
<li>文本型网络协议 因特网大部分传输层以上的协议是文本型协议
<ul>
<li>会话层协议：HTTP，POP3，SMTP，IMAP，</li>
<li>表示层协议：HTML，XML，MIME</li>
</ul>
</li>
<li>文本文件处理的命令
<ul>
<li>Linux提供大量的文本文件处理的命令</li>
<li>多数命令都有复杂的选项</li>
</ul>
</li>
</ul>
</li>
<li>进程的标准输入/输出，重定向，管道
<ul>
<li>进程的基本概念
<ul>
<li>进程与程序</li>
<li>进程的生命周期</li>
</ul>
</li>
<li>进程的输入输出
<ul>
<li>标准输入stdin</li>
<li>标准输出stdout</li>
</ul>
</li>
<li>重定向机制
<ul>
<li>输出重定向
<ul>
<li>ls –l &gt; filelist.txt</li>
</ul>
</li>
<li>输入重定向
<ul>
<li>sort &lt; filelist.txt</li>
</ul>
</li>
<li>管道机制
<ul>
<li>ls –l | sort</li>
</ul>
</li>
<li>重定向机制和管道机制的重要性</li>
</ul>
</li>
</ul>
</li>
<li>文本文件处理命令的特点
<ul>
<li>特点
<ul>
<li>不指定处理对象文件名时，从标准输入获得数据</li>
<li>指定处理对象文件名时，从文件中获取数据</li>
<li>多数命令可以指定多个文件</li>
<li>处理结果在标准输出显示</li>
</ul>
</li>
<li>考虑的因素
<ul>
<li>标准输入/标准输出</li>
<li>shell的文件通配符</li>
<li>输入输出重定向</li>
<li>管道</li>
</ul>
</li>
<li>灵活性：工具命令的组合
<ul>
<li>Linux倾向于提供独立的多个精巧的工具命令，数据格式为文本信息</li>
<li>鼓励使用重定向或管道机制将多个工具命令组合在一起，提供灵活的功能</li>
<li>应用系统设计时，也应该考虑到这些特点
<ul>
<li>例如：数据库内容的展示，直接输出多列文本，考虑到各种工具软件的使用</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>文件读取与处理的
<ul>
<li>more/less：逐屏显示文件
<ul>
<li>历史
<ul>
<li>more：最先由BSD UNIX开发</li>
<li>less：Linux上广泛使用</li>
</ul>
</li>
<li>使用方法
<ul>
<li>more shudu.c 指定一个文件</li>
<li>more *.[ch] 指定多个文件</li>
<li>ls -l | more 指定0个文件</li>
<li>less shudu.c</li>
</ul>
</li>
<li>满屏后，显示&ndash;more&ndash;或&ndash;more&ndash;(15%)，可以使用more命令
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-17%2010.47.15.png" alt=""></li>
<li>Linux系统中的命令less
<ul>
<li>less is more</li>
<li>回退浏览的功能更强</li>
<li>可直接使键盘的上下箭头键，或者j,k，类似vi的光标定位键，以及PgUp，PgDn，Home，End键</li>
<li>有的Unix系统不提供less命令，但是可利用more命令的增强功能</li>
</ul>
</li>
</ul>
</li>
<li>cat与od：列出文件内容
<ul>
<li>基本功能与命名
<ul>
<li>cat concatenate:串结，文本格式打印 （选项-n：行号）</li>
<li>od octal dump逐字节打印（-c, -t c, -t x1，-t d1, -t u1选项）</li>
</ul>
</li>
<li>举例
<ul>
<li>cat tryl.c 命令行参数1个</li>
<li>cat –n shudu.c</li>
<li>cat tryl.c tryx.c try.h 命令行参数3个</li>
<li>cat &gt; try 命令行参数=0个，从stdin获取数据，直到ctrl-d</li>
<li>cat tryl.c try2.c try.h &gt; trysrc</li>
<li>cat makefile *.[ch] &gt; src</li>
<li>od –t x1 x.dat 以十六进制打印文件x.dat各字节</li>
<li>od –t x1 x.dat | more 以十六进制打印文件x.dat各字节</li>
<li>od –c /bin/bash 逐字符方式打印文件，遇到不可打印字符打印编码</li>
<li>echo abcdABCD | od –t x1 十六进制分开显示字符的ASCII码</li>
</ul>
</li>
</ul>
</li>
<li>head与tail：显示文件的头部或者尾部
<ul>
<li>默认只选择10行，-n选项可以选择行数</li>
<li>head –n 15 ab.c
<ul>
<li>显示文件ab.c中前15行</li>
</ul>
</li>
<li>head –n 23 a.c b.c c.c | more
<ul>
<li>显示三个文件各自的前23行共显示69行</li>
</ul>
</li>
<li>tail –n 40 liu.mail</li>
<li>head –n -20 msg.c 除去文件尾部20行其余均算“头”</li>
<li>tail –n +20 msg.c 除去文件头部20行其余均算作“尾”</li>
<li>tail -f debug.txt 实时打印文件尾部被追加的内容（选项-f:forever）
<ul>
<li>netstat -s -t| head -n 20 显示tcp协议的统计数据</li>
<li>ls -s | sort | head –n 20</li>
</ul>
</li>
</ul>
</li>
<li>tee：三通
<ul>
<li>功能
<ul>
<li>将从标准输入stdin得到的数据抄送到标准输出stdout显示，同时存入磁盘文件中</li>
</ul>
</li>
<li>应用举例
<ul>
<li>./myap | tee myap.log</li>
</ul>
</li>
</ul>
</li>
<li>wc：字计数
<ul>
<li>功能
<ul>
<li>列出文件中一共有多少行，有多少个单词，多少字符</li>
<li>当指定的文件数大于1时，最后还列出一个合计</li>
<li>常用选项-l：只列出行计数</li>
</ul>
</li>
<li>举例
<ul>
<li>wc sum.c （1个文件）</li>
<li>wc x.c makefile stat.sh （多个文件）</li>
<li>wc -l *.c makefile start.sh</li>
<li>ps -ef | wc -l （以标准输入作为输入；可用于统计系统中进程总数）</li>
<li>ps -ef | grep liang | wc -l （和liang相关的进程个数）</li>
<li>who | wc -l （当前系统登录用户个数）</li>
</ul>
</li>
</ul>
</li>
<li>sort：对文件内容排序
<ul>
<li>sort选项
<ul>
<li>-n选项(Numberic):对于数字按照算术值大小排序，而不是按照字符串比较规则，例如123与67</li>
<li>可以选择行中某一部分作为排序关键字</li>
<li>选择升序或降序（-r）</li>
<li>字符串比较时对字母是否区分大小写</li>
<li>内排序外排序等算法参数选择（当数据量较大时，性能调优）</li>
</ul>
</li>
<li>举例
<ul>
<li>sort telno &gt; telno1</li>
<li>ls -s | sort | tail –10</li>
<li>ls -s | sort -n | tail –10</li>
</ul>
</li>
</ul>
</li>
<li>tr：翻译字符
<ul>
<li>用法
<ul>
<li>tr string1 string2</li>
<li>把标准输入拷贝到标准输出，string1中出现的字符替换为string2中的对应字符</li>
</ul>
</li>
<li>例
<ul>
<li>cat telnos | tr UVX uvx</li>
</ul>
</li>
<li>例：用［］指定一个集合
<ul>
<li>cat report | tr &lsquo;[a-z]&rsquo; &lsquo;[A-Z]&rsquo;</li>
<li>将小写字母改为大写字母</li>
</ul>
</li>
<li>例：用\加三个八进制数字(类似C语言)表示一字符
<ul>
<li>cat file1 | tr % &lsquo;\012&rsquo; 将%改为换行符,注意不要漏掉必需的单引号</li>
</ul>
</li>
</ul>
</li>
<li>uniq：筛选文件中的重复行
<ul>
<li>用法
<ul>
<li>uniq options</li>
<li>uniq options input-file</li>
<li>uniq options input-file output-file</li>
</ul>
</li>
<li>重复的行：紧邻的两行内容相同</li>
<li>选项
<ul>
<li>-u （uniqe）只保留没有重复的行</li>
<li>-d （duplicated）只保留有重复的行（但只打印一次）</li>
<li>没有以上两个选项，打印没有重复的行和有重复的行(但只打印一次)</li>
<li>-c （count）计数同样的行出现几次</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
              </div>
            </div>

            <div class="f6 text-gray mt-2">
              
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                计算机科学与技术
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/linux">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                Linux
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                文本文件处理
              </a>
              
              

              Created
              <relative-time datetime=" Sat, 17 May 2025 00:00:00 &#43;0000" class="no-wrap"
                title=" Sat, 17 May 2025 00:00:00 &#43;0000">
                Sat, 17 May 2025 00:00:00 &#43;0000
              </relative-time>
            </div>
          </div>
        </li>
        
        <li class="col-12 d-flex width-full py-4 border-bottom color-border-secondary public source">
          <div class="col-12 d-inline-block">
            <div class="d-inline-block mb-1">
              <h3 class="wb-break-all">
                <a href="https://y-m-m.github.io/post/linux_%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8linux/">Linux 开始使用Linux</a>
              </h3>
            </div>

            <div>
              <div class="col-12 d-inline-block text-gray mb-2 pr-4">
                <h1 id="linux前传">Linux前传</h1>
<h2 id="计算机系统的组成">计算机系统的组成</h2>
<p><img src="/images/%E6%88%AA%E5%B1%8F2025-05-16%2009.17.14.png" alt=""></p>
<ul>
<li>操作系统的发展
<ul>
<li>手工操作，1946 ~ 50年代（电子管）
<ul>
<li>计算机昂贵，用户为专业人员；编程语言为机器语言</li>
<li>输入输出用纸带或卡片；用户独占全机，资源利用率低</li>
</ul>
</li>
<li>单道批处理操作系统，50年代末 ~ 60年代中（晶体管）
<ul>
<li>用磁带把多个程序编成执行序列，可使用汇编语言开发</li>
<li>问题：慢速的输入输出处理仍直接由CPU完成，输入输出时，CPU处于等待状态。</li>
</ul>
</li>
<li>多道批处理系统(Multiprogrammed Batch Processing System)，60年代中 ~ 70年代中（集成电路）
<ul>
<li>利用多道批处理提高资源的利用率。</li>
<li>问题：提高了CPU利用率，用户交互性差</li>
</ul>
</li>
<li>分时系统(time-sharing system)，70年代中期至今
<ul>
<li>分时共享：多个程序分时共享CPU资源</li>
<li>按时间片(time slice)分配：多个程序在CPU上执行的轮换时间
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-16%2009.19.04.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>多道程序需要的硬件支持: 中断与通道技术
<ul>
<li>中断
<ul>
<li>CPU收到外部信号后，停止原来工作，转去处理该事件，完毕后回到原来断点继续工作</li>
</ul>
</li>
<li>通道：专用的I/O处理器
<ul>
<li>控制I/O设备与内存间的数据传输，启动后独立于CPU运行，实现CPU与I/O的并行</li>
<li>DMA 直接内存存取，Direct Memory Access</li>
<li>CPM 通信处理器， communication process module</li>
</ul>
</li>
<li>实现多道程序需要的硬件支持：内存管制
<ul>
<li>存储器管理单元MMU</li>
<li>多道程序的加载
<ul>
<li>程序采用虚拟地址，以保证多道同时运行的程序可以在内存中的重定位（虚实地址转换）</li>
</ul>
</li>
<li>内存保护
<ul>
<li>避免同时运行在内存中的程序互相影响（越界/越权）</li>
<li>CPU设置核心态/用户态
<ul>
<li>应用程序工作在用户态，仅允许访问程序自己的内存，越界则产生中断</li>
<li>操作系统内核工作在特权级别（核心态），可随意访问所有内存</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>系统调用和系统命令
<ul>
<li>CPU可以工作在用户态或核心态
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-16%2009.23.04.png" alt=""></li>
<li>系统调用(System call)
<ul>
<li>内核的编程接口：应用程序调用操作系统提供的功能</li>
<li>用户态程序无法直接使用核心态程序，一般系统调用采用软件中断(trap)方式，CPU进入核心态执行</li>
<li>操作系统程序（狭义的，指内核）的调用时机
<ul>
<li>可以认为操作系统就是所有中断服务程序的集合，包括硬件中断和软件中断</li>
</ul>
</li>
</ul>
</li>
<li>系统调用与普通函数调用的区别
<ul>
<li>在UNIX系统中，都以C语言函数方式给出</li>
<li>实现普通函数调用的代码在CPU用户态下运行，包含在可执行程序内，使用CALL指令，利用堆栈实现，函数调用结束后返回调用处的下一条语句（库函数与自定义函数，printf）</li>
<li>实现系统调用功能的代码在内核中，用户程序通过使用INT指令产生软中断进入内核执行，使用进程的核心态堆栈，执行完毕后中断返回（write）</li>
</ul>
</li>
<li>系统命令
<ul>
<li>操作系统自带的命令也是利用系统调用设计的应用程序，与普通的应用程序具有相同地位</li>
</ul>
</li>
</ul>
</li>
<li>应用软件和设备驱动程序开发
<ul>
<li>应用软件开发SDK
<ul>
<li>直接使用系统调用(如：UNIX)</li>
<li>将系统调用封装为函数库API(如Win32)</li>
<li>使用框架，如：MFC</li>
<li>应用软件运行时CPU处于用户态</li>
</ul>
</li>
<li>设备驱动程序开发DDK
<ul>
<li>操作系统中对设备分类，例如：网卡，磁盘，显示器，打印机，声卡，音频输入，视频输入</li>
<li>每类设备设计一种抽象的接口，包括多个函数</li>
<li>设备驱动程序操纵硬件，处理中断，提供这类设备接口规定的一组函数。函数的调用时机由操作系统决定</li>
<li>设备驱动程序工作在CPU特权级，驱动程序的BUG可能会导致整个系统崩溃</li>
<li>一般设备驱动程序通过动态链接的方式链接入内核</li>
</ul>
</li>
</ul>
</li>
<li>操作系统在计算机系统中的地位
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-16%2009.26.16.png" alt=""></li>
</ul>
<h1 id="linux发展过程">Linux发展过程</h1>
<h1 id="系统登录与退出">系统登录与退出</h1>
<h2 id="字符终端">字符终端</h2>
<ul>
<li>UNIX/Linux是多用户系统
<ul>
<li>主机连接多台字符终端</li>
<li>字符终端作为交互式输入输出设备</li>
</ul>
</li>
<li>终端的构成
<ul>
<li>键盘</li>
<li>显示器</li>
<li>RS232串行通信接口</li>
</ul>
</li>
<li>主机与终端的连接
<ul>
<li>主机中的串口卡（硬件）引出多个RS232串口</li>
<li>每个RS232接口通过电缆（3芯或更多芯）连接一台终端</li>
<li>RS232电缆的长度限制</li>
<li>早期要求小于10米</li>
<li>现在可达百米</li>
</ul>
</li>
<li>终端与主机的功能分工
<ul>
<li>终端:主机的输入和输出设备
<ul>
<li>终端通过电缆把用户的按键信息送到主机，把主机发来的信息在屏幕上显示</li>
</ul>
</li>
<li>主机:程序和数据的存储及处理驱动程序
<ul>
<li>数据及程序存放在主机的硬盘上，程序的运行也都由主机内的CPU占用主机内存来完成
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-16%2009.31.40.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>行律与驱动程序
<ul>
<li>驱动程序
<ul>
<li>不同的硬件需要不同的驱动程序</li>
<li>与行律模块的接口：上行和下行字符流</li>
</ul>
</li>
<li>行律的作用
<ul>
<li>一行内字符的缓冲、回显与编辑，直到按下回车键</li>
<li>数据加工，如：将\n （换行）转化为\r\n （回车换行）</li>
<li>将Ctrl-C字符转化为中止进程运行的信号(signal)</li>
</ul>
</li>
</ul>
</li>
<li>主机与终端之间的通信过程
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-16%2009.33.17.png" alt=""></li>
<li>终端转义序列
<ul>
<li>转义字符
<ul>
<li>Esc：ASCII码1B（十进制27，八进制033）</li>
</ul>
</li>
<li>主机发往终端方向数据中的转义序列的功能
<ul>
<li>控制光标位置、字符颜色、字符大小等等</li>
<li>选择终端的字符集</li>
<li>控制终端上的打印机、刷卡机、磁条器、密码键盘</li>
</ul>
</li>
<li>举例
<ul>
<li>Esc[2J  由主机发送到终端的四字节序列：1B 5B 32 4A 功能：清除屏幕</li>
<li>Esc[8A 四字节序列，光标上移8行</li>
<li>Esc[16;8H 七字节序列，光标移到16行8列</li>
<li>Esc[1;31m 七字节序列，红色字符</li>
</ul>
</li>
</ul>
</li>
<li>终端类型
<ul>
<li>终端类型
<ul>
<li>定义一组转移序列以及相对应的操作</li>
<li>例如：ansi, vt100, vt220等等</li>
</ul>
</li>
<li>主机和终端之间的类型匹配
<ul>
<li>主机根据终端类型，实现相应功能时发送对应的控制码；当终端类型不对时，可能全屏幕操作失败</li>
<li>通过转义序列还可以控制终端上的打印机、光笔、刷卡机、磁条器、密码键盘</li>
<li>终端上的功能键</li>
</ul>
</li>
</ul>
</li>
<li>主机和终端之间的流量控制
<ul>
<li>必要性
<ul>
<li>终端的显示速度跟不上主机的发送速度</li>
<li>主机送来数据终端需要打印出来，但打印速度慢</li>
<li>主机送来的显示内容，需暂停显示，仔细分析</li>
<li>需要一种机制控制主机方向来的数据流量</li>
</ul>
</li>
<li>两种流控方法
<ul>
<li>硬件方式
<ul>
<li>RS232接口的CTS信号线（Clear To Send，可以发送）</li>
</ul>
</li>
<li>软件方式
<ul>
<li>利用流控字符Xon和Xoff</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Ctrl-S和Ctrl-Q
<ul>
<li>软件流量控制的方式（利用流控字符Xon和Xoff）</li>
<li>终端希望主机暂停发送数据时，发Xoff字符</li>
<li>终端希望主机继续发送数据时，发Xon字符</li>
<li>Xoff/Xon控制字符分别被定义为ASCII码的17和19，对应键盘按键Ctrl-S和Ctrl-Q，手动流控
<ul>
<li>按下Ctrl-S键暂停显示，按Ctrl-Q键继续显示</li>
<li>按下Ctrl-S后暂停显示，有的终端按任意键继续，而有的终端要求必须按下Ctrl-Q后才继续显示，否则其它按键都不能使得终端继续显示。</li>
</ul>
</li>
</ul>
</li>
<li>仿真终端和虚拟终端
<ul>
<li>仿真终端
<ul>
<li>PC机串口，运行终端仿真软件来仿真终端。</li>
<li>例如: DOS操作系统下的CrossTalk, Windows中的“超级终端”</li>
<li>仿真的内容包括实现终端的转义码序列功能</li>
</ul>
</li>
<li>虚拟终端
<ul>
<li>UNIX主机与PC机通过网络相连，客户端运行telnet，服务器端telnetd，成为UNIX的一个基于TCP通信的虚拟终端</li>
<li>安全终端，在TCP连接上加密和压缩数据，如：Windows客户端软件SecureCRT
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-16%2010.09.28.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>登录
<ul>
<li>root用户（超级用户）
<ul>
<li>root不受权限的制约，可随意修改和删除文件</li>
<li>普通用户受权限制约</li>
<li>root用户误删重要文件可能带来严重后果</li>
</ul>
</li>
<li>申请帐号（也叫登录名或用户名）
<ul>
<li>由系统管理员创建用户（如：useradd命令）</li>
<li>用户从任意终端上登录进入系统</li>
</ul>
</li>
<li>登录过程
<ul>
<li>出现登录提示符login：后，键入登录名</li>
<li>给出提示password：输入口令，不回显</li>
</ul>
</li>
</ul>
</li>
<li>Shell提示符
<ul>
<li>登录成功
<ul>
<li>登录成功后出现Shell提示符，如同DOS的C&gt;</li>
</ul>
</li>
<li>常见Shell的提示符
<ul>
<li>$ Bourne Shell (/bin/sh)</li>
<li>% C Shell (/bin/csh)</li>
<li>$ Korn Shell (/bin/ksh)</li>
<li># 当前用户为超级用户root（操作时要小心）</li>
<li>同DOS一样，Shell提示符可以根据用户的需要和喜好，通过Shell命令改变</li>
</ul>
</li>
</ul>
</li>
<li>关机
<ul>
<li>在关机前必须执行关机命令shutdown
<ul>
<li>突然关掉电源，可能会导致文件数据丢失</li>
<li>例：内核的文件高速缓冲区。关机命令的功能之一是将高速缓冲区数据真正写到磁盘上</li>
<li>仅特权用户有此权限</li>
</ul>
</li>
<li>死机
<ul>
<li>Unix系统稳定，应用程序不该导致死机</li>
<li>死机现象是由于系统内核态程序有问题，常常是一些外设的驱动程序有BUG</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="使用系统命令">使用系统命令</h1>
<ul>
<li>在Shell提示符下就可以键入UNIX命令</li>
<li>与Windows不同的是组成命令的英文字母大小写有区别</li>
</ul>
<h2 id="查阅联机手册">查阅联机手册</h2>
<ul>
<li>联机手册内容
<ul>
<li>各种命令的说明书</li>
<li>系统调用的使用手册</li>
<li>C语言和其它语言的库函数手册</li>
<li>系统配置文件格式</li>
</ul>
</li>
<li>命令
<ul>
<li>命令：man</li>
<li>命令名man，取自manual的前三个字母，UNIX中最常用命令一般由两到三个字母构成</li>
<li>分页器：q-退出，空格-下一页，上下箭头-上移下移</li>
</ul>
</li>
<li>man命令
<ul>
<li>man 命令的用法</li>
<li>man name</li>
<li>man section name 区分不同section中的同一个name
<ul>
<li>一般章节编号：1 命令；2 系统调用； 3 库函数；5 配置文件</li>
</ul>
</li>
<li>man -k regexp
<ul>
<li>列出与关键字(keyword)正则表达式regexp相关的手册目录</li>
</ul>
</li>
</ul>
</li>
<li>手册页内容
<ul>
<li>列出基本功能和语法格式</li>
<li>对于C语言的调用列出头文件和链接函数库</li>
<li>功能说明</li>
<li>SEE ALSO: 有关的其它项目的名字和章节号</li>
<li>所遵循的UNIX标准</li>
</ul>
</li>
<li>date读取系统日期和时间
<ul>
<li>读取系统日期和时间： 命令date
<ul>
<li>Wed Mar 1 14:23:37 CST 2017</li>
</ul>
</li>
<li>可以根据需要定制输出格式
<ul>
<li>date &ldquo;+%Y.%m.%d %H:%M:%S Day %j&rdquo;</li>
<li>2017.03.01 14:24:02 Day 060</li>
<li>date &ldquo;+%s&rdquo;</li>
<li>1488349495
<ul>
<li>060指的是今天是今年的第60天</li>
<li>格式控制字符串：第一个字母必须为+号，%Y代表年号，%m代表月份，%M代表分钟</li>
<li>%s 秒坐标（从UTC1970开始），常用于计算时间间隔</li>
<li>UNIX的命令往往有很多选项和复杂的功能，通过man date查阅联机手册</li>
</ul>
</li>
<li>通过NTP协议校对系统时间：命令 ntpdate
<ul>
<li>ntpdate 0.pool.ntp.org (设置时间，必须root用户)</li>
<li>ntpdate–q 0.pool.ntp.org (查询时间，普通用户也可以)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>who：确定有谁在系统中
<ul>
<li>命令who: 列出当前已登录入系统的用户
<ul>
<li>wujian tty00 Jul 5 14:49</li>
<li>sun tty01 Jul 5 11:31</li>
<li>liang tty03 Jul 5 15:50</li>
<li>liang ttyp02 Jul 5 15:50</li>
<li>dong tty11 Jul 5 09:45</li>
</ul>
</li>
<li>第一列：用户名；第二列：终端设备的设备文件名</li>
<li>设备在文件系统中有一个文件名（同普通磁盘文件不同的是文件类型属于特殊文件），一般设备文件放于目录/dev下。终端设备文件的名字一般为tty* （Windows中的设备文件CON）</li>
<li>命令tty 可以打印出当前终端的设备文件名</li>
<li>命令who am i 可以列出当前终端上的登录用户</li>
</ul>
</li>
<li>uptime，w和sar
<ul>
<li>命令uptime
<ul>
<li>系统自启动后到现在的运行时间（年龄）</li>
<li>当前登录入系统的用户数</li>
<li>近期1分钟，5分钟，15分钟内系统CPU的负载（平均调度队列长度）</li>
</ul>
</li>
<li>w命令（Who &amp; What）
<ul>
<li>列出终端的空闲时间（IDLE）</li>
<li>JCPU：终端上正在运行的作业占用的CPU时间（包括前台程序和后台程序）</li>
<li>PCPU：终端上正在运行的前台程序占用CPU时间</li>
<li>WHAT列出终端上的用户正在执行什么命令</li>
</ul>
</li>
<li>sar命令(system activity report)
<ul>
<li>打印系统活动报告</li>
</ul>
</li>
<li>其他：top，htop，nmon等监控系统性能的工具
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-17%2009.06.52.png" alt=""></li>
</ul>
</li>
<li>ps命令：进程信息的一次性快照
<ul>
<li>功能
<ul>
<li>查阅进程状态(process status)(实际上就是将内核中进程状态信息有选择地打印出来)</li>
</ul>
</li>
<li>选项
<ul>
<li>用于控制列表的行数(进程范围)和列数(每进程列出的属性内容)</li>
<li>无选项：只列出在当前终端上启动的进程
<ul>
<li>列出的项目有：PID，TTY，TIME，COMMAND</li>
</ul>
</li>
<li>e选项：列出系统中所有的进程(进程范围)</li>
<li>f选项：以full格式列出每一个进程(控制列的数目)</li>
<li>l选项：以long格式列出每一个进程(控制列的数目)</li>
</ul>
</li>
</ul>
</li>
<li>命令ps列出的进程属性
<ul>
<li>UID：用户ID(注册名)</li>
<li>PID：进程ID</li>
<li>PPID：父进程的PID</li>
<li>C：CPU占用指数：最近一段时间(秒级别)进程占用CPU情况</li>
<li>STIME：启动时间</li>
<li>SZ：进程逻辑内存大小(Size)</li>
<li>TTY：终端的名字</li>
<li>COMMAND：命令名</li>
<li>WCHAN：进程在内核的何处睡眠(Wait Channel)</li>
<li>TIME：累计执行时间(占用CPU的时间)</li>
<li>PRI：优先级</li>
<li>S：状态，S(Sleep)，R(Run)， Z(Zombie)</li>
</ul>
</li>
<li>top命令：进程动态监控
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-17%2009.15.25.png" alt="">
<ul>
<li>PR: 进程优先级，越小越优先；NI：进程优先级值可被修正数据值</li>
<li>VIRT: 进程逻辑地址空间大小(virtual)，VIRT=SWAP+RES</li>
<li>RES: 驻留内存数(Resident),也就是占用物理内存数，RES=CODE+DATA</li>
<li>S: 进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程</li>
<li>SHR：与其他进程共享的内存数(Share)</li>
<li>%CPU：占用CPU百分比；%MEM：占用内存百分比</li>
</ul>
</li>
<li>free检查系统内存使用情况
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-17%2009.18.23.png" alt="">
<ul>
<li>第一行：内存总数506MB，已使用490MB, 空闲15MB
<ul>
<li>Linux为提高效率利用程序不用的内存缓冲磁盘信息，当前有62MB的buffer和133M的cache</li>
</ul>
</li>
<li>第二行：不计buffers/cache,程序用掉了295MB,有210MB空闲</li>
<li>第三行：打印了磁盘Swap区的使用情况</li>
</ul>
</li>
<li>vmstat检查系统负载
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-17%2009.19.57.png" alt="">
<ul>
<li>Procs
<ul>
<li>r 运行或等待运行的进程数</li>
<li>b 处在非中断睡眠状态的进程数</li>
</ul>
</li>
<li>Memory
<ul>
<li>swpd 交换分区使用情况 free 空闲的内存</li>
<li>buff/cache : 被用来做为缓存的内存数</li>
</ul>
</li>
<li>Swap 磁盘/内存的交换页数量，单位：KB/秒
<ul>
<li>IO 块设备I/O块数，单位：块/秒</li>
</ul>
</li>
<li>System
<ul>
<li>in: 每秒的硬件中断数(interrupt)，包括时钟中断</li>
<li>cs: 每秒的环境切换次数(context switch)，程序间的跳转</li>
</ul>
</li>
<li>CPU 按CPU 的总使用百分比来显示
<ul>
<li>us=user, sy=system,id=idle，wa=wait for disk I/O</li>
</ul>
</li>
<li>Top：可以看到整体情况，也可以看到每个任务消耗资源的情况。 Vmstat：查看队列中的任务书、进程上下文切换</li>
</ul>
</li>
<li>passwd：更换口令
<ul>
<li>普通用户
<ul>
<li>使用passwd命令更改自己的上机口令，在更改前系统会先验证原来的口令</li>
</ul>
</li>
<li>超级用户
<ul>
<li>修改口令之前不验证旧的口令</li>
<li>可修改自己的口令，还可强迫设置其它用户口令</li>
<li>命令passwd liu
<ul>
<li>将用户liu的口令强迫设置为某一已知口令</li>
<li>超级用户无法读取其它用户的口令</li>
<li>当普通用户忘记口令时，可请求超级用户强设口令</li>
<li>修改超级用户root的口令时要特别注意</li>
</ul>
</li>
<li>口令的选取</li>
</ul>
</li>
<li>口令信息的保存：不存储明码口令
<img src="/images/%E6%88%AA%E5%B1%8F2025-05-17%2009.28.15.png" alt=""></li>
<li>口令的验证方法
<ul>
<li>安全性：无法由哈希值倒推出口令原文</li>
<li>文件/etc/passwd, /etc/shadow</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="与其他主机通信的几个命令">与其他主机通信的几个命令</h2>
<ul>
<li>
<p>telnet或ssh：远程登录</p>
              </div>
            </div>

            <div class="f6 text-gray mt-2">
              
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                计算机科学与技术
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/linux">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                Linux
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8linux">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                开始使用Linux
              </a>
              
              

              Created
              <relative-time datetime=" Fri, 16 May 2025 00:00:00 &#43;0000" class="no-wrap"
                title=" Fri, 16 May 2025 00:00:00 &#43;0000">
                Fri, 16 May 2025 00:00:00 &#43;0000
              </relative-time>
            </div>
          </div>
        </li>
        
        <li class="col-12 d-flex width-full py-4 border-bottom color-border-secondary public source">
          <div class="col-12 d-inline-block">
            <div class="d-inline-block mb-1">
              <h3 class="wb-break-all">
                <a href="https://y-m-m.github.io/post/linux_%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6%E4%B8%8E%E8%BF%9B%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1/">Linux 进程控制与进程之间的通信</a>
              </h3>
            </div>

            <div>
              <div class="col-12 d-inline-block text-gray mb-2 pr-4">
                <h1 id="进程的基本概念">进程的基本概念</h1>
<h2 id="进程的基本概念和逻辑内存">进程的基本概念和逻辑内存</h2>
<ul>
<li>
<p>进程与程序</p>
<ul>
<li>程序
<ul>
<li>指令和数据的集合</li>
<li>存放在磁盘上的一个普通文件里</li>
<li>文件的i节点中标为可执行，内容符合系统要求</li>
</ul>
</li>
<li>进程
<ul>
<li>包括指令段、用户数据段和系统数据段的执行环境</li>
</ul>
</li>
<li>进程与程序的关系
<ul>
<li>程序用于初始化进程的指令段和用户数据段，初始化后，进程和初始化它的程序之间无联系</li>
<li>进程运行时磁盘上的程序文件不可修改/删除</li>
<li>同时运行的多个进程可由统一程序初始化得到，进程之间没什么联系。内核通过安排它们共享指令段甚至不同程序的进程共享函数库(动态链接)以节省内存，但这种安排对用户来说是透明的
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-30%2008.08.25.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>进程的组成部分</p>
<ul>
<li>四部分：指令段、数据段、栈段和系统数据
<ul>
<li>指令段Text
<ul>
<li>程序的CPU指令代码,包括：主程序和子程序编译后的CPU指令代码，以及调用的库函数代码</li>
<li>指令段的大小固定不变，只读</li>
</ul>
</li>
<li>用户数据段
<ul>
<li>全局变量，静态(static)变量，字符串常数</li>
<li>允许数据段增长和缩小，实现内存的动态分配
<ul>
<li>系统调用sbrk()允许编程调整数据段的大小（调整单位为“页”）</li>
<li>内存管理库函数，如：malloc()，free()</li>
</ul>
</li>
<li>sbrk vs. malloc
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-30%2008.12.48.png" alt="">
<ul>
<li>sbrk</li>
<li>malloc</li>
</ul>
</li>
</ul>
</li>
<li>用户栈段
<ul>
<li>程序执行所需要的栈空间，实现函数的调用
<ul>
<li>用于保存子程序返回地址</li>
<li>在函数和被调函数之间传递参数</li>
<li>函数体内部定义的变量(静态变量除外)</li>
</ul>
</li>
<li>main函数得到的命令行参数以及环境参数
<ul>
<li>存放在栈的最底部</li>
<li>main函数运行之前，这些部分就已经被系统初始化</li>
</ul>
</li>
<li>栈段的动态增长与增长限制（getrlimit, setrlimit）</li>
</ul>
</li>
<li>系统数据段
<ul>
<li>上述三部分在进程私有的独立的逻辑地址空间内（CPU用户态访问）</li>
<li>系统数据段是内核内的数据，每个进程对应一套
<ul>
<li>包括页表和进程控制块PCB</li>
</ul>
</li>
</ul>
</li>
<li>进程虚拟地址空间的布局
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-30%2008.17.21.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>size命令观察可执行程序的段大小</p>
<ul>
<li>size filename-list 列出程序或目标文件的相应段大小
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-30%2008.22.42.png" alt=""></li>
</ul>
</li>
<li>
<p>Pentinum虚拟地址到物理地址转换
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-30%2008.23.37.png" alt=""></p>
<ul>
<li>一个4K是一个页</li>
<li>VPN页号</li>
<li>VPO业内偏移量</li>
<li>术语
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-30%2008.30.52.png" alt=""></li>
<li>两级页表
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-30%2008.31.37.png" alt=""></li>
<li>虚实地址转换
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-30%2008.35.07.png" alt=""></li>
<li>PDE （Page Directory Entry）
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-30%2008.35.59.png" alt=""></li>
<li>PTE （Page Table Entry）
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-30%2008.36.26.png" alt=""></li>
<li>PDE与PTE中的标志位能解决的问题
<ul>
<li>内存越界</li>
<li>内存读写保护</li>
<li>缺页调入</li>
<li>利用磁盘交换区实现以较小物理内存提供较大逻辑内存的效果</li>
<li>栈段的生长</li>
<li>多进程共享内存，写时复制</li>
<li>LRU算法判断页有没有被访问</li>
<li>淘汰页面时判断是否需要回写磁盘</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="进程的执行状态">进程的执行状态</h2>
<ul>
<li>
<p>进程的系统数据</p>
              </div>
            </div>

            <div class="f6 text-gray mt-2">
              
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                计算机科学与技术
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/linux">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                Linux
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6%E4%B8%8E%E8%BF%9B%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                进程控制与进程间的通信
              </a>
              
              

              Created
              <relative-time datetime=" Wed, 30 Apr 2025 00:00:00 &#43;0000" class="no-wrap"
                title=" Wed, 30 Apr 2025 00:00:00 &#43;0000">
                Wed, 30 Apr 2025 00:00:00 &#43;0000
              </relative-time>
            </div>
          </div>
        </li>
        
        <li class="col-12 d-flex width-full py-4 border-bottom color-border-secondary public source">
          <div class="col-12 d-inline-block">
            <div class="d-inline-block mb-1">
              <h3 class="wb-break-all">
                <a href="https://y-m-m.github.io/post/linux_bash%E8%84%9A%E6%9C%AC%E5%8F%8A%E8%84%9A%E6%9C%AC%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">Linux bash脚本及脚本程序设计</a>
              </h3>
            </div>

            <div>
              <div class="col-12 d-inline-block text-gray mb-2 pr-4">
                <h1 id="1-shell的基本机制">1 shell的基本机制</h1>
<h2 id="关于shell">关于shell</h2>
<ul>
<li>shell种类
<ul>
<li>B-shell</li>
<li>C-shell</li>
<li>K-shell</li>
<li>/bin/bash Linux上的标准shell</li>
<li>管理员在创建用户时，设置了用户的登录shell</li>
</ul>
</li>
<li>shell的功能
<ul>
<li>shell是命令解释器</li>
<li>文件名替换，命令替换，变量替换</li>
<li>历史替换</li>
<li>别名替换</li>
<li>流程控制的内部命令(内部命令和外部命令)</li>
</ul>
</li>
<li>shell的特点
<ul>
<li>主要用途：批处理，执行效率比算法语言低</li>
<li>shell编程风格和C语言等算法语言的区别
<ul>
<li>shell是面向命令处理的语言，提供的流程控制结构通过对一些内部命令的解释实现</li>
</ul>
</li>
<li>如同C语言设计思路一样，shell本身设计的非常精炼，但是它提供了灵活的机制(策略与机制相分离)
<ul>
<li>shell有许多灵活的功能，通过shell替换实现</li>
<li>例如：流程控制所需的条件判断，四则运算，都由shell之外的命令完成</li>
</ul>
</li>
</ul>
</li>
<li>理解Unix的shell
<ul>
<li>学习bash的目的
<ul>
<li>在交互方式下：熟习shell的替换机制、转义机制，掌握循环等控制流程，可以编写符合命令</li>
<li>非交互方式：编写shell脚本程序，把一系列操作，编纂成一个脚本文件，批量处理</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="bash的启动">bash的启动</h2>
<ul>
<li>三种启动方法
<ul>
<li>注册shell</li>
<li>键入bash命令</li>
<li>脚本解释器</li>
</ul>
</li>
<li>自动执行的一批命令(用户偏好)
<ul>
<li>当bash作为注册shell被启动时，自动执行用户住目录下的.bash_profile文件中命令，~/.bash_profile或$HOME/.bash_profile</li>
<li>当bash作为注册shell退出时：自动执行$HOME/.bash_logout</li>
<li>当bash作为交互式shell启动时: 自动执行$HOME/.bashrc</li>
<li>类似umask之类的命令，应当写在.profile文件中</li>
</ul>
</li>
<li>自动执行的一批命令（系统级）
<ul>
<li>当bash作为注册shell被启动时:自动执行 /etc/profile文件中命令</li>
<li>当bash作为交互式shell启动时: 自动执行 /etc/bash.bashrc</li>
<li>当bash作为注册shell退出时:自动执行/etc/bash.bash.logout</li>
</ul>
</li>
<li>脚本文件
<ul>
<li>编辑文件lsdir (格式为文本文件，文件名不必须为.sh后缀，只是个惯例)
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-23%2017.37.26.png" alt=""></li>
</ul>
</li>
<li>脚本文件的执行
<ul>
<li>新创建子进程，并在子进程中执行脚本
<ul>
<li>方法一
<ul>
<li>bash&lt;lsdir</li>
<li>无法携带命令行参数</li>
</ul>
</li>
<li>方法二
<ul>
<li>bash lsdir</li>
<li>bash -x lsdir</li>
<li>bash lsdir /usr/lib/gcc</li>
</ul>
</li>
<li>方法三
<ul>
<li>给文件设置可执行属性x：chmod u+x lsdir</li>
<li>然后执行 ./lsdir /usr/lib/gcc</li>
<li>三种方法均启动程序/bin/bash，生成新进程</li>
</ul>
</li>
</ul>
</li>
<li>在当前shell中执行脚本
<ul>
<li>. lsdir /usr/lib/gcc</li>
<li>source lsdir /usr/lib/gcc</li>
<li>脚本执行后对当前shell状态有影响</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="历史与别名">历史与别名</h2>
<ul>
<li>历史表
<ul>
<li>先前键入的命令存在于历史表，编号递增，FIFO刷新</li>
<li>历史表大小
<ul>
<li>由变量HISTSIZE设定</li>
<li>修改HISTSIZE的配置应放入~/.bashrc</li>
</ul>
</li>
</ul>
</li>
<li>查看历史表
<ul>
<li>内部命令history</li>
<li>文件 $HOME/.bash_history</li>
</ul>
</li>
<li>历史替换
<ul>
<li>人机交互时直接使用上下箭头键</li>
<li>其他引用历史机制的方法
<ul>
<li>!! 引用上一命令</li>
<li>!str 以str开头的最近用过的命令，如:!v !m !.</li>
</ul>
</li>
</ul>
</li>
<li>别名和别名替换
<ul>
<li>在别名表中增加一个别名(内部命令 alias)
<ul>
<li>alias dir=&ldquo;ls -flad&rdquo;</li>
<li>alias n=&ldquo;netstat -p tcp -s | head -10&rdquo;</li>
</ul>
</li>
<li>如果需要，应把alias命令放入.bashrc</li>
<li>查看别名表alias</li>
<li>取消别名(内部命令unalias)
<ul>
<li>unalias n 在别名表中取消n</li>
</ul>
</li>
</ul>
</li>
<li>TAB键补全
<ul>
<li>每行的首个单词
<ul>
<li>TAB键补全搜索$PATH下的命令</li>
</ul>
</li>
<li>行中的其它单词
<ul>
<li>TAB键补全当前目录下的文件名</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="输入重定向">输入重定向</h2>
<ul>
<li>从数据文件中获取stdin &lt;filename</li>
<li>&laquo; word 从shell脚本获取数据直到遇到定界符word（ 允许替换）
<ul>
<li>cat &laquo; TOAST</li>
<li>
<ul>
<li>Now : <code>date</code></li>
</ul>
</li>
<li>
<ul>
<li>My Home Directory is $HOME</li>
</ul>
</li>
<li>TOAST</li>
</ul>
</li>
<li>定界符所界定内容加工处理(等同双引号处理): 变量替换，命令替换</li>
<li>从shell中获得stdin：不许替换
<ul>
<li>cat &laquo; &lsquo;TOAST&rsquo;</li>
<li>
<ul>
<li>Now : <code>date</code></li>
</ul>
</li>
<li>
<ul>
<li>My Home Directory is $HOME</li>
</ul>
</li>
<li>TOAST</li>
<li>Pwd</li>
</ul>
</li>
<li>&laquo;&lt; word 从命令行获取信息作为标准输入
<ul>
<li>base64 &laquo;&lt; meiyoumima</li>
<li>base64 &laquo;&lt; &lsquo;mei you mi ma&rsquo;</li>
</ul>
</li>
</ul>
<h2 id="输出重定向与管道">输出重定向与管道</h2>
<ul>
<li>程序的标准输入/输出
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-23%2017.54.39.png" alt=""></li>
<li>使用系统调用(原始I/O)
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-23%2017.56.32.png" alt=""></li>
<li>使用库函数
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-23%2017.59.44.png" alt="">
<ul>
<li>变量名stdin, stdout, stderr用于C语言调用</li>
</ul>
</li>
<li>stdout输出重定向
<ul>
<li>
<blockquote>
<p>filename 将stdout重定向到文件filename，文件已存在则先清空（覆盖方式）</p>
              </div>
            </div>

            <div class="f6 text-gray mt-2">
              
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                计算机科学与技术
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/linux">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                Linux
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/bash">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                bash
              </a>
              
              

              Created
              <relative-time datetime=" Wed, 23 Apr 2025 00:00:00 &#43;0000" class="no-wrap"
                title=" Wed, 23 Apr 2025 00:00:00 &#43;0000">
                Wed, 23 Apr 2025 00:00:00 &#43;0000
              </relative-time>
            </div>
          </div>
        </li>
        
        <li class="col-12 d-flex width-full py-4 border-bottom color-border-secondary public source">
          <div class="col-12 d-inline-block">
            <div class="d-inline-block mb-1">
              <h3 class="wb-break-all">
                <a href="https://y-m-m.github.io/post/linux_%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/">Linux 文件系统管理</a>
              </h3>
            </div>

            <div>
              <div class="col-12 d-inline-block text-gray mb-2 pr-4">
                <h1 id="文件管理">文件管理</h1>
<h2 id="列出文件目录-ls">列出文件目录 ls</h2>
<ul>
<li>基本功能
<ul>
<li>不给实参时，列出当前目录下所有文件和目录</li>
<li>实参为文件时，列出文件项</li>
<li>实参为目录时，列出目录下所有文件项</li>
</ul>
</li>
<li>-F (Flag)
<ul>
<li>若列出的是目录，就在名字后面缀以/</li>
<li>若列出的是可执行文件，就在名字后面缀以*</li>
<li>若列出的是符号连接文件，就在名字后面缀以符号@</li>
<li>若列出的是普通文件，则在名字后面无任何标记</li>
</ul>
</li>
<li>-l 长格式列表
<ul>
<li>-rwxr-x&ndash;x l liang stud 519 Jul 5 15:02 arg</li>
<li>第一列 文件属性
<ul>
<li>第一字符：文件类型
<ul>
<li>-普通文件</li>
<li>b块设备文件</li>
<li>d目录文件</li>
<li>c自负设备文件</li>
<li>l符号连接文件</li>
<li>p命名管道文件</li>
</ul>
</li>
<li>文件的访问权限
<ul>
<li>2-4字符 文件所有者对文件的访问权限</li>
<li>5-7字符 同组用户对文件的访问权限</li>
<li>8-10字符 其他用户对文件的访问权限</li>
</ul>
</li>
</ul>
</li>
<li>第二列 文件link数，涉及到此文件的目录项数</li>
<li>第三列，第四列 文件主的名字和组名</li>
<li>第五列
<ul>
<li>普通磁盘文件：列出文件大小(字节数)</li>
<li>目录：列出目录表大小，不是目录下文件长度和</li>
<li>符号连接文件：列出符号连接文件自身的长度</li>
<li>字符设备和块设备文件：列出主设备号和次设备号</li>
<li>管道文件：列出管道内的数据长度</li>
</ul>
</li>
<li>第六列 文件最后一次被修改的日期和时间</li>
<li>第七列 文件名
<ul>
<li>对于符号连接文件，附带列出符号连接文件的内容</li>
</ul>
</li>
</ul>
</li>
<li>-h 以便于人阅读的方式打印数值</li>
<li>-d 当ls的参数是目录时，不像默认情况那样列出目录下的文件，二是列出目录自身的信息</li>
<li>-a 列出文件名首字母为圆点的文件</li>
<li>-A 功能与-a相同，但不列出.和..</li>
<li>-s 列出文件占用的磁盘空间</li>
<li>-i 列出文件的i节点</li>
</ul>
<h2 id="拷贝文件-cp">拷贝文件 cp</h2>
<ul>
<li>cp file1 file2
<ul>
<li>file2不存在：创建</li>
<li>file2是文件：覆盖</li>
<li>file2存在且是目录</li>
</ul>
</li>
<li>cp file1 file2 &hellip; filen dir
<ul>
<li>dir必须是一个目录，并且已存在</li>
</ul>
</li>
<li>例
<ul>
<li>cp a.c a.bak</li>
<li>cp a.c b.c backup.d</li>
<li>cp *.c backup.d
<ul>
<li>UNIX中实际执行cp a1.c a2.c b1.c b2.c backup.d</li>
<li>与Windows命令COPY *.C BAK.D执行结果相同，过程不同</li>
</ul>
</li>
<li>cp backup.d/p*.c
<ul>
<li>实际执行：
<ul>
<li>cp backup.d/p1.c backup.d/p2.c</li>
<li>结果：
<ul>
<li>backup.d目录下文件p1.c将覆盖掉p2.c</li>
<li>（与Windows的copy backup.d\p*.c执行结果不同，Windows的命令会把这两个备份文件拷贝回当前目录）将这两个文件拷贝回当前目录下的正确用法： cp backup.d/p*.c .</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="移动文件-mv">移动文件 mv</h2>
<p>TODO</p>
              </div>
            </div>

            <div class="f6 text-gray mt-2">
              
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%8A%80%E6%9C%AF">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                计算机科学与技术
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/linux">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                Linux
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                文件系统管理
              </a>
              
              

              Created
              <relative-time datetime=" Wed, 16 Apr 2025 00:00:00 &#43;0000" class="no-wrap"
                title=" Wed, 16 Apr 2025 00:00:00 &#43;0000">
                Wed, 16 Apr 2025 00:00:00 &#43;0000
              </relative-time>
            </div>
          </div>
        </li>
        
        <li class="col-12 d-flex width-full py-4 border-bottom color-border-secondary public source">
          <div class="col-12 d-inline-block">
            <div class="d-inline-block mb-1">
              <h3 class="wb-break-all">
                <a href="https://y-m-m.github.io/post/linux_vi/">Linux使用 vi</a>
              </h3>
            </div>

            <div>
              <div class="col-12 d-inline-block text-gray mb-2 pr-4">
                <h1 id="用户偏好设置">用户偏好设置</h1>
<ul>
<li>文件：HOME目录下的.exrc，记作$HOME/.exrc
<ul>
<li>set number 每行左边显示行号</li>
<li>set tabstop = 4 制表符位置为4格对齐</li>
</ul>
</li>
<li>运行时使用set命令
<ul>
<li>:set 检查偏好设置</li>
<li>:set option 设置一个偏好</li>
<li>:set nooption 取消一个设置</li>
</ul>
</li>
</ul>
<h1 id="vi的两种工作状态">vi的两种工作状态</h1>
<ul>
<li>命令状态
<ul>
<li>键盘输入解释为命令</li>
<li>一般按键无回显</li>
<li>以冒号可以引入编辑的命令和查找命令</li>
<li>编辑命令i(在当前字符前插入) a(在当前字符后插入)时，可以用命令状态转换为文本状态</li>
</ul>
</li>
<li>文本状态
<ul>
<li>键盘输入解释为输入的文本</li>
<li>可以输入多行，回车键换行</li>
<li>正文输入有回显</li>
<li>按Esc键，返回到命令状态</li>
</ul>
</li>
</ul>
<h1 id="命令状态指令">命令状态指令</h1>
<h2 id="光标单字符移动">光标单字符移动</h2>
<ul>
<li>单字符移动
<ul>
<li>h 光标左移一列</li>
<li>j 光标下移一列</li>
<li>k 光标上移一列</li>
<li>l 光标右移一列</li>
<li>一般可以直接用方向键代替这四个指令</li>
</ul>
</li>
<li>连续执行多遍单字符移动
<ul>
<li>指令前加数字，数字表示执行的次数</li>
</ul>
</li>
</ul>
<h2 id="翻页">翻页</h2>
<ul>
<li>命令
<ul>
<li>ctrl-b 向后翻页(可用PgDn键代替)</li>
<li>ctrl-f 向前翻页(可用PgUp键代替)</li>
</ul>
</li>
<li>可连续执行多遍</li>
</ul>
<h2 id="光标行内快速移动">光标行内快速移动</h2>
<ul>
<li>行尾行首
<ul>
<li>将光标移至当前行首 ^</li>
<li>将光标移至当前行尾 $</li>
</ul>
</li>
<li>移动一个单词
<ul>
<li>移到右一个单词 w</li>
<li>移到左一个单词 b</li>
</ul>
</li>
</ul>
<h2 id="光标移动到指定行">光标移动到指定行</h2>
<ul>
<li>移到指定的行
<ul>
<li>:476 将光标定位于476行</li>
<li>:1 将光标定位于第1行</li>
<li>:$ 将光标定位于文件尾</li>
</ul>
</li>
<li>描述行号
<ul>
<li>. 当前行
<ul>
<li>.+10 当前位置下移十行</li>
</ul>
</li>
<li>$ 代表最后一行的尾号</li>
</ul>
</li>
<li>括号配对
<ul>
<li>%
<ul>
<li>将光标移动到一个括号所在行，按%键，光标自动定位到配对的那一对括号</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="删除命令">删除命令</h2>
<ul>
<li>删除字符
<ul>
<li>删除当前字符
<ul>
<li>x</li>
</ul>
</li>
<li>可重复执行多次</li>
</ul>
</li>
<li>删除行
<ul>
<li>删除当前行
<ul>
<li>dd</li>
</ul>
</li>
<li>可重复执行多次</li>
</ul>
</li>
</ul>
<h2 id="字符替换">字符替换</h2>
<ul>
<li>替换光标处字符
<ul>
<li>r</li>
<li>ra 将当前光标处字符替换为a</li>
<li>rarbrc 将当前光标处开始的三个字符依次替换为a，b，c</li>
</ul>
</li>
</ul>
<h2 id="取消和重复">取消和重复</h2>
<ul>
<li>取消上一次的编辑操作
<ul>
<li>u</li>
</ul>
</li>
<li>重复上一次的编辑操作
<ul>
<li>.</li>
</ul>
</li>
</ul>
<h2 id="文件操作命令">文件操作命令</h2>
<ul>
<li>存盘退出
<ul>
<li>Shift + ZZ</li>
<li>:wq</li>
</ul>
</li>
<li>存盘不退出
<ul>
<li>:w</li>
</ul>
</li>
<li>不存盘退出
<ul>
<li>:q!</li>
</ul>
</li>
<li>直接退出
<ul>
<li>q</li>
</ul>
</li>
<li>读入文件xyz.c插入到当前行之下
<ul>
<li>:r xyz.c</li>
</ul>
</li>
<li>写文件，把第50行至文件尾的内容写到file1中
<ul>
<li>:50, $w file1</li>
<li>:50, $w! file1(强制覆盖)</li>
</ul>
</li>
</ul>
<h2 id="剪贴板">剪贴板</h2>
<ul>
<li>删除，并拷贝到剪贴板
<ul>
<li>:10,50d 删除第10-50行</li>
<li>:1,.d 删除文件首至当前行的部分</li>
<li>:.,$d 删除当前行到文件尾</li>
</ul>
</li>
<li>不删除，拷贝到剪贴板
<ul>
<li>:10,50y</li>
</ul>
</li>
<li>粘贴剪贴板信息
<ul>
<li>p</li>
</ul>
</li>
</ul>
<h2 id="块操作复制与删除">块操作：复制与删除</h2>
<ul>
<li>:5,10co56 复制5-15行到第56行之下</li>
<li>:8,34m78 移动第8-31行到第78行之下</li>
</ul>
<h2 id="行合并刷屏和状态显示">行合并、刷屏和状态显示</h2>
<ul>
<li>两行合并 J
<ul>
<li>当前行下面的行合并到当前行</li>
</ul>
</li>
<li>刷新屏幕显示
<ul>
<li>ctrl-l</li>
</ul>
</li>
<li>状态显示
<ul>
<li>ctrl-g</li>
<li>在屏幕最下面一行列出正在编辑的文件的名字，总行数，当前行号，文件是否被修改过等信息</li>
</ul>
</li>
</ul>
<h2 id="模式查找">模式查找</h2>
<ul>
<li>用正则表达式来描述一个字符串模式</li>
<li>查找命令
<ul>
<li>格式 /patern</li>
</ul>
</li>
<li>继续查找命令
<ul>
<li>n 向下查找下一个next</li>
<li>N 向上查找下一个</li>
<li>循环式搜索</li>
</ul>
</li>
</ul>
<h2 id="模式替换">模式替换</h2>
<ul>
<li>替换命令
<ul>
<li>:n1,n2s/pattern/string/g</li>
</ul>
</li>
<li>例
<ul>
<li>:1,50s/abc/xyz/</li>
<li>:1,50s/abc/xyz/g</li>
<li>:50,80s/^/    / 第50-80行右移4列</li>
<li>:50,80s/^    // 第50-80行左移4列</li>
<li>:1,$s/ *$// 消除尾部多余的空格</li>
<li>:1,$s/a[i]/b[j]/g 小心陷阱：不能把a[i]替换为b[j]</li>
<li>:1,$/a*b/x+y/g 小心陷阱：不能把a * b替换为x + y</li>
</ul>
</li>
<li>转义字符
<ul>
<li>将a[i] * b[j]替换为x[k] * y[n]的命令
<ul>
<li>:1,$s/a[i]*b[j]/x[k]*y[n]/g</li>
</ul>
</li>
<li>将buf.len/1000替为buffer.size/1024的命令
<ul>
<li>:1,$s/buf.len/1000/buffer.size/1024/g</li>
<li>模式串和替换字符串中的斜线前加转义符\以区别于替换命令格式中所必须的斜线</li>
</ul>
</li>
<li>:1,$s:buf.len/1000:buffer.size/1024:g
<ul>
<li>s后面以冒号取代斜线，分界符换为冒号，避免对斜线的转义</li>
</ul>
</li>
<li>:1,$s^http://www.myvdo.com/a/b/c/index.html^https://www.xyvdo.com/index.html^g
<ul>
<li>s后面以^号作分界符</li>
</ul>
</li>
</ul>
</li>
<li>更灵活的替换
<ul>
<li>模式描述中增加(和)
<ul>
<li>在正则表达式中圆括号，仍然代表它自身</li>
<li>在正则表达式中出现的(和)不影响匹配操作</li>
</ul>
</li>
<li>例
<ul>
<li>[a-zA-Z_][a-zA-Z0-9_]*-&gt;number</li>
<li>([a-zA-Z_][a-zA-Z0-9_]*)-&gt;number</li>
<li>替换字符串中的 \0 \1 \2 ……
<ul>
<li>将“变量名-&gt;number”替换为“变量名-&gt;num”
<ul>
<li>:1,$s/([a-zA-Z_][a-zA-Z0-9_]*)-&gt;number/\1-&gt;num/g</li>
</ul>
</li>
<li>将日期格式“月-日-年”改为“年.月.日”,
<ul>
<li>比如：将 04-26-1997替换为1997.04.26使用命令:</li>
<li>:1,$s/([0-9][0-9])-([0-9][0-9])-([0-9][0-9]*)/\3.\1.\2/g</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="总结">总结</h1>
<p><img src="/images/%E6%88%AA%E5%B1%8F2025-04-16%2016.09.07.png" alt="">       <br>
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-16%2016.09.50.png" alt="">    <br>
<img src="/images/%E6%88%AA%E5%B1%8F2025-04-16%2016.10.27.png" alt=""></p>
              </div>
            </div>

            <div class="f6 text-gray mt-2">
              
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                计算机科学
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/linux">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                Linux
              </a>
              
              <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/vi">
                <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                  <path fill-rule="evenodd"
                    d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                  </path>
                </svg>
                vi
              </a>
              
              

              Created
              <relative-time datetime=" Tue, 15 Apr 2025 00:00:00 &#43;0000" class="no-wrap"
                title=" Tue, 15 Apr 2025 00:00:00 &#43;0000">
                Tue, 15 Apr 2025 00:00:00 &#43;0000
              </relative-time>
            </div>
          </div>
        </li>
        
      </ul>
      <div class="paginate-container">
        <div class="BtnGroup">
          
          <button class="btn btn-outline BtnGroup-item" disabled="disabled">Previous</button>
          
          
          <button class="btn btn-outline BtnGroup-item" disabled="disabled">Next</button>
          
        </div>
      </div>
    </div>
  </div>
</div>

      
    </div>
  </div>
</div>
<script>
window.onscroll = function (e) {
  const headerImg = document.querySelector('#headerImg');
  const headerStuck = document.querySelector('#headerStuck');
  if (headerImg.getBoundingClientRect().bottom <= 0) {
    headerStuck.classList.add('is-stuck');
    if (window.innerWidth >= 1280) {
      headerStuck.setAttribute('style', 'top: 12px;')
    } else {
      headerStuck.setAttribute('style', 'top: 0;')
    }
  } else {
    headerStuck.classList.remove('is-stuck');
  }
};

var style = localStorage.getItem('data-color-mode')
githubIconElement = document.getElementById('github-icon')
twitterIconElement = document.getElementById('twitter-icon')
if (style == 'light') {
  if (githubIconElement) githubIconElement.setAttribute('fill', '#24292e')
  if (twitterIconElement) twitterIconElement.setAttribute('fill', 'black')
}
else {
  if (githubIconElement) {
    githubIconElement.removeAttribute('fill')
    githubIconElement.setAttribute('class', 'octicon')
    githubIconElement.setAttribute('color', '#f0f6fc')
  }
  if (twitterIconElement)  twitterIconElement.setAttribute('fill', 'white') 
}
</script>

  

</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://y-m-m.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://y-m-m.github.io/js/github-style.js"></script>





<script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
<script type="application/javascript" src='https://y-m-m.github.io/js/search.js'></script>



</html>