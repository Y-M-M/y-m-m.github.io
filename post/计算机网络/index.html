<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://y-m-m.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://y-m-m.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/light.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://y-m-m.github.io/css/syntax.css' />
    <title>计算机网络 - 陈皮的博客</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github-mark.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="chapter 1 Introduction 什么是计算机网络 a group of separate but interconnected computers computers, PADs, Smart phones, Home appliances, Senors 直接相连/需要中转 有线/无线 分布式系统与计算机网络 分布式系统：A collection of independent computers appears to its users as a single coherent system（单一的系统） 计算机网络：A collection of autonomous(自主工作) computers interconnected by a single technology The distinction lies with software(especially the OS), rather than with the hardware. 计算机网络的应用 Resource sharing Client-Server Model：Email、DNS、DHCP、FTP Business Applications Communication medium Email, VoIP, video conferencing QoS(Quality of Service) latency (or delay), jitter, bandwidth bit-error-rate Electronic commerce Airlines, bookstores, shopping carts,… Home Applications Access to remote information
" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://y-m-m.github.io/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="计算机网络 - 陈皮的博客" />
<meta name="twitter:description"
  content="chapter 1 Introduction 什么是计算机网络 a group of separate but interconnected computers computers, PADs, Smart phones, Home appliances, Senors 直接相连/需要中转 有线/无线 分布式系统与计算机网络 分布式系统：A collection of independent computers appears to its users as a single coherent system（单一的系统） 计算机网络：A collection of autonomous(自主工作) computers interconnected by a single technology The distinction lies with software(especially the OS), rather than with the hardware. 计算机网络的应用 Resource sharing Client-Server Model：Email、DNS、DHCP、FTP Business Applications Communication medium Email, VoIP, video conferencing QoS(Quality of Service) latency (or delay), jitter, bandwidth bit-error-rate Electronic commerce Airlines, bookstores, shopping carts,… Home Applications Access to remote information
" />
<meta name="twitter:site" content="https://y-m-m.github.io/" />
<meta name="twitter:creator" content="陈皮" />
<meta name="twitter:image"
  content="https://y-m-m.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="计算机网络 - 陈皮的博客">
<meta property="og:description"
  content="chapter 1 Introduction 什么是计算机网络 a group of separate but interconnected computers computers, PADs, Smart phones, Home appliances, Senors 直接相连/需要中转 有线/无线 分布式系统与计算机网络 分布式系统：A collection of independent computers appears to its users as a single coherent system（单一的系统） 计算机网络：A collection of autonomous(自主工作) computers interconnected by a single technology The distinction lies with software(especially the OS), rather than with the hardware. 计算机网络的应用 Resource sharing Client-Server Model：Email、DNS、DHCP、FTP Business Applications Communication medium Email, VoIP, video conferencing QoS(Quality of Service) latency (or delay), jitter, bandwidth bit-error-rate Electronic commerce Airlines, bookstores, shopping carts,… Home Applications Access to remote information
" />
<meta property="og:url" content="https://y-m-m.github.io/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" />
<meta property="og:site_name" content="计算机网络" />
<meta property="og:image"
  content="https://y-m-m.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2024-02-26 00:00:00 &#43;0000 UTC" />











</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://y-m-m.github.io/">
        <img class="octicon" height="32" width="32" src="/images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" id="search-form" action="" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://y-m-m.github.io/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="/images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://y-m-m.github.io/">
                  <img class=" avatar-user"
                    src="/images/me.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://y-m-m.github.io/">陈皮</a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="https://y-m-m.github.io/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Mon, 26 Feb 2024 00:00:00 &#43;0000"
                    class="no-wrap">
                    Mon, 26 Feb 2024 00:00:00 &#43;0000</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Mon, 07 Oct 2024 10:23:10 &#43;0800"
                    class="no-wrap">
                    Mon, 07 Oct 2024 10:23:10 &#43;0800</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      33247 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      计算机科学
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      计算机网络
                    </a>
                    
                    <a class="muted-link mr-3" href="https://y-m-m.github.io/tags/%E7%AC%94%E8%AE%B0">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      笔记
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="chapter-1--introduction">chapter 1  Introduction</h1>
<h2 id="什么是计算机网络">什么是计算机网络</h2>
<ul>
<li>a group of separate but interconnected computers computers, PADs, Smart phones, Home appliances, Senors</li>
<li>直接相连/需要中转 有线/无线</li>
</ul>
<h2 id="分布式系统与计算机网络">分布式系统与计算机网络</h2>
<ul>
<li>分布式系统：A collection of independent computers appears to its users as a single coherent system（单一的系统）</li>
<li>计算机网络：A collection of autonomous(自主工作) computers interconnected by a single technology</li>
<li>The distinction lies with software(especially the OS), rather than with the hardware.</li>
</ul>
<h2 id="计算机网络的应用">计算机网络的应用</h2>
<h3 id="resource-sharing">Resource sharing</h3>
<h3 id="client-server-modelemaildnsdhcpftp">Client-Server Model：Email、DNS、DHCP、FTP</h3>
<h3 id="business-applications">Business Applications</h3>
<ul>
<li>Communication medium
<ul>
<li>Email, VoIP, video conferencing</li>
</ul>
</li>
<li><strong>QoS(Quality of Service)</strong>
<ul>
<li>latency (or delay), jitter, bandwidth</li>
<li>bit-error-rate</li>
</ul>
</li>
<li>Electronic commerce
<ul>
<li>Airlines, bookstores, shopping carts,…</li>
</ul>
</li>
</ul>
<h3 id="home-applications">Home Applications</h3>
<ul>
<li>
<p>Access to remote information</p>
</li>
<li>
<p>Person-to-person communication</p>
<ul>
<li>Instant messaging (QQ), social networks</li>
<li><strong>P2P (Peer to Peer)</strong></li>
<li>Interactive entertainment(交互式娱乐)</li>
<li>Electronic commerce</li>
<li>Ubiquitous computing(普适计算)</li>
</ul>
</li>
<li>
<p>Mobile Users</p>
<ul>
<li>Mobile computers</li>
<li>Connectivity to the Internet</li>
<li>Combinations of wireless networks and mobile computing.</li>
</ul>
</li>
<li>
<p>fixed wireless and mobile wireless</p>
</li>
</ul>
<h3 id="social-issues">Social Issues</h3>
<ul>
<li>Eavesdropping(窃听)</li>
<li>forgery(伪造)</li>
<li>tampering(篡改)</li>
<li>Unwanted communication (Spam, …)</li>
<li>Privacy</li>
</ul>
<h2 id="network-hardware">Network Hardware</h2>
<h3 id="nodes">Nodes</h3>
<ul>
<li>Computers/Hosts(主机)/End Systems 端结点（客户端和服务器）</li>
<li>Switches/Routers (Nodes, 节点)  中继结点 基础设施、共享</li>
</ul>
<h3 id="communication-links-wired-or-wireless">Communication Links (wired or wireless)</h3>
<h3 id="infrastructure-network-vs-ad-hoc-network">infrastructure network vs. Ad hoc network</h3>
<h3 id="category-of-computer-networks">Category of Computer Networks</h3>
<ul>
<li>
<p>Transmission technology</p>
<ul>
<li>Broadcast links 广播式链路</li>
<li>Point-to-point links(unicasting)  WANs 点到点链路</li>
<li>Multicasting LANs</li>
</ul>
</li>
<li>
<p>Network scale</p>
<ul>
<li>PAN 个域网（1m）  Bluetooth（蓝牙），RFID（芯片、智能标签），Zigbee（物联网、无线传输），WSN（无线传感网络）NFC</li>
<li>LAN 局域网   Ethernet（以太网），Wifi</li>
<li>MAN 城域网   Cable television(cable TV), WiMax (IEEE802.16)</li>
<li>WAN 广域网   Telecommunication network（电信网）, 3G, 4G, 5G</li>
<li>internet  Internet（因特网） is the unique world-wide internet；ISP：Internet Service Provider</li>
</ul>
</li>
<li>
<p>Position</p>
<ul>
<li>接入网/园区网络（LAN）</li>
<li>传输网络（MAN和WAN）</li>
<li>数据中心 高带宽、低时延、大容量（特殊的LAN）</li>
</ul>
</li>
</ul>
<h2 id="network-software">Network Software</h2>
<h3 id="protocol-hierarchies协议层级架构">Protocol Hierarchies（协议层级架构）</h3>
<h4 id="stack-of-layers层次栈">stack of layers层次栈</h4>
<ul>
<li>reduce design complexity  简化设计和实现，便于互联互通</li>
<li>offer certain services to higher layer(上层调用下层，下层给上层提服务，通过interfaces，只有相邻层可以提供服务)</li>
<li>implemented(Encapsulating封装) 为网络将来的演进提供方便</li>
<li>冗余-&gt;层层封装encapsulting</li>
<li>协议protocol</li>
<li>优点
<ul>
<li>简化网络的设计和实现的难度</li>
<li>各层之间依赖性较低，只要不改变服务和接口，各层内部进行修改不会影响其他层</li>
</ul>
</li>
<li>可能的缺点
<ul>
<li>由于各层都要加上控制信息和处理的开销，性能比不分层的系统要差</li>
</ul>
</li>
</ul>
<h4 id="object-oriented-programming">Object-oriented programming</h4>
<h4 id="layers-peers-protocols-and-interfaces">layers, peers, protocols, and Interfaces</h4>
<ul>
<li>protocol(协议) 通信双方为了使通信正常进行所需要遵守的约定 An agreement between the communicating parties on how communication is to proceed</li>
<li>peers(对等实体) The entities comprising the corresponding layers on different machines; The peers may be processes hardware devices（进程或设备）</li>
<li>Interface(接口) Defines which primitive operations and services the lower layer
makes available to the upper one 不是体系结构定义的</li>
<li>Network architecture（网络体系结构）A set of layers and protocols;Neither the details of the implementation nor the specification of the interfaces is part of the architecture 封装的细节或者接口的特点都不是网络体系结构的一部分</li>
<li>Protocol Stack（协议栈）A list of protocols used by a certain system</li>
<li>通信是对等层通信，信息的流动是U形流动；除最下层外，其他层都是虚拟通信，最后一层是物理通信；高层的数据和底层的数据量不一样</li>
</ul>
<h4 id="information-flow">Information flow</h4>
<ul>
<li>第一层即物理层将bit变成电信号，将电信号变成bit，不加任何冗余信息</li>
<li>第二层加头和尾 链路层</li>
<li>除物理层外都会加protocol，冗余的头</li>
<li>在网络层分片 fragment</li>
<li>传输效率 m/(m+h2+……) 不能达到100% -&gt; 内容/传输效率 计算传输速度</li>
<li>PDU(协议数据单元)即每一层的数据包</li>
</ul>
<h3 id="design-issues-for-the-layers">Design Issues for the Layers</h3>
<h4 id="reliability">Reliability</h4>
<ul>
<li>Error detection and error correction(差错检测和恢复)</li>
<li>Routing: to find a path through a network(路由选择)</li>
</ul>
<h4 id="network-evolution">Network evolution</h4>
<ul>
<li>Protocol layering: dividing the overall problem and hiding implementation details</li>
<li>Addressing or naming: identifying senders and receivers</li>
<li>Internetworking（网络互通性）</li>
<li>Scalability(可扩展性)</li>
</ul>
<h4 id="resource-allocation">Resource allocation</h4>
<ul>
<li>Statistical multiplexing(统计复用：按需分配)</li>
<li>Flow Control(流量控制)</li>
<li>Congestion Control(拥塞控制)&ndash;网络超载</li>
<li>QoS(服务质量)</li>
</ul>
<h4 id="security">Security</h4>
<ul>
<li>Confidentiality,Integrity,Availability,Authentication</li>
</ul>
<h3 id="services-connection-oriented-vs-connectionless">Services: Connection-oriented vs. Connectionless</h3>
<h4 id="services-connection-oriented面向连接">Services: Connection-oriented(面向连接)</h4>
<ul>
<li>connection: a circuit is another name for a connection with associated resources</li>
<li>three pharse: connection establishment; data transmission; connection release（释放所有资源）</li>
<li>features: transmission; address</li>
<li>category: reliable vs unreliable 有没有差错控制机制</li>
<li>telephone system</li>
<li>一般是可靠的</li>
<li>只有开始连接的时候给全地址，后面给ID即可</li>
<li>一定是按序到达对方</li>
<li>大文件</li>
</ul>
<h4 id="connectionless">connectionless</h4>
<ul>
<li>没有连接建立也没有连接释放阶段</li>
<li>简单</li>
<li>数据走不同的路径，可能乱序到达</li>
<li>postal system</li>
<li>每个数据包都要携带完整的地址</li>
<li>小数据</li>
</ul>
<h4 id="主要区别">主要区别</h4>
<ul>
<li>通信双方是否需要预先建立连接</li>
<li>能否保证数据传输的可靠性</li>
<li>通信过程中是否需要完整的目的地址</li>
</ul>
<h3 id="service-primitives服务原语interfaces-and-services">Service Primitives(服务原语)：Interfaces and services</h3>
<h4 id="service-provider-and-service-user">Service provider and service user</h4>
<ul>
<li>The entities in layer n implement a service used by layer n+1, layer n is called the services provider, layer n+1 is called service user</li>
</ul>
<h4 id="sap-service-access-point-服务访问点">SAP: Service Access Point (服务访问点)</h4>
<ul>
<li>Layer n SAPs are the places where layer n+1 can access the services offered</li>
</ul>
<h4 id="service-primitives-example">Service Primitives: Example</h4>
<ul>
<li>上层与下层之间 原语
<img src="../../images/%E6%88%AA%E5%B1%8F2024-03-03%2009.47.37.png" alt="service primitives"></li>
</ul>
<h3 id="the-relationship-of-service-to-protocols">The relationship of Service to Protocols</h3>
<ul>
<li>一层协议的实现需要下层的服务</li>
<li>服务的实现需要本层协议的支持</li>
<li>服务不变时，本层协议实现的改变不影响上层</li>
<li>第k层服务改变时，影响k+1层的服务，不影响k-1层的服务</li>
<li>协议是水平的，即协议是控制对等实体之间通信的规则。服务是垂直的，即服务是由下层向上层通过层间接口提供的。</li>
</ul>
<h4 id="协议的三要素">协议的三要素</h4>
<ul>
<li>语法：协议消息的格式，在PDU中可以显示出来  数据与控制信息的结构或格式</li>
<li>语义：消息的字段区某个值的含义，在PDU中可以显示出来   需要发出何种控制信息，完成何种动作以及作出何种响应</li>
<li>同步：事件发生顺序的详细说明，在PDU中不能显示出来
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.47.03.png" alt=""></li>
</ul>
<h2 id="reference-models">Reference Models</h2>
<h3 id="the-osi-referene-model">The OSI referene model</h3>
<p><img src="/images/WechatIMG6.jpg" alt="OSI"></p>
<h3 id="layer-principles">Layer principles</h3>
<ul>
<li>a well-defined function</li>
<li>the layer boundaries should be chosen to minimize the information flow across the interfaces</li>
<li>The number of layers should be
<ul>
<li>large enough that distinct functions need not be thrown together</li>
<li>small enough that the architecture does not become too large</li>
</ul>
</li>
</ul>
<p><img src="/images/WechatIMG7.jpg" alt=""></p>
<ul>
<li>上三层与传输无关，7层为应用层，与用户打交道；6层为表示层，将抽象语法表示为传输语法，可能还会有压缩、加密等操作；第5层为会话层。在intel网中都合并为一层</li>
<li>下四层与传输有关 物理层PHY，数据链路层DL，网络层(NET)，传输层(Transport)(1-4)</li>
<li>数据链路层负责对数据的检错、纠错，传输速度控制等，保证相邻两点间数据的可靠传输</li>
<li>简单的点对点通信，可以是简单的四层，物理层、数据链路层、（网络接口）表示层、应用层</li>
<li>网络层实现数据的路由、转发</li>
<li>传输层：解决端到端之间数据的可靠传输</li>
<li>会话层：应用进程通信过程中中断、重启的恢复，系统之间协调通信过程</li>
<li>路由器之间的传输没有问题，数据不一定没有问题：在路由器中进行处理时可能出现错误</li>
<li>端到端通信：上四层，下面都是点到点通信；端到端通信协议要一致，底层协议不一定要一致，只需要两点之间一致</li>
</ul>
<p><img src="/images/WechatIMG8.jpg" alt="The OSI reference model"></p>
<ul>
<li>网络层实现路由功能</li>
<li>七层模型是考虑了异构计算记得最复杂情况下的模型</li>
<li>在具体网络中需要根据实际需要确定</li>
</ul>
<h3 id="the-tcpip-reference-model基于实际网络的模型">The TCP/IP Reference Model（基于实际网络的模型）</h3>
<h4 id="design-goals">Design goals</h4>
<ul>
<li>connect multiple networks in a seamless way</li>
<li>be able to survive loss of subnet hardware, without existing conversations being broken off</li>
<li>A flexible architecture to support applications with divergent requirements</li>
</ul>
<p><img src="/images/WechatIMG9.jpg" alt="The TCP/IP Reference Model"></p>
<ul>
<li>Link层为网络接口层，不对标链路层，兼容异构的网络</li>
<li>四层架构</li>
</ul>
<h5 id="the-internet-layer网际层">The Internet Layer(网际层)</h5>
<ul>
<li>
<p>connectionless</p>
</li>
<li>
<p>IP(Internet Protocol)</p>
</li>
<li>
<p>job</p>
<ul>
<li>packet routing</li>
<li>avoiding congestion</li>
</ul>
</li>
<li>
<p>TCP(the transport layer)</p>
<ul>
<li>面向连接的、可靠的</li>
<li>字节流byte stream：segments incoming byte stream into discrete messages</li>
<li>reassembles the received messages into the
output stream</li>
<li>Flow control(流量控制)</li>
<li>Congestion control(拥塞控制)</li>
</ul>
</li>
<li>
<p>UDP(the transport layer)</p>
<ul>
<li>无连接的、不可靠的</li>
<li>For applications that do not want TCP‘s sequencing or flow control and wish to provide their own (i.e. NFS
网络文件系统)</li>
<li>For applications in which prompt delivery is more important than accurate delivery, such as transmitting speech or video, DNS</li>
</ul>
</li>
</ul>
<h4 id="a-critique-of-the-osi-model-and-protocols">A Critique of the OSI Model and Protocols</h4>
<ul>
<li>Why OSI did not take over the world
<ul>
<li>bad timing</li>
<li>bad technology</li>
<li>bad implementations</li>
<li>bad politics</li>
</ul>
</li>
</ul>
<h4 id="tcpip-critique">TCP/IP Critique</h4>
<ul>
<li>service, interface, and protocol not distinguished</li>
<li>not a general model</li>
<li>Link layer not really a layer</li>
<li>no distinguishing between physical and data link layers</li>
<li>minor protocols deeply entrenched, hard to replace,eg.Telnet</li>
</ul>
<h1 id="chapter-2-the-physical-layer">chapter 2 The Physical Layer</h1>
<h2 id="position-and-function-of-physical-layer">Position and Function of Physical Layer</h2>
<ul>
<li>the lowest layer（第一层），传输介质是第0层</li>
<li>defines the interfaces(bits are sent as signals over channels)
<img src="/images/WechatIMG12.jpg" alt="pyhsical layer"></li>
<li>比特信号的转换</li>
<li>比特速率的控制</li>
<li>同步</li>
<li>多路复用技术</li>
</ul>
<h2 id="basic-concepts-on-data-communications">Basic Concepts on Data Communications</h2>
<ul>
<li>
<p>commmunication:the transmission of information between two distant points</p>
</li>
<li>
<p>message:the information(data) to be communicated</p>
</li>
<li>
<p>signal:计算机网络传输的内容，将包含信息的消息转变为信号involving a single independent variable(time)</p>
</li>
<li>
<p>channel:信道，传送信息的介质(媒体)</p>
</li>
<li>
<p>bandwith(Hz):The Width of the frequency range transmitted without being strongly attenuated信号所能传输的高低频之差，衰减不会太严重(analog bandwidth:Hz; the digital bandwidth:bps)
<img src="/images/WechatIMG13.jpg" alt="信道带宽"></p>
</li>
<li>
<p>bit rate(bps): the number of bits transmitted persecond</p>
</li>
<li>
<p>baud rate(Baud): The number of signal units per second required to represents bits:1/T
<img src="/images/WechatIMG14.jpg" alt="Baud和bps的计算"></p>
</li>
<li>
<p>信道容量(Channel Capacity)：信道的最大传输数据率</p>
</li>
<li>
<p>吞吐量：网络可以传送的数据位数</p>
</li>
<li>
<p>负载：单位时间内注入网络的数据位数</p>
</li>
<li>
<p>误码率BER：信道传输可靠性指标 P=传送错的位数/总的传送位数</p>
</li>
<li>
<p>时延：从想网络中发送数据块的第一位开始，到最后一位数据被接受所经历的时间</p>
<ul>
<li>发送时延(Transmission dealy)：设备发送一个数据块所需要的时间，将bit变成电信号放进传输介质中，与信道的带宽有关
<ul>
<li>B=link bandwith(bps)</li>
<li>M= message length(bits)</li>
<li>time to send bits into link = M/B</li>
</ul>
</li>
<li>传播时延(Propagation Delay)
<ul>
<li>d = length of physical link</li>
<li>s = pro</li>
</ul>
</li>
<li>节点处理时延</li>
<li>排队时延：在交换机/路由器中排队等待的时间</li>
</ul>
</li>
<li>
<p>带宽时延积(bandwidth-delay product):表示充满整个链路的比特数，是一种网络性能指标 = 传播时延(propagation delay)*带宽(bandwidth)</p>
</li>
<li>
<p>通信方式</p>
<ul>
<li>simplex单工 FM Radio broadcasting</li>
<li>Half-duplex半双工：信息可以双向传递，但同一时刻信息只能单向传递talkie and walkie</li>
<li>Full-duplex：信息同时双向传递</li>
</ul>
</li>
<li>
<p>Serial transmission（串行传输） vs. Parallel transmission（并行传输）</p>
</li>
<li>
<p>Asynchronous Transmission（异步传输） vs. Synchronous Transmission（同步传输）</p>
<ul>
<li>异步传输：独立时钟，无需同步，有起始位和终止位</li>
<li>同步传输：收发双方始终同步</li>
</ul>
</li>
<li>
<p>Transmission Impairment</p>
<ul>
<li>Signal received may differ from signl transmitted
<ul>
<li>Analog - degradation(劣化) of signal quality</li>
<li>Digital - bit errors(误码)</li>
</ul>
</li>
<li>Caused by
<ul>
<li>Attenuation(衰减) and attenuation distortion(失真)，振幅</li>
<li>Delay distortion(时延失真)，不同频率的电磁波的传输时延不同</li>
<li>Noise(噪声)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="theoretical-basis-for-data-communications">Theoretical Basis for Data Communications</h2>
<ul>
<li>
<p>Fourier Transform(傅里叶变换)</p>
<ul>
<li>Any periodic signal g(t) with period T(=1/f) can be constructed by summing a (possibly infinite) number of sines and cosines</li>
<li>频率越高，能量越小（振幅越小）
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-06%2010.25.46.png" alt="傅里叶变换"></li>
<li>bandwidth
<ul>
<li>信道的频率范围由它本身确定，是信道的物理特性, depends on construction, thickness, length</li>
<li>信号的频率范围由傅里叶变换计算（信号的带宽），傅里叶变换能量主要集中范围</li>
<li>Higher data rates require more bandwidth. Limiting bandwidth limits data rate.-&gt;尽量有效的利用给定的带宽，信号质量控制在可接受的范围内，传输速率尽量高-&gt;需要研究：传输速率c、信道带宽B之间的关系-&gt;带宽受限信道的最大传输速率</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Capacity for noiseless channel(无噪声信道)</p>
<ul>
<li>Nyquist proved that: if an arbitrary signal has been run through a low-pass filter of bandwidth B, the filtered signal can be completely reconstructed by making only 2B samples per second</li>
<li>Given binary signal, data rate supported by B Hz is 2B bps
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-06%2010.36.32.png" alt="奈奎斯特公式"></li>
<li>计算时用最小的</li>
<li>Increasing the levels of a signal may increase the bit rate of the channel.但V不能无限制的增大，V值越多，有效状态之间的电压差越小</li>
<li>有噪声信道的最大传输速度与信道带宽与信道质量(关系到V值能提高到多少)有关 SNR信噪比越大越好</li>
</ul>
</li>
<li>
<p>Noisy Channel: Shannon Capacity（香农公式，1948）
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-06%2010.51.08.png" alt="香农公式"></p>
<ul>
<li>理论上限制，若传输速率超过了理论上限制，信号一定会失真
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-06%2010.52.40.png" alt="信噪比"></li>
</ul>
</li>
</ul>
<h2 id="guider-transmission-mediaself-study-有线传输介质">Guider Transmission Media(Self-study) 有线传输介质</h2>
<ul>
<li>
<p>Magnetic Media 磁介质</p>
</li>
<li>
<p>Guided 有线传输介质：原理、结构、分类、传输特性、典型应用</p>
<ul>
<li>Twisted Pair 双绞线</li>
<li>Coaxial Cable</li>
<li>Fiber Optics（前面三种带宽依次增大）</li>
<li>Power Lines</li>
</ul>
</li>
<li>
<p>Unguided(wireless transmission) 无线传输介质：特性、分类、应用</p>
<ul>
<li>Radio 无线电波</li>
<li>Microwave and Satellite</li>
</ul>
</li>
<li>
<p>通信卫星：原理、分类、特性</p>
</li>
<li>
<p>不属于物理层
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2019.12.00.png" alt="传输介质与物理层之间的关系"></p>
</li>
<li>
<p>不同传输介质的特性不同</p>
<ul>
<li>带宽(传输特性)</li>
<li>传播时延(传输特性)(相同数据量下，一般来说传播时延越小，带宽越大)</li>
<li>最大传输距离(信号上了传输介质后，中间不经过任何中间设备的方法，到接收端仍能识别的最大传输距离)</li>
<li>抗干扰能力(传输特性) 有限传输介质比无线传输介质抗干扰能力更强，由结构特性决定</li>
<li>安全性 无线通信的安全性比有线通信要弱，很多情况下要加密</li>
<li>安装与维护的难易程度</li>
<li>成本</li>
</ul>
</li>
<li>
<p>覆盖范围比较广的网络一般在不同区域采用不同的传输介质</p>
</li>
</ul>
<h3 id="twisted-pair双绞线">Twisted Pair(双绞线)</h3>
<ul>
<li>通电的两根铜导线拧合在一起，通电的导体会产生磁场，使得磁场互相抵消，降低了电线的辐射效率，降低了串扰，拧合得越紧，质量越好，抗干扰能力强，带宽会相对宽一点</li>
<li>既可以传数字信号也可以传模拟信号</li>
<li>传统的有线电话线Category 3 UTP双绞线</li>
<li>以太网Category 5 UTP双绞线 传播数字信号</li>
<li>分类
<ul>
<li>UTP无屏蔽双绞线</li>
<li>STP屏蔽的双绞线，UTP不如STP</li>
</ul>
</li>
</ul>
<h3 id="coaxial-cable同轴电缆">Coaxial Cable(同轴电缆)</h3>
<ul>
<li>中间是一根铜芯，由绝缘层，有保护膜，有塑料壳
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2019.35.47.png" alt="同轴电缆示意图"></li>
<li>结构决定了同轴电缆的带宽高于双绞线</li>
<li>抗干扰能力比较强</li>
<li>分类
<ul>
<li>50-ohm cable开始的时候以太网用同轴电缆，后来用双绞线</li>
<li>70-ohm cable模拟信号，有线电视网</li>
</ul>
</li>
</ul>
<h3 id="fiber-cables">Fiber Cables</h3>
<ul>
<li>利用光线的全反射</li>
<li>纤芯，玻璃保护套，塑料外壳</li>
<li>光纤    <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2019.41.57.png" alt="光纤"></li>
<li>光缆       <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2019.42.29.png" alt="光缆"></li>
<li>海底光缆：连接不同的洲之间的传输，带宽非常宽</li>
<li>分类
<ul>
<li>多模光纤Multimode, step-index</li>
<li>单模光纤Single-mode，光芯要求很细，带宽比多模光纤宽一些</li>
</ul>
</li>
<li>Fiber Optic Networks光纤环网
<ul>
<li>光接收器：光敏二极管
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2019.49.26.png" alt="光纤核心结构"></li>
</ul>
</li>
<li>通信特性最好
<ul>
<li>High bandwidth</li>
<li>Lightweight</li>
<li>Security</li>
</ul>
</li>
</ul>
<h2 id="wireless-transmissionself-study">Wireless Transmission(Self-study)</h2>
<ul>
<li>
<p>特点</p>
<ul>
<li>误码率更高</li>
<li>传播时延更高</li>
<li>传输损耗更大</li>
<li>安全性更弱</li>
<li>抗干扰能力更差</li>
<li>带宽不可再生(人类可用的频率范围有限，同一空间内互相干扰，不能用相同频率-&gt;无线信道的频率范围是不可再生的)</li>
<li>误码率高，干扰随时可能变化，随机变化，不稳定</li>
<li>一般需要天线</li>
</ul>
</li>
<li>
<p>无线网路：radio，卫星：microwave
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2019.59.07.png" alt="带宽"></p>
</li>
</ul>
<h3 id="无线传输的分类">无线传输的分类</h3>
<ul>
<li>Radio Propogation
<ul>
<li>In the VLF超低频, LF低频, and MF中频 bands, radio waves follow the curvature of the earth</li>
<li>In the HF band, they bounce off the ionosphere，波长短，绕障碍物困难，架发射塔，沿直线传，利用电离层的全反射来传播</li>
<li>In the VHF band and above, they use line-of-sight(视距) transmission, not affected by ionosphere.</li>
</ul>
</li>
<li>Microwave Transmission
<ul>
<li>100M～10GHz</li>
<li>直线传播，地面微波站建在山上</li>
<li>中继器：80km，进行方法</li>
</ul>
</li>
<li>Politics of Electromagnetic Spectrum
<ul>
<li>National governments allocate spectrum
<ul>
<li>Worldwide:ITU-R; USA:FCC</li>
<li>China: Radio administration of the Ministry of industry and information technology(National Radio Office)管理频率分配</li>
</ul>
</li>
<li>ISM(Industrial, Scientific, Medical) bands
<ul>
<li>不受电磁波管理委员会管控</li>
<li>功率和带外辐射满足一定约束power is under 1 watt限制频率范围，调制技术，信号强度</li>
</ul>
</li>
</ul>
</li>
<li>Infrared Transmission
<ul>
<li>无需liscence</li>
<li>通信距离过短</li>
</ul>
</li>
<li>Lightwave Transmission</li>
</ul>
<h3 id="communication-satellitesself-study-卫星通信">Communication Satellites(Self-study) 卫星通信</h3>
<ul>
<li>也是一种微波通信，卫星起到转发作用 act as a big microwae repeater in the sky</li>
<li>Transponder
<ul>
<li>listen to some portion of the spectrum</li>
<li>amplifies the incoming signals</li>
<li>rebroadcasts it at another frequency(downward beams)</li>
</ul>
</li>
<li>GEO地球同步卫星(越靠近赤道信号越好，便用用来做导航、定位)、高轨道,  MEO, LEO 时延依次减小</li>
<li>特点
<ul>
<li>时延比较长</li>
<li>先天广播介质broadcast media</li>
<li>The cost of transmitting a message is independent of the distance traversed 初装成本很高，初装结束后的成本比较小</li>
<li>需要许可证</li>
<li>不受地面环境影响</li>
</ul>
</li>
</ul>
<h2 id="digital-modulation-and-multiplexing">Digital Modulation and Multiplexing</h2>
<h3 id="signal-encoding-teechniques">Signal Encoding Teechniques</h3>
<ul>
<li>digital data, digital signal</li>
<li>digital data, analog signal 数字数据-&gt;模拟信号，带通传输
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-06%2011.03.25.png" alt="信道编码"></li>
<li>analog data, digital signal: Digitized Analog Signals模拟数据的数字化变化，抽样变化编码</li>
<li>analog data, analog signal 有线电话网路</li>
</ul>
<h3 id="baseband-transmission基带传输-vs-passband-transmission通带传输">Baseband transmission（基带传输） vs Passband transmission（通带传输）</h3>
<ul>
<li>Baseband signal: Signals that run from 0 up to a maximum frequency</li>
<li>Passband signal: Signals that are shifted to occupy a higher range of frequencies.所有无线通信都是带通信号</li>
</ul>
<h3 id="bseband-transmission-信道编码">Bseband transmission 信道编码</h3>
<ul>
<li>bit stream</li>
<li>manchester(曼彻斯特编码)，以太网早期采用
<ul>
<li>Transition in middle of each bit period</li>
<li>Transition serves as clock and data 自带时钟</li>
<li>Low to high represents 1, High to low represents 0, used by IEEE 802.3 LAN(Classic Ethernet)
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-06%2011.14.43.png" alt="manchester"></li>
<li>提升抗干扰能力，不会误判，但无法纠错</li>
<li>信道效率不高，两个信号单元对应一个比特，波特率20M时，比特率才是10M，编码效率为50%</li>
</ul>
</li>
<li>NRZ 非归零码 Non·Return to Zero：接收方容易有误码（数字通信要求双方时钟同步，有判别电压），对信道传输质量要求高</li>
<li>AMI</li>
<li>好的信道编码应该具备的优点
<ul>
<li>Clock Recovery: 信号自带时钟(mix the clock signal with the data signal)或send a separate clock <em>时钟恢复</em></li>
<li>Balanced Signals:不含直流分量，如曼彻斯特编码和NRZ长距离通信，有电容隔直流 <em>平衡信号</em></li>
<li>Bandwidth Efficiency带宽效率要高，节省带宽资源 <em>信道效率</em></li>
</ul>
</li>
</ul>
<h3 id="passband-transmission--modulation-调制">Passband Transmission&ndash;Modulation 调制</h3>
<ul>
<li>无线通信一定要调制</li>
<li>分两类：数字调制、模拟调制（不讲）</li>
<li>Placing a signal in a given frequency band is useful
<ul>
<li>the frequency of transmission media does not start at zero 传输的频率不是从零开始的</li>
<li>for wireless channel: sending very low frequency signals is not practical 对于无线信道，发送过于低频的信号不实用</li>
<li>for wires: different kinds of signals can coexist on one channel 对于有限信道，不同种类的信号可以在一个信道上共存</li>
</ul>
</li>
<li>Digital modulation is accomplished by modulating a carrier signal sits in the passband.  数字信号调制是通过调制通带中的载波信号来实现的</li>
<li>modulate the amplitude（调幅）, frequency（调频）, or phase（调相） of the carrier signal，修改载波信号</li>
<li>device: Modem 调制解调器
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2017.09.04.png" alt="2进制调制">
<ul>
<li>b 数字调制ASK(AM模拟调制)</li>
<li>c 数字调制FSK(FM模拟调制)</li>
</ul>
</li>
<li>Modems use a combination of modulation techniques to transmit multiple bits per baud
<ul>
<li>QPSK: Quadrature Phase Shift Keying-正交相移键控</li>
<li>QAM: Quadrature Amplitude Modulation-正交幅度调制
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2017.13.49.png" alt="4-PSK">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2017.14.49.png" alt="8QAM">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2017.15.37.png" alt="64QAM"></li>
</ul>
</li>
</ul>
<h3 id="补充digitized-analog-signals--source-coding信源编码">(补充)Digitized Analog Signals&ndash;Source Coding信源编码</h3>
<ul>
<li>Procedures
<ul>
<li>Sampling采样 According to <strong>Nyquist theorem</strong>, the sampling rate must be at least 2 times the highest frequency(Low-pass signal). 尽量不失真、减少数据量
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2017.19.58.png" alt="Sampling"></li>
<li>Quantizing(量化) 离散化
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2017.24.36.png" alt="Quantizing"></li>
<li>Encoding(编码)
<ul>
<li>哈夫曼编码（不失真）</li>
<li>音视频采用失真编码
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2017.23.38.png" alt="Encoding"></li>
</ul>
</li>
</ul>
</li>
<li>Device: Code编码解码器</li>
</ul>
<h3 id="from-analog-signal-to--digital-code">From analog signal to  digital code</h3>
<ul>
<li>数字化语音信号PCM：Pulse Code Modulation(脉冲编码调制)
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2017.29.24.png" alt="PCM"></li>
<li>语音信道的带宽为4000Hz</li>
<li>语音信号采集后会压缩，节省带宽</li>
<li>采样频率 8kHz(即每125μs采样一次)，即调制速率是8Kbaud</li>
<li>C=调制速率 * 8=8K * 8=64Kb/s</li>
<li>使用E1标准，每个采样值使用8bit进行编码</li>
<li>使用T1标准，每个采样值使用7bit进行编码</li>
</ul>
<h3 id="multiplexing复用">Multiplexing(复用)</h3>
<ul>
<li>refer to a process where multiple analog message signals or digital data streams are combined into one signal (Wikipedia)</li>
<li>提高传输介质的使用效率</li>
<li>分类
<ul>
<li>TDM(时分复用) Time Division Multiplexing
<ul>
<li>The time domain is divided into several recurrent timeslots时隙 of fixed length, one for each sub-channel.</li>
<li>同步时分复用Synchronous May cause waste of resources. TDM Frames(复用帧) 固定分配给某个用户的时隙如果没有数据要传就只能空闲，适合语音传递，时隙与用户一一绑定</li>
<li>统计时分复用/异步时分复用Statistical TDM 在时隙的开始传递用户的地址</li>
</ul>
</li>
<li>FDM(频分复用) 通过调制速率解调器，使用不同的频段</li>
<li>WDM(波分复用) 波长不同-&gt;频率不同，变相的频分</li>
<li>CDM(码分复用)Code Division Multiplexing
<ul>
<li>相同时刻用相同的频率，但地址码不同</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="the-public-switched-telephone-networkpstn">The Public Switched Telephone Network(PSTN)</h2>
<h3 id="structure-of-the-telephone-system">Structure of the Telephone System</h3>
<ul>
<li>交换</li>
<li>电话线：两两连接-&gt;交换点(所有用户共享、中继节点)、人工-&gt;交换机、交换中心、交换网络
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2017.54.07.png" alt="long distance call"></li>
<li>Local loops 本地环路
<ul>
<li>Analog twisted pairs going to houses and businesses (UTP3)</li>
</ul>
</li>
<li>Trunks 中继（intertoll trunk, toll connecting trunk）
<ul>
<li>Digital fiber optics connecting the switching offices</li>
</ul>
</li>
<li>Switching offices 交换局
<ul>
<li>End office端局、Tandem office汇接局、Toll office长途局</li>
</ul>
</li>
<li>Digital and Analog Transmission in PSTN
<ul>
<li>The use of both analog and digital transmissions for a telephone to telephone call. Conversion is done by the Codecs.
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2017.56.58.png" alt="调制、数字信号与模拟信号的转换"></li>
</ul>
</li>
</ul>
<h3 id="the-local-loop-modems-adsl-and-fiber">The Local Loop: Modems, ADSL and Fiber</h3>
<ul>
<li>
<p>Modems</p>
<ul>
<li>通过调制解调transmit multiple bits per baud</li>
<li>Modems sample 2400 times/sec and focus on getting more bits per sample
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2018.00.52.png" alt=""></li>
<li>提升信噪比
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2018.03.09.png" alt=""></li>
</ul>
</li>
<li>
<p>xDSL: Digital Subscriber Lines数字用户线, UDP3 local loops, not affect telephones, faster than 5kbps</p>
</li>
<li>
<p>ADSL非对称数字用户线，希望下行的带宽大，上行的带宽小，以前用的是ADSL，用户线频分多路复用技术，实现了上网和打电话同时
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2018.08.23.png" alt="ADSL"></p>
<ul>
<li>Divide 1.1 MHz into 256 channels of 4312.5 Hz(频分复用)</li>
<li>Channel 0 for POTS(电话)</li>
<li>1–5 not used, to keep voice signal and data signals from interfering with each other</li>
<li>250 channels
<ul>
<li>Upstream control (1)</li>
<li>Downstream control (1)</li>
<li>User data (248)
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-11%2018.10.39.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>DMT Discrete Multitone Modulation离散多音频调制
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2010.07.51.png" alt="DMT"></p>
</li>
<li>
<p>FTTH 光纤入户
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2010.11.45.png" alt=""></p>
</li>
</ul>
<h3 id="trunks-and-multiplexing">Trunks and Multiplexing</h3>
<ul>
<li>时分复用
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2010.13.31.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2010.14.12.png" alt=""></li>
<li>波分复用
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2010.18.35.png" alt=""></li>
</ul>
<h2 id="switching-circuit-switching-vs-packet-switching">Switching: Circuit Switching vs. Packet Switching</h2>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2010.19.25.png" alt=""></p>
<h3 id="circuit-switching电路交换">Circuit switching电路交换</h3>
<ul>
<li>Example: Telephone network</li>
<li>Dedicated communication path between 2 stations</li>
<li>Resources allocated in advance</li>
<li>3 phases: circuit establishment, data transfer and circuit termination</li>
<li>Strength
<ul>
<li>Small delay, good quality</li>
<li>Simple control in switch</li>
</ul>
</li>
<li>Weakness
<ul>
<li>Time consumed in call set up</li>
<li>Fixed bandwidth, not suitable for various rate services</li>
<li>Channel waste when both parties keep silent</li>
</ul>
</li>
</ul>
<h3 id="message-switching报文交换现在用的很少了">Message Switching报文交换(现在用的很少了)</h3>
<ul>
<li>Example: Post office</li>
<li>Message transmission and switching</li>
<li>At each node the entire message is received, stored, and then forwarded to the next node(Store-and-Forward, 存储-转发) 计算资源、存储资源、带宽资源共享</li>
</ul>
<h3 id="packet-switching分组交换">Packet Switching分组交换</h3>
<ul>
<li>Data sent as formatted bit-sequences (Packets)</li>
<li>At each node the entire packet is received, stored briefly, and then forwarded to the next node (Store- and-Forward，存储-转发)</li>
<li>Dynamic resource allocation</li>
<li>Each packet is independently routed</li>
</ul>
<h4 id="basic-operation-of-packet-switching">Basic Operation of Packet Switching</h4>
<ul>
<li>Data transmitted in small packets
<ul>
<li>Longer messages split into series of packets(reduce delay)</li>
<li>Each packet contains a portion of user data plus some control information</li>
</ul>
</li>
<li>Control information
<ul>
<li>Routing (addressing) information</li>
</ul>
</li>
<li>Packets are received, stored briefly (buffered) and past on to the next node
<ul>
<li>Store and forward</li>
</ul>
</li>
</ul>
<h4 id="packet-switching-good--bad">Packet Switching: Good &amp; Bad</h4>
<ul>
<li>Strength
<ul>
<li>Line efficiency
<ul>
<li>Single node to node link can be shared by many packets over time</li>
<li>Packets queued and transmitted as fast as possible</li>
</ul>
</li>
<li>Data rate conversion(速率适配)
<ul>
<li>Each station connects to the local node at its own speed</li>
<li>Nodes buffer data if required to equalize rates</li>
</ul>
</li>
<li>Packets are accepted even when network is busy(排队制)
<ul>
<li>Delivery may slow down</li>
<li>Priorities can be used</li>
</ul>
</li>
</ul>
</li>
<li>Weakness
<ul>
<li>Complex network</li>
<li>Larger delay</li>
<li>No QoS guarantee-&gt;可以根据对QoS的要求不同决定分配资源的先后</li>
</ul>
</li>
</ul>
<h3 id="timing-of-cs-ms-and-ps">Timing of CS, MS and PS</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2010.41.13.png" alt="timing"></p>
<ul>
<li>分组片越多，分组交换的优势越明显</li>
</ul>
<h3 id="circuit-switched-and-packet-switched-comparison">Circuit switched and Packet-switched Comparison</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2010.52.16.png" alt=""></p>
<h3 id="physical-interface-features">Physical Interface Features</h3>
<ul>
<li>Mechanical features(机械特性) 指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等</li>
<li>Electrical features(电气特性) 指明在接口电缆的各条线上出现的电压的范围</li>
<li>Functional features(功能特性) 指明某条线上出现的某一电平电压表示何种意义</li>
<li>Procedure features(过程特性) 指明对于不同功能的各种可能事件的出现顺序</li>
</ul>
<h2 id="补充protocol-example-rs-232">(补充)Protocol Example: RS-232</h2>
<h1 id="chapter-3-the-data-link-layer">chapter 3 The Data Link Layer</h1>
<ul>
<li>Why do we need Data Link Control?
<ul>
<li>Probable transmission bit errors in physical layer:error control</li>
<li>Receiver may need to prevent too much data coming in: flow control 防止出现丢包和湮没</li>
<li>Broadcast channel: addressing, media access control(mac) 广播式链路的编址问题、干扰问题(谁占用传输介质)</li>
</ul>
</li>
</ul>
<h2 id="position-functions-and-servicesinclude-311">Position, Functions and Services(include 3.1.1)</h2>
<ul>
<li>Position and Functions
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2011.12.54.png" alt=""></li>
<li>Data link layer has responsibility of transferring data (frame帧) from one node to adjacent node in a reliable and efficient way over a link</li>
</ul>
<h3 id="data-link-layer-design-issues">Data Link Layer Design Issues</h3>
<ul>
<li>Packets vs. Frames
<ul>
<li>Encapsulation封装
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2011.14.31.png" alt="封装"></li>
</ul>
</li>
<li>Functions of Data Link Layer: Illustration
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2011.16.24.png" alt=""></li>
<li>Data Link Layer: hop-to-hop communication(逐跳通信)
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2011.18.15.png" alt=""></li>
<li>Data Link Layer: Adapters Communicating
<ul>
<li>Sending side
<ul>
<li>Encapsulates network packet in a frame</li>
<li>Adds error checking bits, reliable transfer, flow control, etc.</li>
</ul>
</li>
<li>Receving side
<ul>
<li>Look for errors, reliable transfer, flow cntrol, etc</li>
<li>Extracts packet, passes to receiving node</li>
</ul>
</li>
<li>Implemented in &ldquo;adapter&rdquo;(NIC)即网卡 -&gt; 不会做的太复杂(还有端到端技术)
<ul>
<li>Ethernet card, 802.11 card
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2011.23.07.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-13%2011.22.38.png" alt="位置"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="311-services-provided-to-network-layer">3.1.1 Services Provided to Network Layer</h3>
<ul>
<li>Unacknowledged connectionless service 以太网 物理层较为可靠，出错率较小</li>
<li>Acknowledged connectionless service Wifi 可靠性比以太网差一点</li>
<li>Acknowledged connection-oriented service 最周到的 用得很少</li>
</ul>
<h3 id="312-framing-成帧">3.1.2 Framing 成帧</h3>
<ul>
<li>Framing: Marking the start and end of each frame查分比特流，识别出帧(帧同步)</li>
<li>requirements
<ul>
<li>simple 容易实现</li>
<li>code independence 与传输的消息内容无关</li>
<li>efficient 使用的信道带宽尽量少</li>
<li>robustness 不易出错，出错后容易重新同步</li>
</ul>
</li>
<li>methods
<ul>
<li>character cout 字符计数法
<ul>
<li>using a field in header to specify number of characters in the frame</li>
<li>the count may be garbled by a transmission error
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-18%2016.53.37.png" alt="字符计数法"></li>
<li>一旦出错后面全错了-&gt;现在很少用</li>
</ul>
</li>
<li>byte(character) stuffing(字节/字符填充)
<ul>
<li>using flag bytes to mark the starting and ending of a frame</li>
<li>closely tied to the use of 8-bit characters
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-18%2016.55.32.png" alt="字节填充法"></li>
</ul>
</li>
</ul>
</li>
<li>transparent transmission(透明传输)
<ul>
<li>字节填充
<ul>
<li>Using special stuffing byte: ESC(eg.0x1B) 转义字符</li>
<li>Inserted before &ldquo;flag&rdquo; in payload</li>
<li>转义字符前也要插入转义字符
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-18%2016.59.40.png" alt="插入转义字符"></li>
</ul>
</li>
<li>比特填充bit suffing
<ul>
<li>Allowing a frame to contain arbitrary number of bits</li>
<li>Starting and ending flag: 0111,1110</li>
<li>Stuffing: a &lsquo;0&rsquo; is stuffed after five consecutive 1s</li>
<li>Used in HDLC
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-18%2017.03.54.png" alt="比特填充"></li>
<li>Possible Errors of Bit Stuffing
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-18%2017.05.54.png" alt="possible errors"></li>
<li>HDLC采用</li>
</ul>
</li>
<li>physical layer coding violations物理层编码违例法
<ul>
<li>Applicabel to encoding schemes with redundancy
<ul>
<li>idea: in physical layer, some signals will not occur in regular data, these reserved signals can be used to indicate the start and the end of frame</li>
<li>For example: Manchester encoding&ndash;each valid bit has a transition in the middle of signal, then code without transition, i.e. high-high and low-low are used for frame delimitation</li>
<li>Application: Ethernet uses a preamble followed by a length field in the header to locate the start and the end of the frame</li>
<li>preamble = 7 octet(10101010)+1 octet(10101011)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="32-error-detection-and-correctioninclude-313">3.2 Error Detection and Correction(include 3.1.3)</h2>
<ul>
<li>Error Control(textbook 3.1.3)
<ul>
<li>Make sure all frames are eventually delivered to the network layer at the destination and in the proper order
<ul>
<li>Provide the sender with some feedback(ACK正确, NAK错误) about what is happening at the other end of the line</li>
<li>Hardware troubles may cause a frame to vanish completely
<ul>
<li>If either the frame or the ACK is lost, the timer will go off, alerting the sender to a potential problem</li>
<li>Managing the timers and sequence numbers so as to ensure that each frame is ultimately passed to the network layer at the destination exactly once, no more and no less</li>
</ul>
</li>
</ul>
</li>
<li>Type of Errors
<ul>
<li>Lost frames: a frame failed to arrive to the other side
<ul>
<li>Owing to noise burst or dropped frome a quene</li>
<li>Damaged frames: some bits are in error
<ul>
<li>Single-bit error, only one bit has changes
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-18%2017.29.17.png" alt=""></li>
<li>A burst error(突发差错), two or more bits have changed
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-18%2017.29.56.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Error detection
<ul>
<li>Parity check: able to detect single bit errors</li>
<li>Cyclic Redundancy Check(CRC): detecting some burst errors</li>
<li>Checksum, to be studied in Network layer</li>
</ul>
</li>
<li>Error correction
<ul>
<li>Forward Error Correction(FFC, 前向纠错)-&gt;一般都是纠单比特错误</li>
<li>Retransmission: Automatic Repeat reQuest(ARQ)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="321-error-correcting-codes纠错码">3.2.1 Error-Correcting Codes(纠错码)</h3>
<ul>
<li>基本思路：将冗余信息加入到待发送的信息中</li>
<li>基本术语
<ul>
<li>Black code(块编码): r check bits are computed solely as a function of the m data bits</li>
<li>Systematic code(系统吗): 先发m位数据，再发r位校验</li>
<li>Line code(线性码): r check bits are computed as a linear function of the m data bits
<ul>
<li>eg.XOR</li>
</ul>
</li>
<li>Codeword(码字): n(n = m+r)</li>
<li>Code rate(码率): m/n(n = m+r)</li>
</ul>
</li>
<li>Error Correcting Code(纠错码)
<ul>
<li>Hamming Distance(汉明/海明距离)
<ul>
<li>Hamming distance:The number of bit positions in which two codewords differ</li>
<li>To detect t-bit errors, need a distance t+1 code</li>
<li>To correct t-bit errors, need a distance 2t+1 code</li>
</ul>
</li>
<li>The Number of Check Bits
<ul>
<li>Find out the number of check bits needed to corret single bit error</li>
<li>Coding
<ul>
<li>m: message bits</li>
<li>r: check bits</li>
<li>n: codedword length(n=m+r)</li>
</ul>
</li>
<li>2<!-- raw HTML omitted -->m<!-- raw HTML omitted --> legal messages</li>
<li>Each legal message has n illegal codewords at a distance 1 from it. Altogether there are (n+1)2<!-- raw HTML omitted -->m<!-- raw HTML omitted --> codewords
<ul>
<li>(n+1)2<!-- raw HTML omitted -->m<!-- raw HTML omitted --> ≤ 2<!-- raw HTML omitted -->n<!-- raw HTML omitted --></li>
<li>m+r+1 ≤ 2<!-- raw HTML omitted -->r<!-- raw HTML omitted --></li>
<li>example: m = 7, r ≥ 4</li>
</ul>
</li>
</ul>
</li>
<li>Hamming Code: correction of single bit error
<ul>
<li>The bits of the codeword are numbered, start with 1 at left end, bit 2 to its immediate right and so on</li>
<li>Check bits:
<ul>
<li>The bits that are powers of 2 (1, 2, 4, 8, 16&hellip;) are check bits</li>
<li>Each check bit forces the parity of some collection of bits, including itself, to be even (or odd).</li>
</ul>
</li>
<li>Data bits
<ul>
<li>The rest (3,5,6,&hellip;) are filled up with the m data bits
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-18%2017.59.55.png" alt="例">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-18%2018.04.33.png" alt="例"></li>
</ul>
</li>
<li>异或运算：可以发现单比特的错误</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="322-error-detecting-codes">3.2.2 Error-Detecting Codes</h3>
<ul>
<li>On channels that are reliable, such as fiber, it is cheaper to use an error detecting code and just retransmit the occasional block found to be faulty</li>
<li>On channels such as wireless links that make many errors, it is better to add enough redundancy to each block for the receiver to be able to figure out what the original block was, i.e. using error correcting code但成本很高-&gt;应用时一般都是混用</li>
<li>example:
<ul>
<li>Bit Error Rate(BER)=10<!-- raw HTML omitted -->-6<!-- raw HTML omitted -->, 1 block=1000bits, Data=1Mbits(有线电话线)</li>
<li>The overhead for 1000 blocks
<ul>
<li>Error detection(parity check) + retransmission: 2001 bits</li>
<li>Hamming code : 10,000 bits, with 10 check bits for each block (m=1000bit, r≥10)</li>
<li>适合用ARQ 重传
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2010.07.26.png" alt="error detecting"></li>
</ul>
</li>
</ul>
</li>
<li>数据链路层的检错码一般放在最后，是数据的某个函数</li>
<li>Even-parity Checking(偶校验)
<ul>
<li>校验位是1bit</li>
<li>偶校验用的多
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2010.11.02.png" alt="偶校验"></li>
<li>校验能力很差</li>
</ul>
</li>
<li>Parity Check for Blocks(Interleaving, 交错检验)
<ul>
<li>Coding (n check bits)
<ul>
<li>Each block is a k×n matrix</li>
<li>The matrix is transmitted one row at a time</li>
<li>A parity bit is computed separately for each column</li>
</ul>
</li>
<li>Performance
<ul>
<li>Can detect a single burst of length n</li>
<li>A burst of length n+1 will pass undetected if the first bit is inverted, the last bit is inverted, and all the other bits are correct</li>
<li>If block is garbled by a long burst，the probability of being accepted is 2<!-- raw HTML omitted -->-n<!-- raw HTML omitted --></li>
</ul>
</li>
</ul>
</li>
<li>Polynomial Code(多项式编码)
<ul>
<li>Also known as CRC(Cyclic Redundancy Check,循环冗余校验), FCS(Frame Check Sequence帧校验序列)</li>
<li>Hardware: shift register circuit(移位寄存器)</li>
<li>约定除数，传送生成多项式的余数作为校验码</li>
<li>M(x): Treating bit strings as representations of polynomials with coeffieients of 0 and 1</li>
<li>Polynomial arithmetic is done modulo 2, addition and subtraction are identical to XOR</li>
<li>G(x): Generator polynomial(生成多项式)</li>
<li>The algorithm for computing the checksum:
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2010.26.57.png" alt="">
<ul>
<li>除数决定了CRC的位数</li>
<li>第一步先补0，G(x)有r位-&gt;CRC有r-1位
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2010.33.23.png" alt="example"></li>
</ul>
</li>
<li>The power of CRC
<ul>
<li>Single bit error: E(x) = x<!-- raw HTML omitted -->i<!-- raw HTML omitted -->(保证单比特错误一定能检验出来，每个G(x)中一定包含+1)</li>
<li>r check bits will detect all burst errors of length ≤ r
<ul>
<li>E(x) = x<!-- raw HTML omitted -->i<!-- raw HTML omitted -->(x<!-- raw HTML omitted -->k-1<!-- raw HTML omitted -->+x<!-- raw HTML omitted -->k-2<!-- raw HTML omitted -->+&hellip;+1), k-1&lt;r &ndash;&gt; E(x)/G(x) 余数≠0</li>
</ul>
</li>
<li>Two isolated single-bit errors are detected
<ul>
<li>E(x) = x<!-- raw HTML omitted -->i<!-- raw HTML omitted --> + x<!-- raw HTML omitted -->j<!-- raw HTML omitted --> = x<!-- raw HTML omitted -->j<!-- raw HTML omitted -->(x<!-- raw HTML omitted -->i-j<!-- raw HTML omitted --> + 1). where i &gt; j</li>
<li>Choose G(x): G(x) does not divide x<!-- raw HTML omitted -->k<!-- raw HTML omitted --> + 1 for any value of k below 32,768 (4096 bytes)</li>
</ul>
</li>
<li>Catch all errors consisting of an odd number of inverted bits: by making x+1 a factor of G(x)
<ul>
<li>No polynomial with an odd number of terms has x+1 as a factor in the modulo 2 system.</li>
</ul>
</li>
<li>Other burst errors (length &gt; r)
<ul>
<li>The probability of a bad frame been accepted is 2<!-- raw HTML omitted -->-r<!-- raw HTML omitted --></li>
</ul>
</li>
</ul>
</li>
<li>Generator Polynomial
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2010.55.31.png" alt="example"></li>
</ul>
</li>
</ul>
<h2 id="flow-controltextbook-314--33--34">Flow control(textbook 3.1.4 &amp; 3.3 &amp; 3.4)</h2>
<ul>
<li>Ensuring the sending entity does not overwhelm the receibing entity, i.e. preventing buffer overflow</li>
<li>Feedback-based flow control:
<ul>
<li>the receiver sends back information to the sender giving it permission to send more data or at least telling the sender how the receiver is doing
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2010.57.53.png" alt=""></li>
</ul>
</li>
<li>Rate-based flow control
<ul>
<li>the protocol has a built-in mechanism that limits the transmitting rate of senders, without using feedback from the receiver, to be studied in network layer</li>
</ul>
</li>
</ul>
<h3 id="33-elementary-data-link-protocols">3.3 Elementary Data Link Protocols</h3>
<h4 id="331-a-utopian-simplex-protocol">3.3.1 A Utopian Simplex Protocol</h4>
<ul>
<li>Assumptions 单工 <strong>Protocol 1</strong>
<ul>
<li>Channel is simplex</li>
<li>Channel is error-free</li>
<li>Receiver has unlimited size of buffers</li>
</ul>
</li>
<li>No need of error control and flow control    <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2011.07.12.png" alt="示意图">         <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2011.07.45.png" alt=""></li>
</ul>
<h4 id="332-a-simplex-stop-and-wait-protocol-for-an-error-free-channel">3.3.2 A Simplex Stop-and-Wait Protocol for an Error-Free Channel</h4>
<ul>
<li>Assumptions  <strong>Protocol 2</strong>
<ul>
<li>Channel is simplex</li>
<li>Channel is error-free</li>
<li>Receiver has limited size of buffers</li>
</ul>
</li>
<li>No need of error control</li>
<li>Flow control is necessary
<ul>
<li>Stop-and-wait(停止等待/停等)
<ul>
<li>Sender sends a frame, and wait</li>
<li>Receive sends a dummy fame(acknowledgement, ACK, 应答)</li>
<li>Receiving the ACK, sender sends next frame
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2011.13.16.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Stop and Wait消息交互图
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2011.13.51.png" alt=""></li>
<li>Problems of protocol 2: If channel is not reliable
<ul>
<li>When a frame is damaged
<ul>
<li>Receiver detects errors with CRC and discard the frame</li>
<li>Sender retransmits the frame when timing out</li>
</ul>
</li>
<li>When a frame is lost
<ul>
<li>Data frame lost:Sender retransmits when timing out</li>
<li>ACK frame lost:Sender retransmits when timing out
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2011.19.35.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>More Problems
<ul>
<li>Case 1: Protocol failed on Receiver(ACK lost)
<ul>
<li>The network layer on sender A gives packet 1 to its data link layer. The packet is correctly received at receiver B and passed to the network layer on B. B sends an ACK frame back to A.(肯定确认ACK，否定确认NAK)</li>
<li>The ACK gets lost completely</li>
<li>The data link layer on A eventually times out. Not having received an acknowledgement, it sends the frame containing packet 1 again</li>
<li>The duplicate frame also arrives B and is passed to the network layer
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2011.22.05.png" alt=""></li>
</ul>
</li>
<li>Solutions: using Sequence Number
<ul>
<li>Distinguish a frame that it is seeing for the first time from a retransmission
<ul>
<li>Put a sequence number(序号) in the header of each frame</li>
</ul>
</li>
<li>What is the minimum number of bits needed for the sequence number?
<ul>
<li>Data Link Layer：1 bit, with 2 sequence numbers (0 and 1) in all</li>
<li>Transport Layer: needing a much larger number space, eg. 16 bits
<ul>
<li>ARQ: Automatic Repeat reQuest(自动请求重传)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Case 2: Delayed ACK
<ul>
<li>Protocol failed on Sender&ndash;A delayed ACK</li>
<li>ACK needs SN, n=1
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2016.07.11.png" alt="delayed ACK"></li>
</ul>
</li>
<li>frame_timer</li>
<li>sender_buffer</li>
</ul>
</li>
</ul>
<h4 id="333-a-simplex-protocol-for-a-noisy-channel">3.3.3 A Simplex Protocol for a Noisy Channel</h4>
<ul>
<li>Assumptions
<ul>
<li>Channel is simplex</li>
<li>Channed is unreliable</li>
<li>Receiver has limited size of buffers</li>
</ul>
</li>
<li>What are enhanced?
<ul>
<li>Sequence number in frame and ACK</li>
<li>Time out and retransmission
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.06.41.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.08.00.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.08.43.png" alt="">
<img src="/images/WechatIMG126.jpg" alt=""></li>
</ul>
</li>
<li>About Timer
<ul>
<li>Timeout
<ul>
<li>If the timeout interval is set too short, the sender will transmit unnecessary frames. While these extra frames will not affext the correctness of the protocol, they will hurt performance</li>
</ul>
</li>
<li>About NAK
<ul>
<li>Is NAK mandatory?</li>
<li>Good things using NAK? NAK可以加快重传</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="34-sliding-window-protocols">3.4 Sliding Window Protocols</h3>
<h4 id="341-a-one-bit-sliding-window-protocol-单比特滑动窗口">3.4.1 A One-Bit Sliding Window Protocol 单比特滑动窗口</h4>
<ul>
<li>Riggybacking(捎带应答/确认)
<ul>
<li>Full-duplex(全双工)data transmission</li>
<li>ACK: separate control frame</li>
<li>Piggybacking(捎带应答/确认)
<ul>
<li>When a data frame arrives, the receiver restrains ACK and waits until the network layer passes it the next packet</li>
<li>ACK is attached to the outgoing data frame(using the ACK field in the frame header)
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.19.15.png" alt="piggybcking"></li>
</ul>
</li>
<li>Advantage of using piggybacking
<ul>
<li>A better use of the available channel bandwidth</li>
<li>A lighter processing load at the receiver</li>
</ul>
</li>
<li>Introduce a complication
<ul>
<li>How long should the data link layer wait for a packet onto which to piggyback the acknowledgement?</li>
<li>Ack Timer
<ul>
<li>ack timer vs. frame timer</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>protocol4: Sliding Window of Size 1
<ul>
<li>A sliding window of size 1, with a 1-bit sequence number
<ul>
<li>Full-duplex(全双工) data transmission: Piggybacking</li>
<li>sequence number: n = 1, [0, 1]</li>
<li>sending window W<!-- raw HTML omitted -->T<!-- raw HTML omitted --> = 1</li>
<li>receiving window W<!-- raw HTML omitted -->R<!-- raw HTML omitted --> = 1
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.30.30.png" alt="单比特滑动窗口">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.32.44.png" alt="单比特滑动窗口">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.34.21.png" alt="单比特滑动窗口"></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.42.19.png" alt="protocol 4"></p>
<ul>
<li>low efficiency
<ul>
<li>Consider a 50-kbps satellite channel with a 500-msec round-trip propagation delay(往返时延), send 1000-bit frames
<ul>
<li>t = 0: sender starts sending, (1000/50k) = 20ms</li>
<li>t = 20 msec: the frame has been completely sent</li>
<li>t = 270 msec: frame fully arrived at the receiver</li>
<li>t = 520 msec: ACK arrived back at the sender, under the best of circumstances(no waiting int the receiver and a short acknowledgement frame)</li>
</ul>
</li>
<li>Conclusion
<ul>
<li>Sender was blocked during 500/520 or 96% of the time, only 4% of the available bandwidth was used</li>
</ul>
</li>
</ul>
</li>
<li>Sliding-Window(滑动窗口) Flow Control: Principles
<ul>
<li>bandwidth-delay product(带宽时延积)</li>
<li>Allow multiple frames to be in transit at a time</li>
<li>frame sequence number bounder by size of field(n)
<ul>
<li>Frames are numbered modulo 2<!-- raw HTML omitted -->n<!-- raw HTML omitted --> (0&hellip;2<!-- raw HTML omitted -->n<!-- raw HTML omitted -->-1)</li>
<li>Window size does not have to be max allowed(1 ≤ W ≤ 2<!-- raw HTML omitted -->n<!-- raw HTML omitted -->)</li>
</ul>
</li>
</ul>
</li>
<li>Sending window and Receiving window
<ul>
<li>Sender can send up to W<!-- raw HTML omitted -->T<!-- raw HTML omitted --> frames without ACK
<ul>
<li>W is the sending window size</li>
</ul>
</li>
<li>Sending window
<ul>
<li>At any instant of time, the sender maintains a set of sequence numbers corresponding to frames it is permitted to send.</li>
<li>These frames are said to fall within the sending window.</li>
</ul>
</li>
<li>Receiver may be able to buffer multiple(W<!-- raw HTML omitted -->R<!-- raw HTML omitted -->) frames</li>
<li>Receiving window
<ul>
<li>Receiver also maintains a receiving window corresponding to the set of frames it is permitted to accept
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.54.38.png" alt="Sending window">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.56.54.png" alt="Receving window"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="342-a-protocol-using-go-back-n">3.4.2 A Protocol Using Go Back N</h4>
<ul>
<li>
<p>传播时延越大，n越大</p>
</li>
<li>
<p>Based on sliding window</p>
<ul>
<li>Sending window: buffers for outstanding frames</li>
<li>Receiving window: buffers to receive frames</li>
</ul>
</li>
<li>
<p>Use window to control number of outstanding frames</p>
<ul>
<li>Sender is allowed to send multiple frames before receiving ACK: pipelining(流水线), (W<!-- raw HTML omitted -->T<!-- raw HTML omitted --> &gt; 1)</li>
<li>Receiving window size is 1 (W<!-- raw HTML omitted -->R<!-- raw HTML omitted -->=1)
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2017.59.35.png" alt="Sending window">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2018.00.14.png" alt="Receiving window"></li>
</ul>
</li>
<li>
<p>Go Back N(回退N步): Principles</p>
<ul>
<li>If Receiver detects error, discard that frame and all future frames until error frame received correctly</li>
<li>Transmitter must go back and retransmit that frame and all subsequent frames(Go Back N)
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2018.02.43.png" alt="Go Back N"></li>
</ul>
</li>
<li>
<p>累积ACK (Cumulative ACK)
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2018.04.16.png" alt="累积ACK"></p>
</li>
<li>
<p>Normal Operation
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2018.05.40.png" alt="Normal Operation"></p>
</li>
<li>
<p>Frame Lost
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2018.06.35.png" alt="Frame Lost"></p>
</li>
<li>
<p>ACK Lost
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-25%2018.08.31.png" alt="ACK Lost"></p>
</li>
<li>
<p>Frame Damaged</p>
<ul>
<li>If Data Frame is Damaged
<ul>
<li>Receiver detects error in frame i</li>
<li>Receiver discard that frame i and all subsequent</li>
<li>When timeout, sender retransmits frame i and all subsequent</li>
</ul>
</li>
<li>If ACK Frame is Damaged
<ul>
<li>Receiver gets frame i and send acknowledgement ACK(i) which is lost</li>
<li>Acknowledgements are cumulative, so next ACK(i+n) may arrive before sender times out on frame i, thus no need for retransmission</li>
<li>If sender times out, retransmits frame i and all subsequent</li>
</ul>
</li>
</ul>
</li>
<li>
<p>传送效率</p>
<ul>
<li>W<!-- raw HTML omitted -->T<!-- raw HTML omitted --> * T<!-- raw HTML omitted -->trans<!-- raw HTML omitted --> / (T<!-- raw HTML omitted -->trans<!-- raw HTML omitted --> + 2T<!-- raw HTML omitted -->prop<!-- raw HTML omitted -->)</li>
</ul>
</li>
<li>
<p>Maximum of Sending Window Size
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2010.11.52.png" alt="Maximum of Sending Window Size"></p>
<ul>
<li>发送窗口数目W<!-- raw HTML omitted -->T<!-- raw HTML omitted -->+接受窗口数目W<!-- raw HTML omitted -->R<!-- raw HTML omitted --> ≤ 2<!-- raw HTML omitted -->n<!-- raw HTML omitted --></li>
<li>在Go Back N中，W<!-- raw HTML omitted -->T<!-- raw HTML omitted --> ≤ 2<!-- raw HTML omitted -->n<!-- raw HTML omitted --> - 1
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2010.19.50.png" alt="example"></li>
</ul>
</li>
<li>
<p>Problems of Go Back N
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2010.35.19.png" alt="problems"></p>
</li>
</ul>
<h4 id="343-a-protocol-using-selective-repeat">3.4.3 A Protocol Using Selective Repeat</h4>
<ul>
<li>Also called Selective Reject ARQ</li>
<li>Only rejected frames are retransmitted</li>
<li>Subsequent frames are accepted by the receiver and buffered</li>
<li>Minimizes retransmission</li>
<li>Receiver must maintain large enough buffer</li>
<li>More complex</li>
<li>Protocol 6: Selective Repeat&ndash;Buffers
<ul>
<li>Selective Repeat&ndash; Maximum Window Size
<ul>
<li>The maximum window size should be at most half the range of the sequence numbers</li>
<li>W<!-- raw HTML omitted -->T<!-- raw HTML omitted -->+W<!-- raw HTML omitted -->R<!-- raw HTML omitted --> ≤ 2<!-- raw HTML omitted -->n<!-- raw HTML omitted --></li>
<li>W<!-- raw HTML omitted -->T<!-- raw HTML omitted -->≥W<!-- raw HTML omitted -->R<!-- raw HTML omitted --></li>
<li>In practice, usually W<!-- raw HTML omitted -->T<!-- raw HTML omitted --> = W<!-- raw HTML omitted -->R<!-- raw HTML omitted --> = 2<!-- raw HTML omitted -->n-1<!-- raw HTML omitted --></li>
</ul>
</li>
<li>Selective Repeat&ndash;Buffers
<ul>
<li>The number of buffers needed is equal to the receiving window size, not to the range of sequence numbers
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2010.48.12.png" alt="selective repeqt"></li>
</ul>
</li>
<li>Timers
<ul>
<li>frame_timer
<ul>
<li>数据重传所用的定时器操作</li>
<li>计时器数量：与sending buffer number相关, one sending buffer required one timer</li>
</ul>
</li>
<li>设置ACK timer
<ul>
<li>在没有数据要发送时，发送ACK帧</li>
<li>用于回送ACK的定时器操作start_ack_timer()和stop_ack_timer()</li>
<li>ACK定时器时限的设计（考虑线路往返时间延迟，接收方物理层发送排队时延等）</li>
<li>ack_timer数量: 只需要一个即可，以第一个为准</li>
</ul>
</li>
<li>NAK
<ul>
<li>Whenever the receiver has reason to suspect that an error has occurred, it sends NAK frame back to the sender
<ul>
<li>NAK frame is a request for retransmission</li>
</ul>
</li>
<li>There are two cases when the receiver should be suspicious
<ul>
<li>A damaged frame has arrived</li>
<li>A frame other than the expected one arrived</li>
</ul>
</li>
<li>Avoid making multiple requests for retransmission of the same frame
<ul>
<li>Receiver keeps track of whether a NAK has already been sent for a given frame</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="performance-of-sliding-window-protocols">Performance of sliding window protocols</h4>
<ul>
<li>Model of Frame Transmission
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2011.06.28.png" alt="Model"></li>
<li>Transfer Time &amp; Round Trip Time
<ul>
<li>Frame transfer time (t<!-- raw HTML omitted -->xfr<!-- raw HTML omitted -->)
<ul>
<li>Time for receiver to receive the entire frame</li>
<li>t<!-- raw HTML omitted -->xfr<!-- raw HTML omitted --> = t<!-- raw HTML omitted -->tran<!-- raw HTML omitted --> + t<!-- raw HTML omitted -->prop<!-- raw HTML omitted --> + t<!-- raw HTML omitted -->quene/switching<!-- raw HTML omitted --></li>
</ul>
</li>
<li>Round Trip Time(RTT)
<ul>
<li>May not be twice the one-way delay if data frame and ACK frame travel over different links</li>
</ul>
</li>
</ul>
</li>
<li>Performace
<ul>
<li>Error-free Stop and Wait
<ul>
<li>The total time to send the data T can be expressed as T = n*T<!-- raw HTML omitted -->F<!-- raw HTML omitted -->
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2019.02.15.png" alt="Error-free Stop and Wait">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2019.03.35.png" alt=""></li>
<li>More: Stop-and-Wait with error
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2019.08.09.png" alt="with error"></li>
</ul>
</li>
<li>Error-Free Sliding-Window Flow Control
<ul>
<li>Normalize the transmission time to 1, and the propagation time is a
<ul>
<li>case 1: W≥2a+1, where W is window size
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2019.24.18.png" alt="case 1"></li>
<li>case 2: W&lt;2a+1
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2019.25.11.png" alt="case 2"></li>
<li>the utilization
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2019.26.40.png" alt="utilization"></li>
</ul>
</li>
</ul>
</li>
<li>Bandwidth-delay product(带宽时延积)
<ul>
<li>Bandwidth: maximum bit rate(bps)</li>
<li>Delay：propogation delay（传播时延）</li>
<li>Bandwidth-delay product：在单程传播时延的时间内，信道可以容纳多少位数据
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2019.28.28.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2019.29.10.png" alt=""></li>
</ul>
</li>
<li>Error-Free Sliding- Window Flow Control: Piggybacking
<ul>
<li>U=W/(2a+2) = W/2(a+1)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="assumptions-and-lib-procedures">Assumptions and lib procedures</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2011.04.42.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-20%2011.05.27.png" alt=""></p>
<h2 id="35-example-protocolsppphdlc">3.5 Example Protocols(PPP、HDLC)</h2>
<h3 id="数据链路层两种连接方式">数据链路层两种连接方式</h3>
<ul>
<li>Point to point links(点到点链路)
<ul>
<li>WAN</li>
<li>One sender, one receiver</li>
<li>Address not be necessary</li>
<li>Reliable communication</li>
<li>Sample protocols: HDLC, PPP</li>
</ul>
</li>
<li>Broadcast links(广播链路)
<ul>
<li>LAN</li>
<li>Accessing a shared medium.</li>
<li>Many senders and potential receivers.</li>
<li>Addressing is necessary</li>
<li>Sample protocols(Chapter 4): ALOHA, CSMA/CD…</li>
</ul>
</li>
</ul>
<h3 id="hdlc高级数据链路控制">HDLC高级数据链路控制</h3>
<ul>
<li>applications: WAN, Multiple configurations</li>
<li>Reliable, connection-oriented transmission
<ul>
<li>流量控制、差错控制</li>
<li>Go Back N ARQ, Selective Repeat ARQ</li>
</ul>
</li>
<li>Synchronous serial transmission同步串行链路传输</li>
<li>error detection：CRC</li>
<li>不支持相关链路和网络参数协商</li>
<li>不支持认证</li>
<li>Frame Structure
<ul>
<li>零比特填充
<img src="/images/%E6%88%AA%E5%B1%8F2024-03-27%2011.22.56.png" alt="零比特填充">
<img src="/images/WechatIMG143.jpg" alt="HDLC"></li>
</ul>
</li>
</ul>
<h3 id="ppp-point-to-point-protocol">PPP (Point-to-Point Protocol)</h3>
<ul>
<li>Point-point link</li>
<li>Byte oriented字节填充，也可采用比特填充
<ul>
<li>Byte stuffing</li>
</ul>
</li>
<li>Connectionless unacknowledged service</li>
<li>PPP compared with HDLC
<ul>
<li>Simpler</li>
<li>What are enhanced
<ul>
<li>Working with numerous network layer protocols</li>
<li>Negotiation of connections(dynamic IP address)</li>
<li>User authentication(身份认证)</li>
<li>Negotiation of data compression</li>
<li>Physical layer can be asychronous(异步) or synchronous(同步)</li>
</ul>
</li>
<li>What are removed
<ul>
<li>Error correction</li>
<li>FLow control</li>
<li>Sequence number
<img src="/images/WechatIMG144.jpg" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Protocol specifications:
<ul>
<li>RFC1661, 1662, 1663</li>
<li>Layer 1
<ul>
<li>Synchronous circuits(bit-oriented encodings, PPP over SONET)</li>
<li>Asynchronous circuits(byte-oriented encodings)</li>
<li>PPPoE(PPP over Ethernet, ADSL)</li>
</ul>
</li>
<li>LCP: Link Control Protocol
<ul>
<li>Error detection(CRC)</li>
<li>Permits authentication</li>
</ul>
</li>
<li>NCP: Network Control Protocol
<ul>
<li>negotiates network-layer options, such as IP address</li>
</ul>
</li>
</ul>
</li>
<li>PPP for PPoE: Frame Format
<img src="/images/WechatIMG145.jpg" alt="">
<img src="/images/WechatIMG146.jpg" alt=""></li>
</ul>
<h1 id="chapter-4-the-medium-access-control-sublayer-媒体访问控制介质访问控制">chapter 4 The Medium Access Control Sublayer 媒体访问控制/介质访问控制</h1>
<ul>
<li>Data Link Types
<ul>
<li>Point to Point(点-点链路)
<ul>
<li>One sender, one receiver</li>
<li>Address may not be necessary</li>
<li>Reliable communication</li>
<li>Sample protocols: HDLC, PPP&hellip;</li>
</ul>
</li>
<li>Broadcast links(广播链路)
<ul>
<li>Many senders and potential receivers</li>
<li>Addressing is necessary(physical address)</li>
<li>Accessing a shared medium
<ul>
<li>Multiple access problem must be solved</li>
</ul>
</li>
</ul>
</li>
<li>Medium Access Control: a means of controlling access to the medium to promote orderly and efficient use.</li>
<li>Sample protocols: ALOHA, CSMA/CD, MACA&hellip;</li>
</ul>
</li>
</ul>
<h3 id="评价介质访问控制的指标">评价介质访问控制的指标</h3>
<ul>
<li>Throughput, Latency, Collision rate, Enery efficiency&hellip;</li>
<li>Fairness, Security, Simplicity, Distributed&hellip;</li>
<li>解决方案：信道分配技术</li>
</ul>
<h2 id="41-multiple-access-schemes">4.1 Multiple Access Schemes</h2>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2017.16.37.png" alt="信道复用技术"></p>
<h3 id="411-static-channel-allocation静态信道">4.1.1 Static Channel Allocation(静态信道)</h3>
<ul>
<li>Channel is divided into N static sub-channels
<ul>
<li>FDM</li>
<li>Telephone networks: user number is small and costant, with heavy load of traffic of each user(simple and efficient)
<ul>
<li>T<!-- raw HTML omitted -->FDM<!-- raw HTML omitted --> = NT</li>
<li>why? use M/M/1 model</li>
</ul>
</li>
<li>Computer networks: the number of senders is large and varying or the traffic is bursty.(inefficient)</li>
<li>None of the static channel allocation methods work well with bursty traffic</li>
<li>Dynamic Channel Allocation are adopted</li>
</ul>
</li>
<li>Classification of Dynamic Channel Allocation
<ul>
<li>Random multiple access
<ul>
<li>ALOHA</li>
<li>CSMA, CSMA/CD, CSMA/CA</li>
</ul>
</li>
<li>Controlled multiple access
<ul>
<li>Centralized: polling</li>
<li>Decentralized: token
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2017.33.17.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="412-assumptions-of-dynamic-allocation动态信道分配">4.1.2 Assumptions of Dynamic Allocation(动态信道分配)</h3>
<ul>
<li>Independent Traffic: independent and single user system</li>
<li>single channel</li>
<li>Ovservable Collisions</li>
<li>Time assumption
<ul>
<li>Continuous time(连续时间)</li>
<li>Slotted time(分时隙)</li>
</ul>
</li>
<li>Carrier sense assumption 载波监听：发送之前 能否知道信道是否空闲
<ul>
<li>Carrier sense</li>
<li>No carrier sense</li>
</ul>
</li>
</ul>
<h2 id="multiple-access-protocols">Multiple Access Protocols</h2>
<h3 id="421-aloha">4.2.1 ALOHA</h3>
<ul>
<li>无连接的，有确认的</li>
</ul>
<h4 id="pure-aloha">Pure ALOHA</h4>
<ul>
<li>First protocol for multiple access channels; first analysis of such protocols
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2017.38.51.png" alt=""></li>
<li>Basic idea
<ul>
<li>without coordination</li>
<li>if the acknowledge not received(maybe collision), then do retransmission
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2017.40.09.png" alt=""></li>
</ul>
</li>
<li>Max utilizations(S): 18.4%</li>
<li>A frame is successful if
<ul>
<li>no packets arrive within t seconds before it starts or while it is being transmitted
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2017.42.07.png" alt=""></li>
</ul>
</li>
<li>Flow of Pure ALOHA
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2017.44.49.png" alt=""></li>
</ul>
<h4 id="slotted-aloha时隙分槽aloha">Slotted ALOHA(时隙/分槽ALOHA)</h4>
<ul>
<li>Time is uniform slots equal T<!-- raw HTML omitted -->0<!-- raw HTML omitted --></li>
<li>Need central clock(or other sync mechanism)</li>
<li>Transmission begins at slot boundary
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2017.48.12.png" alt="">
<ul>
<li>Frames either miss or overlap totally</li>
</ul>
</li>
<li>Vulnerable Period: t-&gt;冲突概率低，重复概率低
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2017.50.07.png" alt=""></li>
<li>Max utilization(S): 36.8%</li>
</ul>
<h3 id="422-carrier-sense-multiple-access-protocols">4.2.2 Carrier Sense Multiple Access Protocols</h3>
<h4 id="csma载波监听多路访问多点接入">CSMA(载波监听多路访问/多点接入)</h4>
<ul>
<li>无连接的，有确认的</li>
<li>Basic idea
<ul>
<li>listening to the channel before sending(Carrier Sense)</li>
<li>stations try to reduce the Vulnerability Period to one propagation dalay</li>
<li>Propagation dalay is much less than transmission delay</li>
<li>脆弱期 τ：端到端的传播时延</li>
<li>当发送时延远远大于传播时延时，高效，适用于近距离的有线或无线网(以太网)</li>
</ul>
</li>
<li>CSMA
<ul>
<li>If channel is idle, transmit with a probability(p).</li>
<li>If the channel is busy, the station waits until it becomes idle</li>
<li>If two stations start at the same instant, collision</li>
<li>Wait reasonable time(round trip plus ACK contention)</li>
<li>No ACK then retransmit</li>
</ul>
</li>
<li>Vulnerable Period of CSMA
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2017.57.34.png" alt=""></li>
<li>Nonpersistant vs. Persistent CSMA
<ul>
<li>Nonpersistent CSMA(非坚持CSMA)
<ul>
<li>If the channel is busy, station waits for a random of time and try to sense again.</li>
</ul>
</li>
<li>Persistent-CSMA(坚持CSMA)
<ul>
<li>If the channel is busy, waits until it becomes idle, then transmits frame immediately
<ul>
<li>1-persistant CSMA: Sending a frame when detection that channel is idle(with probability 1)</li>
<li>p-persistent CSMA: Sending a frame with probability p when detecting idle channel, i.e. delay transmission for a random time with probability 1-p
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2018.05.37.png" alt="channel utilization"></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>CSMA Comparison
<ul>
<li>1-persistent CSMA 以太网使用
<ul>
<li>High throughput and low delay when low load</li>
<li>Low throughput when high load</li>
</ul>
</li>
<li>Nonpersistent CSMA
<ul>
<li>High throughput when high load</li>
</ul>
</li>
<li>评价MAC协议的指标
<ul>
<li>低负载的情况下的时延</li>
<li>高负载情况下的吞吐量(或信道利用率)</li>
<li>低负载适合使用竞争方法</li>
</ul>
</li>
</ul>
</li>
<li>Summary     <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-01%2018.08.21.png" alt="summary"></li>
</ul>
<h4 id="csmacdwith-collision-detection-带冲突检测的载波监听多点接入">CSMA/CD(with Collision Detection) (带冲突检测的载波监听多点接入)</h4>
<ul>
<li>无连接的、无确认的</li>
<li>Basic idea
<ul>
<li>Carrier sensing(载波监听): listen to the channel while a packet is being sent(避免)</li>
<li>Collision detection(冲突检测): when collision is detected, cease transmission and transmit jam signal(强化信号) rather than finish transmitting the whole frame(检测)</li>
<li>backoff(退避): After jam, what random time then start again(恢复)</li>
</ul>
</li>
<li>Half-duplex system 半双工</li>
<li>Saving time and bandwidth</li>
<li>Basis of Ethernet LAN.
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2010.17.58.png" alt="Operations"></li>
<li>States
<ul>
<li>contention</li>
<li>transmission</li>
<li>idle        <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2010.19.02.png" alt="states"></li>
</ul>
</li>
<li>Collision Detection
<ul>
<li>Q1: How to detect the collision?
<ul>
<li>Collision detection is a analog process</li>
<li>Constraint conditions
<ul>
<li>The power of receiving signal CD在Wifi里实现不了，受制于信号强度，需要用CA</li>
<li>The modulation mode of signals</li>
</ul>
</li>
</ul>
</li>
<li>Q2: How long to detect the collision
<ul>
<li>Content period: 2τ 竞争期
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2010.24.32.png" alt="content period"></li>
<li>监测到碰撞-&gt;停止发送-&gt;残桢</li>
</ul>
</li>
<li>Q3: How long to wait for retransmission?
<ul>
<li>Binary Exponential Backoff Algorithm
<ul>
<li>Random pick a number r from{0, 1, 2, &hellip;, 2<!-- raw HTML omitted -->k<!-- raw HTML omitted -->-1}</li>
<li>Backoff time r * basic backoff_time</li>
<li>With k = min[number of atempt, 10]
<ul>
<li>Basic backoff_time: 51.2 μsec</li>
<li>1st collision, random number 0~1</li>
<li>2end collision, random number 1~3</li>
<li>9th collision, random number 0~511</li>
<li>10th/11th/more collision, random number 0~1023</li>
</ul>
</li>
<li>After 16 collisions, reparts failure
<ul>
<li>Further recovery is up to higher layers
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2010.33.26.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>与网络负载大小有关</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="425-wireless-lan-protocols">4.2.5 Wireless LAN Protocols</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2010.45.50.png" alt=""></p>
<ul>
<li>Radio Transmitter &amp; Receiver
<ul>
<li>Radio transmitters have some fixed range
<ul>
<li>In some wirless LANs, not all stations are within range of on another, thus collisionmay not be detected</li>
</ul>
</li>
<li>Interference at the receiver, not at the sender
<ul>
<li>received signals may be 1000000 times weaker than rransmitted signals</li>
</ul>
</li>
<li>Multiple wireless senders and receivers create additional problems
<ul>
<li>Hidden terminal problem
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2010.48.55.png" alt="hidden termianl problem">
<ul>
<li>A和C互为隐藏终端</li>
<li>从接收方判断是否出现冲突</li>
</ul>
</li>
<li>Exposed terminal problem
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2010.50.27.png" alt="exposed terminal problem">
<ul>
<li>B is sending to A</li>
<li>C senses the signal, and falsely concluded that it can not send to D</li>
<li>影响效率</li>
</ul>
</li>
</ul>
</li>
<li>CSMA/CD is not appropriate
<ul>
<li>reduce collision</li>
<li>unacknowledged connectionless: data frame only</li>
</ul>
</li>
</ul>
</li>
<li>WLAN
<ul>
<li>无连接的，有确认的</li>
<li>collision, interference, hidden terminal &amp; Exposed terminal&hellip;</li>
<li>acknowledged connectionless(ACK + retransmission)</li>
<li>collision avoidance 冲突退避</li>
</ul>
</li>
<li>Station use a handshake to determine which one can send
<ul>
<li>MACA: Multiple Acess with Collision Avoidance</li>
<li>CSMA/CA: CSMA with Collision Avoidance(IEEE802.11 Wifi) 有冲突退避的载波监听多路访问</li>
</ul>
</li>
</ul>
<h4 id="maca冲突避免多路访问">MACA(冲突避免多路访问)</h4>
<ul>
<li>Multiple Access Collision Avoidance</li>
<li>To further enhance reliability, four-frame exchange may be used
<ul>
<li>Source issues a Request to Send(RTS) frame to destination</li>
<li>Destination responds with Clear to Send(CTS)</li>
<li>After receiving CTS, source transmits data</li>
<li>Destination responds with ACK</li>
<li>RTS(S to R) -&gt; CTS(R to S) -&gt; Data(S to R) -&gt; ACK(R to S) 不算连接        <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.01.38.png" alt="MACA">
<ul>
<li>C可判断收发双方的位置 -&gt; 解决暴露终端问题</li>
<li>解决隐藏中断问题</li>
</ul>
</li>
</ul>
</li>
<li>Collisions
<ul>
<li>2 stations send RTS fraemes to one station at the same time</li>
<li>Unsuccessful transmitter(does not hear a CTS within expected time interval) waits a random amount of time and tries again</li>
<li>The algorithm used is binary exponential backoff(二进制指数退避)
<ul>
<li>Similar to CSMA/CD       <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.09.11.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="related-researches-for-mac">Related researches for MAC</h4>
<ul>
<li>MAC Protocols for
<ul>
<li>Terrestrial Wireless Sensor Network(TWSNs)</li>
<li>Underwarter Wireless Sensor Networks(UWSNs)
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.10.46.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.11.09.png" alt=""></li>
</ul>
</li>
</ul>
<h2 id="补lan-references-model-ieee-802-rm">(补)LAN References Model: IEEE 802 RM</h2>
<h3 id="introductions-to-lans">Introductions to LANs</h3>
<ul>
<li>Features of LAN
<ul>
<li>Limited number of stations and range</li>
<li>Higher data rate</li>
<li>Lower error rate</li>
<li>Supporting broadcasting and multicasting</li>
<li>Single administration</li>
</ul>
</li>
<li>Taplogies
<ul>
<li>Bus, Star, Ring, Tree, &hellip;</li>
</ul>
</li>
<li>Transimmision Media
<ul>
<li>Twisted pair, Coaxial Cable, Fiber, RF</li>
</ul>
</li>
<li>Media Access Methods
<ul>
<li>Following MAC protocols to share a common channel</li>
</ul>
</li>
<li>Typical topologies       <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.14.32.png" alt=""></li>
</ul>
<h3 id="ieee-802-reference-model">IEEE 802 Reference Model</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.15.30.png" alt=""></p>
<ul>
<li>standards
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.16.06.png" alt=""></li>
<li>Physical Layer</li>
<li>MAC (Media Access Control, 媒体/介质访问控制)子层
<ul>
<li>Framing</li>
<li>Error checking</li>
<li>Physical Addresses: eg. MAC addresses</li>
<li>Sharing of medium: Multiple Access Control</li>
<li>LAN switching, VLAN</li>
</ul>
</li>
<li>LLC(Logic Link Control, 逻辑链路控制)子层
<ul>
<li>Hides difference of MAC layers, providing a uniform interface to network layer</li>
<li>Flow control and error control</li>
<li>Inter-connecting LANs with bridge(网桥)</li>
</ul>
</li>
<li>MAC Overview        <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.19.58.png" alt=""></li>
<li>802.2 LLC     <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.20.26.png" alt=""></li>
<li>Position of LLC         <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.21.58.png" alt=""></li>
<li>LAN Protocols in Context(封装)          <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-03%2011.22.26.png" alt=""></li>
</ul>
<h2 id="43-ethernet">4.3 Ethernet</h2>
<ul>
<li>early history
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2016.48.17.png" alt=""></li>
<li>classification of Ethernet
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2016.48.55.png" alt=""></li>
</ul>
<h3 id="431-classic-ethernet-physical-topology">4.3.1 Classic Ethernet: Physical Topology</h3>
<ul>
<li>Physical Topology
<ul>
<li>Bus: Popolar through mid 90s
<ul>
<li>all nodes are in same collision domain.
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2016.51.58.png" alt=""></li>
</ul>
</li>
<li>Star: Prevails today
<ul>
<li>Hub: physical topology is star and logical tranmission is bus(one collision domain)集线器</li>
<li>switch: active switch in center交换机
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2016.52.34.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Network Interface Cards(网卡)
<ul>
<li>Tasks of NIC</li>
<li>INC provides LLC, MAC and physical layer functions</li>
<li>Each card has a unique MAC address</li>
</ul>
</li>
<li>Hubs(集线器)
<ul>
<li>组星型以太网的组网设备</li>
<li>Providing a star connection physically, implements a bus topology logically</li>
<li>Physical Layer, regeneration signal(digital signal)</li>
<li>Supporting 10Mbps or 100Mbps</li>
<li>Condigurationlimitation
<ul>
<li>up to 3 hubs in a segment</li>
</ul>
</li>
<li>Naming priciples of Efhernet
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2016.56.17.png" alt=""></li>
</ul>
</li>
<li>classic ethernet(传统以太网): 10Mbps         <br>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2016.57.33.png" alt="">
<ul>
<li>10Base5-Thick Ethernet
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.00.27.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.01.18.png" alt=""></li>
<li>10Base2-Thin Ethernet
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.02.34.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.03.07.png" alt="">
<ul>
<li>Bus Topology Evolved to Star Topology
<ul>
<li>Problems with Bus Toplogy
<ul>
<li>Break in Coax cable can server service to multiple nodes</li>
<li>Fault in Coax cable can disrupt service to all nodes disrupts network</li>
</ul>
</li>
<li>Star Toplogy
<ul>
<li>Driven by cabling issues
<ul>
<li>Single cable breaks/faults effect only one node</li>
<li>Emergence of cheap unshielded twisted pair(UTP) cable</li>
</ul>
</li>
<li>Introduces &ldquo;Hub&rdquo; that isolates faulty nodes/cables</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>10BaseT
<ul>
<li>物理上是星型，逻辑上是总线型</li>
<li>No shared cable at all
<ul>
<li>Twisted pair cables</li>
</ul>
</li>
<li>Hub
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.09.23.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.10.10.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Classic Ethernet: Manchester Encoding</li>
<li>Repeater
<ul>
<li>Ethernet has a maxium cable length per segment(unamplified length)</li>
<li>Repeater(Interconnection device)
<ul>
<li>Connecting dissimilar media/PHY types(eg.10base-T and 10base-2)</li>
<li>Physical layer device</li>
<li>Half Duplex ONLY: receivers, amplifies(i.e. regenerates) and retransmits sig nals in both directions</li>
<li>Cable segments connected by repeaters is no different from a single cable(except for a small delay introduced by the repeaters)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="432-classic-ethernet-mac-sublayer-protocol">4.3.2 Classic Ethernet: MAC Sublayer Protocol</h3>
<ul>
<li>Overview of Ethernet / IEEE 802.3
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.16.58.png" alt=""></li>
<li>Operation steps of Ethernet/ IEEE 802.3: Inter Frame Gap(帧间间隔)
<ul>
<li>Also called InterFrame Gap</li>
<li>9.6μs for 10M bps Ethernet
<ul>
<li>More precisely, 96 bit time(96/10M = 9.6μs)</li>
<li>Used for a station to change from transmit mode to receive mode(half-duplex)</li>
<li>In practice, IFG may be much shorter
<ul>
<li>Eg. 4.7μs
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.22.32.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.23.07.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.23.33.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Frame Structure
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.26.44.png" alt="">
<ul>
<li>填充：保证数据最少有46个字节</li>
<li>HDLC的PPP中没有地址/F</li>
</ul>
</li>
<li>MAC Address(Physical Address)
<ul>
<li>Must be unique on every LAN</li>
<li>MAC address: 6bytes(48bits), denoted in hex number
<ul>
<li>eg. 00-60-97-98-IE-6B</li>
</ul>
</li>
<li>First 24-bits identify the vendor(OUI: Organizationally Unique Identifier)</li>
<li>second 24-bits is a serial number assigned by the vendor
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.35.00.png" alt=""></li>
</ul>
</li>
<li>Frame length
<ul>
<li>Maximun frame length当年硬件限制
<ul>
<li>1518 byes(Data length数据长度 1500 bytes)</li>
<li>Based on the fact that a transceiver need enough RAM to hold an entire frame and RAM was expensive in 1978</li>
</ul>
</li>
<li>Minimun frame length(要求会计算) 识别残帧和正常帧
<ul>
<li>Valid frames must be at least 64 bytes long</li>
<li>If data portion is less than 46 bytes, Pad field is used to fill out the frame to the minnmun size
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.39.43.png" alt=""></li>
<li>只对CSMA/CD</li>
</ul>
</li>
</ul>
</li>
<li>Summary
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.44.05.png" alt=""></li>
<li>以太网使用CSMA/CD协议，但使用CSMA/CD的不一定是以太网</li>
</ul>
<h3 id="433-ethernet">4.3.3 Ethernet</h3>
<ul>
<li>Performance
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.51.13.png" alt="">
<ul>
<li>随负载增加，信道效率降低(冲突率提高)</li>
</ul>
</li>
<li>How to increase speed of data transmission in Ethernet
<ul>
<li>Decreasing collision
<ul>
<li>Decreasing number of computers in a LAN
<ul>
<li>Using bridges(网桥工作在链路层) to connect LANs</li>
<li>Using switched Etherent(交换式) instead of shared Ethernet(共享式, classic Ethernet)-&gt;没有冲突，不共享介质，交换机工作在链路层
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.56.04.png" alt=""></li>
</ul>
</li>
<li>Increasing the data rate
<ul>
<li>Fast Ethernet and Gigabit Ethernet</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="434-switched-ethernet">4.3.4 Switched Ethernet</h3>
<ul>
<li>HUB(物理层) vs. Switch(数据链路层)
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.58.11.png" alt=""></li>
<li>Switched Ethernet(交换式以太网)
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2017.59.33.png" alt=""></li>
<li>Switches(交换机)
<ul>
<li>Data Link Layer device
<ul>
<li>Switching frames on destination MAC address</li>
<li>Providing dedicated channels between each of users</li>
</ul>
</li>
<li>Having a high-speed backplane</li>
<li>Collision domain
<ul>
<li>With only one port per collision domain, collicions are impossible and performance is improved 每一个接口都是自己的交换域</li>
</ul>
</li>
<li>全双工通信，不需要CSMA/CD</li>
<li>集线器是半双工通信，需要CSMA/CD
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2018.03.40.png" alt=""></li>
</ul>
</li>
<li>Switches(补)
<ul>
<li>Cut-through
<ul>
<li>内部采用基于硬件的交叉矩阵，便接收数据帧边根据帧头的目的地址直接转发</li>
<li>缺点：无法检查数据帧是否出错，输入/输出需要相同速率</li>
</ul>
</li>
<li>Stored-Forward 不特殊说明都是存储转发
<ul>
<li>缓存整个数据帧，检查数据包是否正确，过滤掉碰撞的残帧和CRC错误帧，再根据目的MAC地址转发</li>
<li>优点：支持差错检测、支持不同输入/输出端口间交换
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2018.06.32.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Overview of fast Ethernet: 100M
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-08%2018.09.01.png" alt="">
<ul>
<li>hub半双工</li>
<li>switch全双工</li>
</ul>
</li>
</ul>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.03.16.png" alt="review"></p>
<h3 id="435-fast-ethernet">4.3.5 Fast Ethernet</h3>
<ul>
<li>100Base-T4
<ul>
<li>Uses a signaling speed of 15MHz</li>
<li>Requires 4 twisted pairs(UTP3)
<ul>
<li>One is always to the Hub</li>
<li>One is always from the Hub</li>
<li>The other two are switchable to the current transmission direction&ndash;Half duplex</li>
</ul>
</li>
<li>Coding
<ul>
<li>Manchester encoding is not used</li>
<li>Ternary signals(三元信号) are sent during a clock period</li>
<li>With 25MHz signaling speed, at least 33.3-Mbps per channel(8B/6T)</li>
</ul>
</li>
</ul>
</li>
<li>Fast Ethernet: 100Base-TX
<ul>
<li>Use a signaling speed of 125MHz</li>
<li>Requires 2 twisted pairs(UTP5)
<ul>
<li>One is to the hub</li>
<li>One is from the hub(Ful duplex)</li>
</ul>
</li>
<li>Coding
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.13.45.png" alt=""></li>
<li>Summary
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.13.45.png" alt=""></li>
</ul>
</li>
<li>例
<ul>
<li>传输介质是双绞线</li>
<li>传输带宽是100Mbps</li>
<li>只有10Mbps的是曼彻斯特编码</li>
<li>介质上传输的是基带信号</li>
</ul>
</li>
<li>Interconnection Devices
<ul>
<li>Hub(Half-duplex communication)
<ul>
<li>Incoming lines are logically connected, forming a single collisiondomain</li>
<li>The system works just the classic Ethernet(CSMA/CD)</li>
<li>Hubs are not permitted with 100Base-FX</li>
</ul>
</li>
<li>Switch(FUll-duplex communication)
<ul>
<li>Incoming frmame is buffered and passed to the destination</li>
<li>100Base-FX cables are too long for collision algorithm, must be connected to switches</li>
</ul>
</li>
<li>Autonegotiation(自动协商机制)
<ul>
<li>10-Mbps &amp; 100Mbps Autoconfiguration</li>
<li>803.3u provides a way for two stations to negotiate
<ul>
<li>the speed(10 or 100Mbps)</li>
<li>the duplexity(half or full)</li>
</ul>
</li>
<li>Most fast Ethernet products use this feature to autoconfigure themselves</li>
<li>Autonegotiation is mandatary for 1000BASE-T and faser
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.14.42.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="436-gigabit-ethernet">4.3.6 Gigabit Ethernet</h3>
<ul>
<li>overview
<ul>
<li>IEEE 802.3z</li>
<li>Goals: Make Ethernet go 10 times faster</li>
<li>Remain backward compatible with all existing Ethernet standards
<ul>
<li>Unacknowledged datogram service with both unicast and multicast</li>
<li>Use 48-bit addressing scheme already in use</li>
<li>Maintain the same frame format, including the minimum and maximum frame sizes</li>
</ul>
</li>
<li>Allows for point-to-point links and shared broadcast channels</li>
</ul>
</li>
<li>Switch
<ul>
<li>full-duplex mode</li>
<li>no contection is possible, CSMA/CD protocol is not used</li>
<li>Maximum length of the cable is determined by signal strength issues(最大长度取决于信号衰减强度)</li>
<li>switches are free to mix and match speeds</li>
<li>Autoconfiguration is supported</li>
</ul>
</li>
<li>Hub
<ul>
<li>Half-duplex Mode</li>
<li>Simulating classic Ethernet
<ul>
<li>Collisions are possible, so CSMA/CD protocol is required</li>
</ul>
</li>
<li>Problem: A radius of 25 meters
<ul>
<li>Without modification to the Ethernet MAC, the allowed diameter at 1Gbps(10x faster Ethernet) would be ~20m(10x smaliar)</li>
<li>To fix this, the minimum transmission size must be increased such that an acceptable distance(~200m) is covered</li>
</ul>
</li>
<li>Carrier extension(载波扩展)
<ul>
<li>Add  padding after the normal frame to extend the frame to 512 bytes(=4096bits) (Content period)</li>
<li>Padding is added by the sending hardware and removed by the sending hardware
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.32.37.png" alt=""></li>
</ul>
</li>
<li>Frame bursting
<ul>
<li>Extension fields create waste in small packets
<ul>
<li>This waste cannot be eliminated but can be reduced by framebursting</li>
</ul>
</li>
<li>Frame bursting(帧突发)
<ul>
<li>Allows a sender to transmit a concatenated seguence of multipleframes in a single transmission</li>
<li>The first frame use carrier extension method, subsequent shortframes need not be extended, and only be sent continuously</li>
<li>Maximum size transmitted burst ~64KBytes(8192bits) //?
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.35.53.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Ethernet JUMBO Frames(补)
<ul>
<li>BAD IDEA</li>
<li>Why didn&rsquo;t Ethernet change the frame size?
<ul>
<li>Half-duplex 1 Gig Ethernet use extension bits to pad aframe out to 512Bytes to enable a larger collisiondomain</li>
<li>change the min to 512Bytes, and max to 4K or 9K?</li>
</ul>
</li>
<li>Because
<ul>
<li>Such equipment would NOT work with any previouslydeployed equipment</li>
<li>NOT a smart move for the WORLDS most popularnetworking technology</li>
<li>IEEE 802.3 will NEVER adopt a larger frame size, asthey are COMMITTED to supporting the installed base.</li>
</ul>
</li>
</ul>
</li>
<li>FLow Control
<ul>
<li>Introduced for Fast and Gigabit Ethernets</li>
<li>Problem: 1 Gbps is quite fast
<ul>
<li>If a receiver is busy with some other task for 1 ms, 1953 framesmay have accumulated, and buffer overruns are very likely</li>
</ul>
</li>
<li>Flow control
<ul>
<li>Supported on <strong>Full-duplex links only</strong></li>
<li>Sends MAC Control Frames called Pause Frames which are usedto enable or disable frame transmission</li>
</ul>
</li>
<li>PAUSE frames
<ul>
<li>One end sending a special control frame to the other end tellingit to pause for some period of time</li>
<li>Normal Ethernet frames, containing a type of 0x8808</li>
<li>Pauses are given in unites of the minimum frame time</li>
<li>For Gigabit Ethernet: 512ns~33.6ms</li>
<li>example
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.44.52.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="437-10g-ethernet">4.3.7 10G Ethernet</h3>
<ul>
<li>
<p>Application scenarios
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.46.55.png" alt=""></p>
</li>
<li>
<p>Design Objectives
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.47.47.png" alt=""></p>
</li>
<li>
<p>10-Gigabit Ethernet cabling
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.48.24.png" alt=""></p>
</li>
<li>
<p>Deployment of 10G Ethernet
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.49.05.png" alt=""></p>
</li>
</ul>
<h3 id="summary-of-ethernet">summary of Ethernet</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.50.42.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.51.13.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.51.48.png" alt=""></p>
<ul>
<li>
<p>the future of Ethernet
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.52.36.png" alt=""></p>
</li>
<li>
<p>以太网的数据链路层协议 IEEE 802.3</p>
</li>
<li>
<p>Reasions for Longevity of Ethernet</p>
<ul>
<li>Reliable: star topology with hub or switch</li>
<li>Cheap</li>
<li>Easy to maintain
<ul>
<li>No software to install</li>
<li>No configuration tables to manage</li>
<li>Adding new hosts is as simple as just plugging themin</li>
</ul>
</li>
<li>Interworking easily with TCP/IP</li>
<li>Having most markets of LAN or MAN</li>
<li>推荐论文(选读)
<ul>
<li>Ethernet-A survey on its fields of application</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="44-wireless-lans">4.4 Wireless LANs</h2>
<h3 id="441-80211-lan-architecture">4.4.1 802.11 LAN architecture</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.57.35.png" alt=""></p>
<ul>
<li>Ad hoc Mode
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.58.12.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.58.51.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2010.59.27.png" alt=""></li>
<li>All use CSMA/CA for multiple access</li>
<li>All have base-station and ad-hoc network versions</li>
<li>Multiple access
<ul>
<li>How to avoid collision?
<ul>
<li>Collision Detection does not work!</li>
</ul>
</li>
<li>Two Modes of operation
<ul>
<li>Point coordination function (PCF,点协调功能)
<ul>
<li>Controlled by base station</li>
<li>Polling-based priority</li>
</ul>
</li>
<li>Distributed coordination function (DCF,分布协调功能)
<ul>
<li>No central control</li>
<li>CSMA/CA</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Model Opreation
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2011.03.13.png" alt=""></li>
<li>A Brief View of CSMA/CA
<ul>
<li>802.11 sender
<ul>
<li>Waitsuntil the channel is idle by sensing and wait D(CF)IFS</li>
<li><strong>Random backoff</strong>(0~15 time slots): counts down idle slots, pausing when frames are sent. Sends its frame when the counter reaches 0</li>
<li>If no ACK(indicate a collision or other error), increase random backoff interval(double), repeat 2</li>
</ul>
</li>
<li>802.11 receiver
<ul>
<li>if frame received OK. return ACK(Explicit ACK) after
<ul>
<li>S(hort)IFS 更短，给ACK更高的优先级</li>
</ul>
</li>
</ul>
</li>
<li>example
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2011.10.41.png" alt=""></li>
</ul>
</li>
<li>Channel sensing
<ul>
<li>Physical sensing
<ul>
<li>Checks the medium to see if there is a valid signal</li>
</ul>
</li>
<li>Virtual sensing
<ul>
<li>Each station keeps a logical record of when the channel is in useby tracking NAV (Network Allocation Vector)</li>
<li>Each frame carries a NAV 虚拟监听
<ul>
<li>Each frame carries a NAVNAV says how long the seguence of which this frame is part will taketo complete</li>
</ul>
</li>
<li>Optional RTS/CTs mechanism
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2011.12.52.png" alt=""></li>
<li>无法解决暴露终端问题，能解决隐藏终端问题</li>
<li>SIFS时间比DIFS短</li>
</ul>
</li>
</ul>
</li>
<li>procedure
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2011.16.47.png" alt=""></li>
<li>reliability-Fragment burst(段突发)
<ul>
<li>Acknowledgement and retransmissions is of little help in channels with high bit error rate</li>
<li>Lower the transmission rate
<ul>
<li>use more robust modulations for a given SNR!</li>
</ul>
</li>
<li>Send shorter frames: fragment burst
<ul>
<li>Frame success probability(s)
<ul>
<li>短帧出错概率低(但信道效率低)</li>
</ul>
</li>
</ul>
</li>
<li>fragment burst(段突发)
<ul>
<li>The solution is to split frame into smaller pieces-fragments</li>
<li>Each fragment is sent with individual seguence numberand checksum by stop-and-wait protocol
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-10%2011.21.48.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Saving power
<ul>
<li>无线通信要考虑能耗</li>
<li>Beacon frames
<ul>
<li>CLients can enter power-save mode(省电模式)</li>
<li>AP will buffer traffic</li>
<li>the client wakes up for every beacon, and check the traddic map that is sent as part of the beacon</li>
<li>the client sends a poll message to the AP</li>
<li>AP sends the buffered traffic</li>
</ul>
</li>
<li>APSD(Automatic Power Save Delivery)
<ul>
<li>Clients can enter power-save mode</li>
<li>AP will buffer traffic;</li>
<li>the client sends frames to the AP</li>
<li>AP sends the buffered traffic</li>
<li>e.g VoIP wireless phone sends and receives frames every20ms</li>
</ul>
</li>
</ul>
</li>
<li>QoS——Interframe Spacing
<ul>
<li>Intervals between frames are defined to provide priorityservices
<ul>
<li><strong>DIFs</strong>: The interval between regular <strong>data frames</strong></li>
<li><strong>SIFS</strong>: The <strong>shortest</strong> interval. It is used to allow the parties in a singledialog the chance to go first(eg. letting the receiver send <strong>ACK</strong>, or theSender transmit a burst of fragments )</li>
<li>AIFS<!-- raw HTML omitted -->1<!-- raw HTML omitted -->, (Arbitration InterFrame Space): The short interval, can beused by the AP to move high-priority traffic</li>
<li>AIFS<!-- raw HTML omitted -->4<!-- raw HTML omitted -->: The long interval, can be used for low-priority traffic</li>
<li>EIFs: is used only by a station that just received a bad or unknownframe, to report the problem
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2016.52.12.png" alt=""></li>
</ul>
</li>
<li>QoS Ectension——TXOP(会计算)
<ul>
<li>Transmission Opportunity(发送机会)</li>
<li>Original problem: Rate anomaly(速率异常)
<ul>
<li>A station sends one frame at a time</li>
<li>If a fast station and a slow station send at sametime, the fast one has to slow down.</li>
<li>Two stations: c1=6Mbps,c2=54Mbps, averagerate=5.4Mbps, c=1/((1/c1)+(1/c2))</li>
</ul>
</li>
<li>With transmission opportunities, each station gets <strong>an equal amount of airtime</strong>, not an equalnumber of frames.
<ul>
<li>C1=6M/2,c2=54M/2,<strong>c=ci/n</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="444-mac-layer-frames">4.4.4 MAC Layer Frames</h3>
<ul>
<li>Data Frames</li>
<li>Control Frames
<ul>
<li>RTS, CTS, ACK</li>
</ul>
</li>
<li>Management Frames
<ul>
<li>Authentication and De-Authentication</li>
<li>Association,Re-Association, and Disassociation</li>
<li>Beacon and Probe frames
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2016.58.30.png" alt="802.11 frame"></li>
</ul>
</li>
<li>Adress
<ul>
<li>Address 1: MAC address of wireless host or AP to receive this frame 目的地址(接收帧的)</li>
<li>Address 2: MAC address of wireless host or AP transmitting this frame 发帧的地址</li>
<li>Address 3: MAC address of router interface to which Ap is attached 路由器接口地址</li>
<li>Address 4: used onlyin ad hoc mode
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.04.43.png" alt=""></li>
</ul>
</li>
<li>The Evolution of WiFi(补充)
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.09.38.png" alt=""></li>
</ul>
<h2 id="48-data-link-lyer-switching">4.8 Data Link Lyer Switching</h2>
<h3 id="481-uses-of-bridges">4.8.1 Uses of Bridges</h3>
<ul>
<li>Why Interconnecting Multiple LANS?
<ul>
<li>The need for interaction</li>
<li>The organization may be geographically spreadover several buildings</li>
<li>Split a LAN into separate LANs to accommodatethe load (multiple collision domains)</li>
<li>Physical distance(2500m)</li>
<li>Reliability(故障隔离)</li>
<li>Security (promiscuous mode,混杂模式)</li>
</ul>
</li>
<li>Why is Bridge(网桥)
<ul>
<li>Bridges are used to interconect LANs at <strong>data link layer</strong>.</li>
<li>Plug and Play 不需要配置，即插即用，自己学习
<ul>
<li>存储转发
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.26.19.png" alt=""></li>
<li>有两个冲突域</li>
</ul>
</li>
<li>Drawback
<ul>
<li>Delay increased(Working in a store-and-forward way)</li>
<li>Broadcast storm can not be avoided
<ul>
<li>网桥连接的属于同一个子网</li>
<li>全1的广播包全部无条件转发</li>
<li>交换机也具有广播风暴</li>
<li>路由器不转发网络包
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.34.14.png" alt="bridge"></li>
</ul>
</li>
</ul>
</li>
<li>Bridges from 802.x to 802.y
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.36.08.png" alt="">
<ul>
<li>Problems
<ul>
<li>Each of the LANs uses a different frame format</li>
<li>LANs do not run at the same data rate</li>
<li>Different LANs have different maximum frame lengths
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.37.50.png" alt=""></li>
<li>Security: Wireless networks support encryption in thedata link layer, Ethernet does not</li>
<li>QoS (Quality of service: 802.11、802.16)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="482-learning-bridges">4.8.2 Learning Bridges</h3>
<ul>
<li>Bridge
<ul>
<li>组网设备：一个接口连多个设备</li>
<li>Related algorithms of Bridges
<ul>
<li><strong>Backward learning(向后学习)</strong>
<ul>
<li>根据源地址更新转发表</li>
</ul>
</li>
<li><strong>Spanning tree(生成树)</strong></li>
</ul>
</li>
<li><strong>Learning Bridges(学习网桥)</strong>
<ul>
<li>Frame routing and forwarding is determined bybridges, which is transparent to hosts, also calledtransparent bridges(透明网桥)</li>
<li>Plug and play</li>
<li>Operates in promiscuous mode(混杂模式):Accepting everyframe transmitted on all the LANs it attached</li>
<li>For an incoming frame from port-x, checking StationTable(Forwarding Table/Hash Table,站表/转发表) <strong>Unicast(单播)</strong>
<ul>
<li>If destination port = port-x, discard the frame. 扔</li>
<li>If destination port ≠ port-x, forward the frame</li>
<li>If destination port is unknown(如果在路由器表中查不到，直接扔) or for broadcastaddress, flooding 向除了入口之外的所有出口无条件转发 泛洪
<ul>
<li>Outputting on all the ports connected except the onelframe arrived on</li>
</ul>
</li>
</ul>
</li>
<li><strong>Broadcast: flooding</strong>
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.42.13.png" alt=""></li>
<li>自学习的例子
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.50.08.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>(补充)Switch: How Switches Learn Host Addresses and Locations
<ul>
<li>一个接口连一个设备
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.53.45.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.54.44.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.54.54.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.55.02.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2017.56.35.png" alt=""></li>
</ul>
</li>
<li>网桥和交换机不能隔离广播域，路由器可以隔离广播域</li>
<li>集线器不能隔离冲突域，交换机可以隔离冲突域</li>
</ul>
<h3 id="483-spanning-tree-bridges">4.8.3 Spanning Tree Bridges</h3>
<ul>
<li>Motivation
<ul>
<li>冗余拓扑(redundant topology)-&gt;环路-&gt;广播风暴
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2018.01.33.png" alt=""></li>
</ul>
</li>
<li>Ideas: loop-free topology
<ul>
<li>Solution(Radia Perlman, 1983)
<ul>
<li>Bridges communicate with each other and overlay the actual toplogy with a spanning tree that reaches every bridges</li>
<li>Some potential connections betweenbridges are ignored in the interest ofconstructing a fictitious loop-freetopology that is a subset of the actualtopology</li>
<li>Using this spanning tree, there is exactly one path from every station to every other station, loops areimpossible</li>
<li>断环，形成树形拓扑
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2018.05.22.png" alt="">
<ul>
<li>electing root</li>
<li>shortest path to the root
<ul>
<li>block ports</li>
<li>detect topology changes and update the tree
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2018.08.35.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="484-summary-of-connection-devices">4.8.4 Summary of connection devices</h3>
<ul>
<li>Repeaters(物理层), Hubs(物理层), Bridges(数据链路层), Swithes(数据链路层), Routers
<ul>
<li>layering</li>
<li>Collision domain</li>
<li>Broadcast domain
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2018.09.15.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2018.09.57.png" alt=""></li>
<li>hub不隔离冲突域、不隔离广播域</li>
<li>bridge和switch隔离冲突域，不隔离广播域</li>
<li>routers隔离广播域、隔离冲突域</li>
</ul>
</li>
<li>Bridge(网桥) vs. Switch(交换机)
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-15%2019.36.09.png" alt=""></li>
</ul>
<h3 id="485-virtual-lans">4.8.5 Virtual LANs</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.16.15.png" alt=""></p>
<ul>
<li>reason for using Virtual LANs
<ul>
<li>Security
<ul>
<li>Many departments have information that do not want passed outside their department</li>
</ul>
</li>
<li>Load
<ul>
<li>Same LANs are more heavily than others and it may be desirable to separate them</li>
</ul>
</li>
<li>Broadcast traffic(Broadcast storm)
<ul>
<li>Bridges broadcast traffic when the location of the destination is unknown or broadcast address</li>
<li>Broadcast consumes more of the LAN capacity than a regular frame</li>
<li>Broadcast storm
<ul>
<li>LAN capacity is occupied by these frames</li>
<li>Machines cripple just processing and discarding all the frames being broadcast
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.20.09.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Possible Solution: Routers
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.20.58.png" alt="">
<ul>
<li>成本高</li>
</ul>
</li>
<li>Possible Solution: Move Cables or Users
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.22.04.png" alt=""></li>
<li>Easier Solution: VLANs
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.23.12.png" alt=""></li>
</ul>
</li>
<li>What are VLANS
<ul>
<li>VLAN: Virtual LAN(虚拟局域网)</li>
<li>Decoupling the logical topology from the physical topology
<ul>
<li>Label each port with a &ldquo;color&rdquo;</li>
<li>A port may be labeledwith multiple VLAN colors</li>
</ul>
</li>
<li>Prohibit
<ul>
<li>packets from traveling to destinations on different VLANS</li>
<li>multicast and broadcast across colors.</li>
</ul>
</li>
<li>In the bridges or switches, configuration tables tell which VLANS are accessible via which ports
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.25.05.png" alt="">
<ul>
<li>交换机和网桥支持即可，主机不需要改动
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.26.13.png" alt="how do VLANs &ldquo;Secure&rdquo;"></li>
</ul>
</li>
</ul>
</li>
<li>VLAN ID
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.28.26.png" alt=""></li>
<li>IEEE 802.1Q Frame Tagging(VLAN 标准)
<ul>
<li>4个字节，只有支持VLAN的交换机才能识别
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.30.23.png" alt=""></li>
</ul>
</li>
<li>The IEEE 802.10 standard
<ul>
<li>The shaded symbols are VLAN aware. The empty ones are not.</li>
<li>The VLAN fields are only actually used by the bridgesand switches and not by the user machines
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-17%2010.32.21.png" alt="">
<ul>
<li>First VLAN-aware bridge(switch) to touch a frame addsVLAN fields and the last one down the road removes them.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="key-points-of-mac-sublayer">Key points of MAC sublayer</h3>
<ul>
<li>Static &amp; DYnamic Channel Allocation</li>
<li>Multiple Access Protocols
<ul>
<li>Carrier Sense Multiple Acess(CSMA/CD)
<ul>
<li>carrier sense, collision detection, jam, binary exponential backoff</li>
</ul>
</li>
<li>Wireless LAN Protocols(MACA)</li>
</ul>
</li>
<li>IEEE 802 Reference Model
<ul>
<li>Functions of LLC, MAC and physical layer</li>
</ul>
</li>
<li>Ethernet
<ul>
<li>Ethernet Cabling</li>
<li>Manchester Encoding</li>
<li>Operations of Ethernet</li>
<li>Fast Ethernet/Gigabit Ethernet</li>
<li>LAN Switch</li>
</ul>
</li>
<li>WLAN
<ul>
<li>IEEE 802.11: Usage, MAC protocols</li>
<li>IEEE 802.16: Usage</li>
<li>IEEE 802.15: Usage</li>
</ul>
</li>
<li>Data Link Layer Switching
<ul>
<li>Learning Bridges</li>
<li>Spanning Tree Bridges</li>
<li>Repeaters, Hubs, Bridges, Switches, Routers, Gateways
<ul>
<li>Layering and collision domain</li>
</ul>
</li>
<li>Virtual LANs</li>
</ul>
</li>
</ul>
<h1 id="chapter-5-network-layer">chapter 5 Network Layer</h1>
<h2 id="51-introduction-to-network-layer">5.1 Introduction to Network Layer</h2>
<h3 id="511-environment-of-network-layer-protocols">5.1.1 Environment of Network Layer Protocols</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2016.46.21.png" alt="environment"></p>
<ul>
<li>Positions and Functions of Network
<ul>
<li>利用数据链路层提供的服务</li>
<li>给传输层提供服务</li>
<li>分组，加网络层的头，编址，路由，分片，异构网络互联</li>
<li>实现了从源到目的
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2016.48.23.png" alt=""></li>
</ul>
</li>
<li>The concept of Hop(跳)
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2016.50.29.png" alt=""></li>
<li>Network Duties
<ul>
<li>编址(逻辑地址/协议地址)Addressing
<ul>
<li>The addresses of a host/router must be uniquely(数值唯一) and universally(格式统一) 协议地址</li>
<li>Two devices on the internet can never have the same address(Address per interface to network)</li>
<li>IP地址全球唯一 global identificatin</li>
<li>MAC地址局部唯一 local identification</li>
</ul>
</li>
<li>组包Packetizing
<ul>
<li>IP包</li>
</ul>
</li>
<li>Fragmenting分组/分片
<ul>
<li>IP地址兼容不同(异构)的链路层协议 any data-link layer technology. All these technologies can handle a different packet length.
<ul>
<li>IEEE802.3(Ethernet) MTU is 1500 bytes</li>
<li>IEEE802.11(WiFi) MTU is 2312 bytes</li>
<li>IEEE802.15.4 MTU is 127 bytes</li>
<li>BLE(blue tooth low energy) MTU ranges from 23 to 251 bytes</li>
</ul>
</li>
<li>The network must be able to fragment transport layer PDUs into smaller units so that they can be transferred over various data-link layer technologies</li>
<li>IPv6 源端分片，提高速度</li>
<li>IPv4 路由器分段</li>
</ul>
</li>
<li>Routing路由选择
<ul>
<li>选择最佳路径
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.02.27.png" alt=""></li>
</ul>
</li>
<li>Internetworking网络互联
<ul>
<li>对高层提供透明传输
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.03.41.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Network layer at the source
<ul>
<li>Responsible for address verification
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.04.43.png" alt="source"></li>
</ul>
</li>
<li>Network layer at the Router
<ul>
<li>Responsible for address verification
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.06.25.png" alt="router"></li>
</ul>
</li>
<li>Network layer at the destination
<ul>
<li>Responsible for address verification
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.07.31.png" alt="destination"></li>
</ul>
</li>
</ul>
<h3 id="512-services-provided-to-transport-layer">5.1.2 Services Provided to Transport Layer</h3>
<ul>
<li>Design Goal
<ul>
<li>be independent of the router technology</li>
<li>be shielded from the number, type, and topology of the routers present</li>
<li>The network addresses made available to the transport layer should use a uniform(统一) numberingplan, even across LANs and WANS</li>
</ul>
</li>
<li>Two classes of service
<ul>
<li>Connectionless Service(数据报——Datagram)</li>
<li>Connection-Oriented Service(虚电路——Virtual Circuit)</li>
</ul>
</li>
<li>Switching
<ul>
<li>Circuit switching</li>
<li>Packet switching
<ul>
<li>Virtual circuit approach虚电路 面向连接的Connection-oriented service</li>
<li>Datagram approach数据报 无连接的Connectionless service</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="513-implementation-of-connectionless-service-datagrams数据报-network">5.1.3 Implementation of Connectionless Service: Datagrams(数据报) Network</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.14.58.png" alt=""></p>
<ul>
<li>Router: where to forward the packet
<ul>
<li>每一个分组走的路径可能不同，独立选路</li>
<li>根据路由表转发分组</li>
<li>The routing tables are dynamic and are updated periodically
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.18.26.png" alt=""></li>
<li>The packets
<ul>
<li>carry the ful address</li>
<li>may arrive out of order</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="514-implementation-of-connection-oriented-service-virtualcircuit虚电路-network">5.1.4 Implementation of Connection-oriented Service: VirtualCircuit(虚电路) Network</h3>
<ul>
<li>Connection-oriented service</li>
<li>Virtual circuit is established and end-to-end path isdecided before data transmission
<ul>
<li>When a connection is established, a route(virtual circuit) from souce to destination is chosen and stored in routers&rsquo; tables</li>
<li>When the connection is released, the virtual circuit is terminated</li>
</ul>
</li>
<li>Virtual Circuit Identifier(VCI): local significant
<ul>
<li>Much shorter than address
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.21.44.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.27.05.png" alt="举例">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.31.21.png" alt=""></li>
</ul>
</li>
<li>The packets
<ul>
<li>carry short and fixed-length vci</li>
<li>arrive in order</li>
</ul>
</li>
<li>当网络中沿途的某点出现故障时，对数据报的影响小于虚电路</li>
</ul>
<h3 id="515-circuit-vs-datagram">5.1.5 Circuit vs. Datagram</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.33.15.png" alt=""></p>
<h3 id="补-end-to-end-argument">补: End-to-end argument</h3>
<ul>
<li>Internet community: routers&rsquo; job is moving packets around and nothing else
<ul>
<li>the network is inherently unreliable</li>
<li>the hosts shoubld do error control, flow control&hellip;</li>
<li>The network service is connectionless(datagram), best effort service(尽力而为的服务)</li>
</ul>
</li>
<li>End-to-end argument: 网络的智能放在端节点</li>
</ul>
<h2 id="52-routing-algorithms">5.2 Routing Algorithms</h2>
<h3 id="补concept-of-routing-and-routing-table">(补)Concept of Routing and Routing Table</h3>
<ul>
<li>Overview
<ul>
<li>An internet(互联网)is a combination of networksconnected by routers.When a packet goes from a sourceto a destination, it may pass through many routers.</li>
<li>A router consults a routing table when a packet is ready to be forwarded. The routing table specifies the optimum path(最佳路径)for the packet.</li>
</ul>
</li>
<li>路由表
<ul>
<li>路由算法 Routing Algorithms
<ul>
<li>construct and update routing tables</li>
</ul>
</li>
<li>路由协议 Routing Protocols
<ul>
<li>a combination of rules/proceduresthat lets routers inform one another when changes occur; mostly based on sharing/combining information between routers at different networks</li>
<li>RIP, OSPF, BGP</li>
</ul>
</li>
</ul>
</li>
<li>Routing Algorithms
<ul>
<li>Responsible for deciding which output line anincoming packet should be transmitted on
<ul>
<li>If the subnet uses datagrams internally, this decision mustbe made for every arriving data packet</li>
<li>If the subnet uses virtual circuits internally, routingdecisions are made only when a new virtual circuit is beingset up.</li>
</ul>
</li>
<li>Routing(选路)&amp; Forwarding(转发)
<ul>
<li>Routing: Generate and update routing tables using routing algorithms and protocols</li>
<li>Forwarding: Research the outbound route of the packet according to the routing table</li>
</ul>
</li>
<li>How to evaluate routing algorithm
<ul>
<li>Goals
<ul>
<li>Correctness</li>
<li>Simplicity</li>
<li>Robustness</li>
<li>Stability 算法可快速达到稳定平衡状态</li>
<li>Fairness</li>
<li>Optimality
<ul>
<li>Minimizing mean packet delay</li>
<li>Maximizing total network throughput</li>
</ul>
</li>
</ul>
</li>
<li>Performace Criteria
<ul>
<li>Least cost, such as minimum hops</li>
</ul>
</li>
</ul>
</li>
<li>Classification
<ul>
<li>Nonadaptive algorithms(Static Routing)
<ul>
<li>The choice of the route to use is computed in advance, off-line, and download to the routers when the network is booted</li>
<li>The routing decisions are not based on measurements or estimates of the current traffic and topology</li>
</ul>
</li>
<li>Adaptive(自适应) algorithms
<ul>
<li>Changing their routing decisions to reflect changes int the topology, and usually the traffic as well 适应网络拓扑和业务量的变化</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="521-optimality-principle">5.2.1 Optimality principle</h3>
<ul>
<li>The Optimality Principle(最优化原则)
<ul>
<li>最优路径上的任意两点间的路径也是最优</li>
</ul>
</li>
<li>Sink Tree汇聚树
<ul>
<li>Optimal routes from all sources to a destination, form a tree rooted at the destination</li>
<li>Sink tree
<ul>
<li>only one root node, the path from the root to other nodes is unique</li>
<li>not contain any loops, so each packet will be delivered within a finite number of hops
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.57.29.png" alt=""></li>
</ul>
</li>
<li>The goal of routing algorithms
<ul>
<li>Discover and use the sink trees for all routers</li>
<li>Forward packets according to the sink trees</li>
</ul>
</li>
<li>Directed Acyclic Graph(有向无环图)
<ul>
<li>A sink tree is not necessarily unique</li>
<li>All of the possible paths to be chosen</li>
<li>DAGs have no loops
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2017.57.59.png" alt="DAG"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="522-dijkstras-shortest-path-algorithm">5.2.2 Dijkstra&rsquo;s &ldquo;Shortest Path&rdquo; Algorithm</h3>
<ul>
<li>Shortest Path Routing(最短路径选路)
<ul>
<li>Build a weighted and directed graph of subnet(有向加权图)
<ul>
<li>Nodes represent routers</li>
<li>Arcs represents communication lines</li>
</ul>
</li>
<li>Weight
<ul>
<li>Hops</li>
<li>Geographic distance in kilometers</li>
<li>Mean queuing and transmission delay</li>
<li>A function of the distance, bandwidth, average traffic.communication cost, mean queue length, measured delay and other factors</li>
</ul>
</li>
</ul>
</li>
<li>Dijkstra
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2018.00.41.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2018.01.04.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2018.03.21.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2018.04.26.png" alt="">
<ul>
<li>只存下一跳即可</li>
</ul>
</li>
<li>思考问题
<ul>
<li>工作条件</li>
<li>不同节点计算的最短路径数一样吗</li>
<li>为什么只保存下一跳</li>
</ul>
</li>
</ul>
<h3 id="523-flooding">5.2.3 Flooding</h3>
<ul>
<li>
<p>Major Routing Strategies</p>
<ul>
<li>Fixed Routing(固定查表选路)
<ul>
<li>Single permanent route for each source to destination pain</li>
</ul>
</li>
<li>Flooding(泛洪)
<ul>
<li>Packet sent to every neighbor.</li>
<li>Incoming packets forwarded to every link except incoming link</li>
</ul>
</li>
<li>Random Routing(随机选路)
<ul>
<li>Selects one outgoing path to forward incoming packet</li>
<li>Selection can be random or round robin</li>
<li>高度拓扑动态变化</li>
</ul>
</li>
<li>Adaptive ROuting(自适应选路)
<ul>
<li>Routing decisions change as conditions on the network change</li>
<li>Requires information about network</li>
<li>Used by almost all packet switching networks</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Flooding(洪泛法)</p>
<ul>
<li>无需路由表</li>
<li>No network information required</li>
<li>Incoming packets retransmitted on every link except incoming link</li>
<li>Eventually a number of copies will arrive at destination</li>
<li>无线通信中很常用
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-22%2018.09.54.png" alt=""></li>
</ul>
</li>
<li>
<p>problems and solutions</p>
<ul>
<li>problems
<ul>
<li>Generates vast numbers of duplicate packets(重复分组)-&gt;网络负载很大</li>
<li>(有可能形成环路)</li>
</ul>
</li>
<li>solutions
<ul>
<li>The header of each packet contains a hop counter(跳计数器)
<ul>
<li>Counter is decremented at each hop</li>
<li>When the counter reaches zero, discard the packet</li>
<li>Sender initializes the hop counter as the length of the path from source to destination, or the subnet diameter 不超过网络直径</li>
<li>IPv6:hop limit IPv4:TTL</li>
</ul>
</li>
<li>Source puts a sequence number in each packet(序列号)
<ul>
<li>Each router records maximal seg per source telling whichseg have already been seen</li>
<li>缺点：占用路由器资源</li>
<li>网络安全：拒绝服务攻击</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Properties of Flooding</p>
<ul>
<li>All possible routes are tried
<ul>
<li>Very robust健壮</li>
</ul>
</li>
<li>At least one packet will have taken minimum hop count route</li>
<li>All nodes are visted
<ul>
<li>Useful to distribute routing information</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="524-distance-vector-routingdvr距离矢量选路">5.2.4 Distance Vector Routing(DVR)距离矢量选路</h3>
<ul>
<li>Based on Bellman-Ford algorithm</li>
<li>Each router maintains a routing table
<ul>
<li>the best known distance to each destination-&gt;The distance might be number of hopstime delay in milliseconds, &hellip;</li>
<li>Which line to use(下一跳/接口)(方向)
<ul>
<li>Vector(distance, direction)
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2010.18.22.png" alt="Node C"></li>
</ul>
</li>
</ul>
</li>
<li>The table is updated by exchanging information with neighbors 定期的广播给邻居(只与邻居交换路由表)
<ul>
<li>Routing information sent:(Destination，Distance)&ndash;矢量
<ul>
<li>Periodically (RIP:30s)</li>
</ul>
</li>
<li>When routing information received
<ul>
<li>Router updates local table if receive a better route</li>
<li>Refreshes existing routes</li>
</ul>
</li>
<li>Delete routing table items if they time out (RIP:180s) 生命周期 软状态：到期不更新即删除</li>
<li>例
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2010.23.32.png" alt="例">
<ul>
<li>到邻居的距离可以自己测</li>
<li>根据到邻居的距离和邻居的路由表更新自己的路由表，找到新的最短路径，覆盖原来的信息
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2010.28.47.png" alt="初始设置"></li>
<li>路由器能看到全网的交换机
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2010.30.25.png" alt="更新">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2010.32.09.png" alt="更新"></li>
</ul>
</li>
</ul>
</li>
<li>Features and Problems of DVR
<ul>
<li>4 key features
<ul>
<li>Sharing knowledge about the entire nework with neighbours</li>
<li>Sharing only with immediate neighbours</li>
<li>Sending knowledge about the entire network through all its interface(Broadcast Updates)</li>
<li>Sharing at regular intervals(Periodic Updates).路由器定向的向所有邻居广播整个路由表</li>
</ul>
</li>
<li>Issues
<ul>
<li>收敛速度可能会比较慢</li>
<li>react rapidly to good news, but leisurely to bad news(好消息反应迅速，坏消息反应慢)</li>
</ul>
</li>
</ul>
</li>
<li>Count-to-Infinity(无穷计数) Problem
<ul>
<li>Problems: Tedious comparing/updating processs low response to infinite loop (count-to-infinity无穷计数) problem, huge list to be maintained!!
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2010.49.47.png" alt="">
<ul>
<li>rumor谣言，消息不真实</li>
<li>只传了距离，不知道路径来源
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2010.52.08.png" alt=""></li>
<li>认为16跳即为无穷大</li>
<li>-&gt;网络规模不能超过16跳</li>
</ul>
</li>
</ul>
</li>
<li>Used in
<ul>
<li>RIP(Routing Information Protocol)
<ul>
<li>已经被淘汰了</li>
</ul>
</li>
<li>Cisco EIGPR</li>
</ul>
</li>
<li>Improvement: Path Vector Routing
<ul>
<li>BGP-4(Border Gateway Protocol)</li>
</ul>
</li>
</ul>
<h3 id="525-link-state-routinglsr">5.2.5 Link State Routing(LSR)</h3>
<ul>
<li>each router shares its knowledge about the its neighbourhood with every other routers in the network</li>
<li>However, in LSR, the link-State Packet(LSP) defines the best known network toplogy is sent to every routers after it is constructed locally(flooding)</li>
<li>3 keys to understand how LSR works:
<ul>
<li>Sharing knowledge about network topology</li>
<li>Sharing with every other routers in the network</li>
<li>Sharing when there is a change</li>
</ul>
</li>
<li>calculate the shortest path(Dijkstraalgorithm)from itself</li>
<li>What routers know
<ul>
<li>知道全网的路径</li>
<li>以自己为根生成路由表</li>
<li>不存在无穷计数问题</li>
</ul>
</li>
<li>Operations
<ul>
<li>Discover its neighbors, learn their network address</li>
<li>Measure the delay or cost to each of its neighbors</li>
<li>Construct a packet(LSP: Link-state Packet, 链路状态包) telling all it has just learned</li>
<li>Send LSP to all other routers(not only neighbors) reliably(flooding)</li>
<li>Compute the shortest path to every other router</li>
</ul>
</li>
<li>Step1: Learning about the Neighbors
<ul>
<li>HELLO packet
<ul>
<li>For a broadcast network, broadcasting a special HELLO packet</li>
<li>For a point-to-point network, unicast HELLO to neighbors</li>
</ul>
</li>
<li>Neighbors send back a reply telling who it is
<ul>
<li>Names (Route IDs) must be globally unique</li>
</ul>
</li>
<li>Simplify the topology
<ul>
<li>When two or more routers are connected by a LANor other multi-access network</li>
</ul>
</li>
<li>虚拟节点，将LAN看作一个点</li>
</ul>
</li>
<li>Step2: Measuring Line Cost
<ul>
<li>The delay to each of its neighbors
<ul>
<li>Measuring the round-trip time (ECHO Packet)</li>
<li>Bandwidth</li>
<li>An issue is whether to take the load into account whenmeasuring the delay? (routing tables may oscillate,leading to erratic routing and many potential problems)
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2011.09.17.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Step3: Building Link State Packets
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2011.09.53.png" alt="">
<ul>
<li>age控制存活时间</li>
<li>seq编号</li>
</ul>
</li>
<li>Step4: Distributing the Link State Packets
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2011.11.39.png" alt="">
<ul>
<li>需要回ACK</li>
</ul>
</li>
<li>Step5: Computing the New Route
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2011.12.27.png" alt=""></li>
<li>例
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2011.13.20.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2011.14.00.png" alt=""></li>
<li>Adoptions of Link State Routing
<ul>
<li>OPSF(Open Shortest Path First)
<ul>
<li>designed several years after Is-IS</li>
<li>Only for Ip</li>
</ul>
</li>
<li>IS-IS(Intermediate system-IntermediateSystem) 运营商用
<ul>
<li>support multiple network layer protocols at the same time.</li>
<li>DECnet, ISO CLNP, IP, AppleTalk, Novell NLSP (IPX)</li>
</ul>
</li>
</ul>
</li>
<li>DVR vs. LSR
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2011.17.14.png" alt=""></li>
</ul>
<h3 id="526-hierarchical-routing层次选路分级选路">5.2.6 Hierarchical Routing(层次选路/分级选路)</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2011.20.20.png" alt=""></p>
<ul>
<li>简化路由表</li>
<li>层次化选路
<ul>
<li>将路由器密集的地方划成一个区域</li>
<li>本region内部能看到细节</li>
<li>对于其他region看不到细节</li>
<li>-&gt;次优选路</li>
</ul>
</li>
<li>Levels
<ul>
<li>regions区域-&gt;clusters-&gt;zones区-&gt;groups群</li>
<li>The router knows the detailed topology within its own region, but has no idea about the internal structure of other regions.</li>
<li>Consider a subnet with 720 routers
<ul>
<li>If there is no hierarchy: 720 routing table entries</li>
<li>If the subnet is partitioned into 24 regions of 30 router seach (Total:53)
<ul>
<li>30 local entries</li>
<li>23 remote entries</li>
</ul>
</li>
<li>If a three-level hierarchy is chosen, with 8 clusters, eachcontaining 9 regions of 10 routers (Total: 25 = 10 + 8 + 7)
<ul>
<li>10 entries for local routers</li>
<li>8 entries for routing to other regions within its own cluster</li>
<li>7 entries for distant clusters</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="review-of-routing-algorithms">Review of Routing Algorithms</h3>
<ul>
<li>Shortest Path Algorithms
<ul>
<li>Dijkstra: 单源，非负权值有向图</li>
<li>Bellman-ford: 允许负权值有向图</li>
</ul>
</li>
<li>Flooding
<ul>
<li>Packets forwarded to every link except incoming link</li>
<li>Problems: generates vast of duplicate packets</li>
<li>Solutions: hop counter, sequence number</li>
<li>Properties
<ul>
<li>packet is delivered to every node: useful to distribute routing information</li>
<li>tremendously robust: all possible routes are tried</li>
<li>at least one packet will have taken minimum hop cout route</li>
</ul>
</li>
</ul>
</li>
<li>Distance Vector Routing vs Link State Routing
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-06%2017.40.11.png" alt=""></li>
<li>Hierarchical routing
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-06%2017.45.31.png" alt=""></li>
</ul>
<h2 id="53-congestion-control">5.3 Congestion Control</h2>
<ul>
<li>What is Congestion(拥塞)
<ul>
<li>Informally, &ldquo;too many soures sending too much data too fast for network to handle&rdquo;(资源不足)</li>
<li>Congestion may occur if the load on the network(the number of packets sent to the network)is greater than the capacity of the network(the number of packets a network can handle)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-06%2017.50.22.png" alt=""></li>
</ul>
</li>
<li>symptoms of Congestion
<ul>
<li>Congestion happens in any system that involves waiting or queuing</li>
<li>导致拥塞的主要原因
<ul>
<li>负载 &gt; 容量</li>
</ul>
</li>
<li>导致拥塞的次要因素:
<ul>
<li>CPU处理速度慢</li>
<li>链路带宽低</li>
<li>缓冲队列短</li>
</ul>
</li>
<li>Symptoms:
<ul>
<li>Long delays (Queuing in router buffers)</li>
<li>Lost packets(Buffer overflow at routers)</li>
</ul>
</li>
</ul>
</li>
<li>Oueues in a Router
<ul>
<li>If the rate of packet arrival is higher than the packet processing rate, the input queues become longer and longer</li>
<li>If the packet departure rate is lesser than the packet processing, the output queues become longer and longer.
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-06%2017.55.04.png" alt=""></li>
</ul>
</li>
<li>Flow control vs. Congestion control
<ul>
<li>Flow Control(流量控制)
<ul>
<li>To avoid overflowing the receiver</li>
<li><strong>Local issue</strong>, involves only 2 endpoints, the sender and the receiver</li>
</ul>
</li>
<li>Congestion Control(拥塞控制)
<ul>
<li>To avoid congestion the network</li>
<li><strong>Global issue</strong>, concerns all nodes/hosts along the path</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="531-approaches-to-congestion-control">5.3.1 Approaches to Congestion Control</h3>
<ul>
<li>Two types of solutions
<ul>
<li>Increasing the resources
<ul>
<li>Network provisioning(网络供给)</li>
<li>Traffic aware-routing(业务量感知路由)</li>
</ul>
</li>
<li>Decreasing the load
<ul>
<li>Admission control(准入控制)</li>
<li>Traffic throttling(流量限制)</li>
<li>Load shedding(负载掉落)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-06%2018.04.31.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2010.05.46.png" alt="review"></p>
<h3 id="534-traffic-throttling业务量减速流量限制">5.3.4 Traffic Throttling(业务量减速/流量限制)</h3>
<ul>
<li>Feedback based solution</li>
<li>基本过程：拥塞检测-&gt;拥塞通知-&gt;业务量限制/调节</li>
<li>Step 1: Router&ndash;detects congestion, by
<ul>
<li>utilization of the output links(输出链路利用率：不够精确)</li>
<li><strong>buffering of queued packets</strong> inside the router(排队分组)</li>
<li>number of packets that are lost due to insufficient buffering(分组丢包数量：太迟)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-06%2018.10.47.png" alt=""></li>
</ul>
</li>
<li>Step 2: Transfer Information about Congestion(通知发送方: 抑制分组、显式explicit/隐式impliit congestion notification拥塞通知)
<ul>
<li>Sending a packet(Choke Packet, 抑制分组) to the source host, giving it the destination found in the packet</li>
<li>The original packet is tagged so that it will not generate any more choke packets</li>
<li>To avoid increasing load on the network, the router may only send choke packets at a low rate</li>
</ul>
</li>
<li>Step 3: Source&ndash;adjust System Operation
<ul>
<li>Receiving choke packet, the source may reduce the traffic sent to the specified destination by x percent(e.g. 50%)</li>
<li>软式状态 临时降速</li>
</ul>
</li>
<li>Other Feedback Mechanisms: Hop-by-Hop Backpressure
<ul>
<li>A choke packet that affects only the source</li>
<li>A choke packet that affects each hop it passes through
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2010.25.37.png" alt=""></li>
</ul>
</li>
<li>Other Feedbak Mechanisms: ECN(Explicit Congestion Notification,显式拥塞通知)
<ul>
<li>Used by IP and TCP</li>
<li>Two bits in the IP packet header are used to recordwhether the packet has experienced congestion.</li>
<li>Router detecting congestion marks the packet as it is forwarded.</li>
<li>The destination will then echo any marks back to thesender as an explicit congestion signal in its next reply packet.
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2010.27.08.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="535-loading-shedding负载掉落">5.3.5 Loading Shedding(负载掉落)</h3>
<ul>
<li>Drop packets
<ul>
<li>When routers are being in undated by packets, just throw them away</li>
<li>随机扔</li>
<li>Policies: depend on the type of applications
<ul>
<li>Pick packets at random to drop</li>
<li>Wine(old is better than new) &amp; Milk(new is better than old)
<ul>
<li>E.g. file transfer, multimedia</li>
</ul>
</li>
<li>智能丢弃: Requires cooperation from the senders</li>
</ul>
</li>
</ul>
</li>
<li>Load shedding in Internet: RED
<ul>
<li>Random Early Detection(随机早期检测)</li>
<li>Drop packets before the situation has become hopeless
<ul>
<li>When the average quene length on some line exceeds a threshold, the line is said to be congested, and a small fraction of the packets are dropped at random(随机丢包)</li>
</ul>
</li>
<li>How should the router tell the source about the problem?
<ul>
<li>Just discard the selected packet</li>
<li>Tne affected sender will notice the loss when there is no acknowledgement, implicit notification(隐式通知)</li>
</ul>
</li>
<li>Sources respond to lost packets by slowing down the intransmission rate
<ul>
<li>In wireless networks, where most losses are due to noiseon the air link, this approach cannot be used.
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2010.35.43.png" alt="review"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="54-quality-of-service">5.4 Quality of Service</h2>
<h3 id="541-primary-qos-parameters服务质量参数">5.4.1 Primary QoS Parameters(服务质量参数)</h3>
<ul>
<li>Reliability
<ul>
<li>Packet error rate</li>
<li>Packet loss rate</li>
<li>Bit error rate(BER)</li>
</ul>
</li>
<li>Delay: the time period fro 1<!-- raw HTML omitted -->st<!-- raw HTML omitted --> bit of packet sent to last bit received</li>
<li>Jitter(抖动): the variation in delay of packets belonging to the same flow</li>
<li>Bandwidth: maximum data rate
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2010.44.02.png" alt=""></li>
<li>ATM Networks: Flow Classification
<ul>
<li>Constant bit rate
<ul>
<li>e.g., telephony</li>
</ul>
</li>
<li>Real-time variable bit rate
<ul>
<li>e.g., compressed videoconferencing</li>
</ul>
</li>
<li>Non-real-time variable bit rate
<ul>
<li>e.g., watching a movie over the Internet</li>
</ul>
</li>
<li>Available bit rate
<ul>
<li>e.g., file transfer</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="542-traffic-shaping业务量流量整形">5.4.2 Traffic shaping(业务量/流量整形)</h3>
<ul>
<li>Problem
<ul>
<li>Traffic burst: Host emits the packets irregularly which may cause congestion to occur in network
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2010.50.49.png" alt=""></li>
</ul>
</li>
<li>Traffic Shaping
<ul>
<li>Service Level Agreement(SLA服务等级合约)
<ul>
<li>Between the user and the carrier(网络-服务质量提供者)</li>
<li>The user: traffic shaping reduces congestion and helps carrier live up to its promise(流量整形)</li>
<li>The carrier: traffic plicing(流量监管)
<ul>
<li>(CAR: Committed Access Rate)承诺的接入速度</li>
</ul>
</li>
<li>Traffic shaping(流量整形&ndash;平滑流量)
<ul>
<li>Regulate the average rate and burstiness of datatransmission, smooth out the traffic</li>
</ul>
</li>
<li>Traffic Policing(流量监管)
<ul>
<li>Monitoring a traffic flow</li>
<li>Packets in excess of the agreed pattern might bedropped or marked as having lower priority</li>
</ul>
</li>
</ul>
</li>
<li>Leaky Buckets and Token Buckets
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2010.54.24.png" alt="">
<ul>
<li>Leaky Buckets
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2010.55.18.png" alt="">
<ul>
<li>Turns an uneven flow of packets into an even flow
<ul>
<li>Smoothing out bursts (平滑突发流量)</li>
<li>Reducing the chances of congestion</li>
</ul>
</li>
<li>The byte-counting leaky bucket (桶满则数据丢失)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2010.57.26.png" alt=""></li>
</ul>
</li>
<li>Token Bucket(令牌桶) Algorithm
<ul>
<li>Token bucket allows idle hosts to accumulate credit for the future in the forms of token.</li>
<li>Token bucket allows bursts, but up to a regulated maximum length.
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2010.59.38.png" alt=""></li>
<li>允许一定的突发</li>
<li>受令牌产生速度的控制</li>
<li>例
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2011.04.49.png" alt=""></li>
<li>The Length of the Maximum Rate Burst
<ul>
<li>经过令牌桶之后的突发数据持续时间
<ul>
<li>burst length s sec</li>
<li>token bucket capacity B bytes</li>
<li>token arrival rate R bytes/sec</li>
<li>maximum output rate M bytes/sec</li>
<li>An output burst contains a maximum of B + Rs bytes</li>
<li>the number of bytes in a maximum-speed burst of lengthS seconds is MS
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2011.14.35.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Leaky Bucket vs. Token Bucket
<ul>
<li>Burstiness
<ul>
<li>Leaky bucket algorithm enforces a rigid outputpattern at the average rate, no matter how burstythe traffic is</li>
<li>Token Bucket allowing some burstiness in the output stream</li>
</ul>
</li>
<li>When the bucket fills up
<ul>
<li>Token bucket algorithm throws away tokens butnever discards packets</li>
<li>Leaky bucket algorithm discards packets</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="543-packet-scheduling">5.4.3 Packet Scheduling</h3>
<ul>
<li>Resources can be reserved(预留) for different flows
<ul>
<li>Bandwidth</li>
<li>Buffer space</li>
<li>CPU cycles</li>
</ul>
</li>
<li>Algorithms
<ul>
<li>FIFO (FCFS), tail drop</li>
<li>RED Algorithm</li>
<li>Fair queueing algorithm</li>
</ul>
</li>
<li>FIFO Queuing(先进先出队列)
<ul>
<li>Packets from different flows arrive at arouter for processing. A good scheduler treats different flows in a fair andappropriate manner to improve the Qos.</li>
<li>Methods
<ul>
<li>FIFO queuing, Priority queuing, Weighted fairqueue
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2011.18.46.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Priority Queuing(优先级队列)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2011.19.29.png" alt="">
<ul>
<li>Packets are first assigned a priority class. Each priorityclass has its own queue.</li>
<li>When a line is idle, packets in the highest priority queueare processed first.高优先级数据先发送</li>
<li>Better QoS because higher priority traffic such asmultimedia can reach the destination with less delay!</li>
<li>Potential drawback: starvation of lower priority traffic, notfair.对低优先级数据不公平</li>
</ul>
</li>
<li>Fair Queue(公平队列)
<ul>
<li>Routers have separate queues for each flow for agiven putput line</li>
<li>Packet are processed in a round robin(循环)way
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2011.21.09.png" alt=""></li>
<li>It gives more bandwidth to hosts that use large packetsthan to hosts that use small packets</li>
</ul>
</li>
<li>Weighted Fair Quening(公平加权队列)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-08%2011.23.07.png" alt="">
<ul>
<li>Example
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.02.12.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="544-admission-control自阅">5.4.4 Admission control(自阅)</h3>
<h3 id="545-integrated-services不讲">5.4.5 Integrated Services(不讲)</h3>
<h3 id="546-differentiated-services不讲">5.4.6 Differentiated Services(不讲)</h3>
<h2 id="55-internetworking">5.5 Internetworking</h2>
<ul>
<li>Connecting Networks
<ul>
<li>Different networks &amp; different protocols
<ul>
<li>Ethernet, Internet over cable, Fixed and mobile telephone networks, 802.11, 802.16, ATM</li>
</ul>
</li>
<li>Purpose of interconnection
<ul>
<li>Allow users on any network to communcate with users on all the other ones</li>
</ul>
</li>
<li>Internetwork(internet, 互联网):  two or more networks are connected</li>
</ul>
</li>
<li>Interconnectin at different layers
<ul>
<li>Layer1: Repeater, HUB</li>
<li>Layer: Bridges, Switches
<ul>
<li>Protocol translation: Ethernets/802.11</li>
</ul>
</li>
<li>Layer 3: Router(Packet translation)</li>
<li>Layer 4: Transport gateway
<ul>
<li>TCP/Wireless TCP</li>
<li>TCP/SNA</li>
</ul>
</li>
<li>Above layer 4: Application gateway</li>
</ul>
</li>
<li>Bridge vs. Router
<ul>
<li>Bridge: the entire frame is transported on the basis of its MAC address</li>
<li>Router: packet is extracted from the frame and the Layer-3 address(eg.IP address) is used for deciding where to send it</li>
</ul>
</li>
</ul>
<h3 id="551-how-networks-differ">5.5.1 How Networks Differ</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.08.40.png" alt=""></p>
<h3 id="552-how-networks-can-be-connected">5.5.2 How Networks Can Be Connected</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.09.34.png" alt=""></p>
<ul>
<li>两点之间协议相同，用IP地址做路由</li>
<li>IP地址是Destination的地址</li>
<li>实现异构的网络之间跨网络传输，在网络层用统一的包格式</li>
</ul>
<h3 id="553-fragmentation分段分片">5.5.3 Fragmentation(分段/分片)</h3>
<ul>
<li>MTU: Maximum Transmission Unit(最大传输单元)</li>
<li>原因：IP协议底层是异构的网络，最大MTU不同-&gt;在路由器可能分片(路由器分片)</li>
<li>MTU is determined by
<ul>
<li>Hardware (e.g., the size of an Ethernet frame)</li>
<li>Operating system (e.g., all buffers are 512 bytes)</li>
<li>Protocols (e.g., the number of bits in the packet length field)</li>
<li>Compliance with some (inter)national standard.</li>
<li>Desire to reduce error-induced retransmissions to some level</li>
<li>Desire to prevent one packet from occupying the channel too long
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.17.17.png" alt=""></li>
</ul>
</li>
<li>接收端重组</li>
</ul>
<h2 id="56-the-network-layer-in-internetip">5.6 The network layer in Internet(IP)</h2>
<h3 id="561-ipv4-packet-format">5.6.1 IPv4 Packet format</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.21.07.png" alt=""></p>
<ul>
<li>
<p>Design principles of IP</p>
<ul>
<li>Make sure it works-保证工作</li>
<li>Keep it simple-保持简单</li>
<li>Make clear choices-明确选择</li>
<li>Exploit modularity-模块开发</li>
<li>Expect heterogeneity-期望异构性</li>
<li>Avoid static options and parameters-避免静态选项与参数</li>
<li>Look for a good design; it need not be perfect-寻找好的而不是完美的设计</li>
<li>Be strict when sending and tolerant when receiving-严格发送，宽容接收</li>
<li>Think about scalability-考虑可扩展性</li>
<li>Consider performance and cost-考虑性能与成本</li>
</ul>
</li>
<li>
<p>Design Issues of IP</p>
<ul>
<li>Design requirements: accommodate differences in constituting network
<ul>
<li>Different addressing schemes:
<ul>
<li>using a global address-IP Address</li>
<li>IP Datagram
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.31.47.png" alt=""></li>
</ul>
</li>
<li>Different maximum packet size</li>
<li>Different network access mechanism</li>
<li>Different timeouts</li>
<li>Different transmission modes (connection-oriented!connectionless)</li>
<li>Error control</li>
<li>Flow control</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Fragmentation and Re-assembly(分段/分片和重装)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.34.50.png" alt=""></p>
</li>
<li>
<p>Quasihierarchical Organization of Internet(准体系结构)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.36.19.png" alt=""></p>
</li>
<li>
<p>Internet Protocol(IP)</p>
<ul>
<li>The most-widely used Internetworking protocol</li>
<li>A connectionless network-layer protocol.</li>
<li>Based on datagram routing</li>
<li>IP provides best-effort service, unreliable !!</li>
<li>Routing in IP is a mixture of hierarchical, distance vector and link state routing algorithms.
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.37.42.png" alt=""></li>
</ul>
</li>
<li>
<p>IP的组件
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.38.37.png" alt=""></p>
</li>
<li>
<p>IPv4 functions</p>
<ul>
<li>Packetizing&ndash; packet length</li>
<li>Routing(datagram)&ndash; source address, destination address, lifetime of packet(防止环路)</li>
<li>Congestion control&ndash; ECN</li>
<li>Qos&ndash; the class of packets(优先级)</li>
<li>Fragment&ndash; 共有几片，本片编号</li>
<li>Multiplexing&ndash; Type of upper protocol</li>
<li>Vest effort&ndash; error detection IPv4检错码，IPv6取消检错码(认为信道质量足够好)</li>
</ul>
</li>
<li>
<p>IP Header
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2017.51.32.png" alt=""></p>
</li>
<li>
<p>The IPv4 Header</p>
<ul>
<li>Version: 协议版本4/6 <strong>4 bits</strong></li>
<li>Type of Service: 2bit ECN, 6bit QoS</li>
<li>IHL: IPv4的头长度-&gt;可变长 How long the header is, in 32-bit words, Val:5<del>15, 20</del>60 bytes <strong>4 bits</strong> 4字节的整数倍</li>
<li>The Differentiated services field
<ul>
<li>the top 6 bits are used to mark the packet with its serviceclass the bottom 2 bits are used to carry explicit congestionnotification (ECN)information</li>
</ul>
</li>
<li>Total Length(16 bits)
<ul>
<li>Includes both header and data, in bytes</li>
<li>The maximum length is 65,535 bytes</li>
<li>45 00 00 30-&gt;0000 0000 0011 0000 -&gt;25+24=48</li>
</ul>
</li>
<li>Identification(16 bits)
<ul>
<li>Allow the destination host to determine which datagram a newlyarrived fragment belongs to</li>
<li>All the fragments of a datagram contain the same Identificationvalue.</li>
</ul>
</li>
<li>DF (1 bit)
<ul>
<li>Don&rsquo;t Fragment. It is an order to the routers not to fragment thedatagram (It is used as part of the process to discover the path MTU)</li>
</ul>
</li>
<li>MF (1 bit)
<ul>
<li>More Fragments</li>
<li>如果不是最后一片，是1</li>
<li>如果是最后一片，是0</li>
</ul>
</li>
<li>NU: 1bit 未定义</li>
<li>Fragment offset (13 bits)
<ul>
<li>Tell where in the current datagram this fragment belongs, in 8bytes (0~8191)</li>
<li>82 fc 40 00</li>
<li>找到最后一片就知道IP包有多长</li>
<li>IP包长度最长为2<!-- raw HTML omitted -->16<!-- raw HTML omitted -->-1</li>
<li>偏移量是8字节的整数倍-&gt;/8成为offset 8字节的整数倍
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-13%2019.07.26.png" alt=""></li>
<li>Fragmentation Example
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2010.12.20.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2010.22.37.png" alt="">
<ul>
<li>以太网MTU最大数据长度为1500(包括IP头)</li>
</ul>
</li>
</ul>
</li>
<li>TTL: Time to live(8 bits)
<ul>
<li>A counter used to limit packet lifetimes. It is supposed to count time in seconds</li>
<li>It must be decremented on each hop</li>
<li>When it hits zero, the packet is discarded and a warning packet is sent back to the souce host</li>
</ul>
</li>
<li>Protocol field(8 bits)
<ul>
<li>Which transport process to give it to (TCP/UDP, &hellip;)1-ICMP,6-TCP,17-UDP,89-OSPF,&hellip;
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2010.32.47.png" alt=""></li>
</ul>
</li>
<li>The Header checksum (16 bits)
<ul>
<li><strong>Verifies the header only</strong></li>
<li>Must ve recomputed at each hop</li>
<li>80 06(TCP数据) f5 a5(checksum)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2010.34.46.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2010.35.33.png" alt=""></li>
<li>distance 2, 能检一位错</li>
</ul>
</li>
<li>Sorce &amp; Destination address(32 + 32 bits)
<ul>
<li>32-bit, Dotted-decimal notation(IPv4: 点分十进制)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2010.44.52.png" alt=""></li>
</ul>
</li>
<li>Some of the IP options
<ul>
<li>Security option 没有意义</li>
<li>Strict source routing option 严格源选路(A-&gt;C-&gt;D-&gt;E-&gt;H<!-- raw HTML omitted -->2<!-- raw HTML omitted -->)
<ul>
<li>Gives the complete path from source to destination as a sequence of IP addresses</li>
</ul>
</li>
<li>Loose source routing option 宽松源选路(E-&gt;H2)
<ul>
<li>Requires the packet to traverse the list of routers specified, and in the order specified, but it is allowed to pass through other routers on the way</li>
</ul>
</li>
<li>Record route option记录路由
<ul>
<li>Tells the routers along the path to append their IP address to the option field</li>
<li>对网络直径有要求</li>
</ul>
</li>
<li>The Timestamp option时间戳
<ul>
<li>Like the Record route option, except that in addition to recording its 32-bit IP address, each router also records a 32-bit timestamp
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2010.52.42.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2010.53.40.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="562-ip-addressing">5.6.2 IP Addressing</h3>
<ul>
<li>
<p>IPv4 Addressing</p>
<ul>
<li>Classful Addressing(分类地址): 1981</li>
<li>Subnetting(子网): 1985</li>
<li>Supernetting(超网): 1993</li>
<li>Classless Addressing(无类别地址): 1995</li>
</ul>
</li>
<li>
<p>格式</p>
<ul>
<li>Internet address/IP address</li>
<li>32bit, Dotted-decimal notation(点分十进制)</li>
<li>Unified addressing统一编址</li>
<li>Unique for each <strong>network interface</strong>,physical address, which universally defines 1 connection to Internet.
<ul>
<li>If a host/router has 2 interfaces connecting to Internet, then it has 2 IP addresses</li>
</ul>
</li>
<li>Two types of IP addressing
<ul>
<li>Classful vs.Classless
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2010.57.45.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Classful IP Addressing(分类地址)</p>
<ul>
<li>IP has a two-level (at least, traditionally) hierarchicaladdressing mechanism in class A, B and C:</li>
<li>Network ID(net-id)+ Host ID (host-id)</li>
<li>找网络-&gt;找主机
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2010.59.02.png" alt=""></li>
</ul>
</li>
<li>
<p>Network address</p>
<ul>
<li>Network address is the first address in the block, is the one that is assigned to the organization.</li>
<li>网络号部分保留，主机号部分为0
<ul>
<li>It can be found by applying the default mask(默认/缺省掩码) to any of the IP addresses in the network</li>
<li>IP address bit AND with default mask
<ul>
<li>eg. 123.50.16.90 AND 255.0.0.0 -&gt;123.0.0.0</li>
</ul>
</li>
</ul>
</li>
<li>Default masks
<ul>
<li>Class A: 255.0.0.0</li>
<li>Class B: 255.255.0.0</li>
<li>Class C: 255.255.255.0</li>
</ul>
</li>
<li>example
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2011.11.08.png" alt=""></li>
<li>Usage
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2011.15.55.png" alt=""></li>
</ul>
</li>
<li>
<p>Special IP address
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-15%2011.19.58.png" alt=""></p>
<ul>
<li>路由器隔绝广播域</li>
</ul>
</li>
<li>
<p>网内的地址数与可分配(可用)地址</p>
<ul>
<li>网络地址: x.x.x.x/m</li>
<li>网络号m位，主机号=32-m=n位</li>
<li>该网络内共有2<!-- raw HTML omitted -->n<!-- raw HTML omitted -->个地址</li>
<li>其中第一个地址(主机号全0)为网路地址，最后一个地址(主机号为全1)为广播地址</li>
<li>可分配(可用)地址数: 2<!-- raw HTML omitted -->n<!-- raw HTML omitted -->-2</li>
</ul>
</li>
<li>
<p>review
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2016.41.11.png" alt=""></p>
<ul>
<li>一个IP地址对应一个网络接口</li>
<li>可由IP地址和默认掩码计算网络号</li>
</ul>
</li>
<li>
<p>Subnetting(子网划分)</p>
<ul>
<li>To manage IP addresses and routing packets more efficiently</li>
<li>A network is split into several parts for internal use, but still actlike a single network to outside world identified by networkaddress
<ul>
<li>Subnetting is invisible to outside world 子网划分对于外部不可见</li>
</ul>
</li>
<li>Subnet is identified by using part of host portion to identifyphysical network
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2016.52.17.png" alt=""></li>
</ul>
</li>
<li>
<p>Subnet Mask(子网掩码)</p>
<ul>
<li>How a router knows the network address?
<ul>
<li>Using the subnet mask.</li>
</ul>
</li>
<li>Boolean ANDed (按位&quot;与&quot;) with destination address whenrouting</li>
<li>If IP addresses of source and destination, and subnetmask are known, then we can find the network address
<ul>
<li>IP packet is sent to a host in same subnet, or</li>
<li>A host in another network
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2016.55.32.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2016.55.24.png" alt=""></li>
</ul>
</li>
<li>Example of Subnetting
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2016.58.10.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2017.04.51.png" alt="">
<ul>
<li>均匀划分</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Supernetting(超网划分)</p>
<ul>
<li>Problem of Class C addresses: the size of a block is too small to satisfy the needs of an organisation</li>
<li>Solution: supernetting
<ul>
<li>To combine several continuous class C blocks to create alarge range of addresses(aggregation)</li>
<li>i.e. several networks are combined to create asupernetwork(超网)</li>
</ul>
</li>
<li>The number of class C blocks must be a power of 2</li>
<li>The blocks must be contiguous in the address space(no gaps between the blocks).</li>
<li>example
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2017.11.09.png" alt="">
<ul>
<li>标准C类网 X.Y.32.0/24</li>
<li>子网掩码越小网越大
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2017.16.18.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Classless Addressing(无类别地址)</p>
<ul>
<li>Until mid-1990s, a range of addresses meant a block of addresses in class A, B or C</li>
<li>Problems of Classful addressing
<ul>
<li>Problems of Classful addressing Continued exponential Internet growth causes address spaceexhaustion</li>
<li>Inefficient use of address space
<ul>
<li>an organization needs 1000 addresses
<ul>
<li>a single class C address not enough /24</li>
<li>a class B address is allocated /16 (a huge waste)</li>
<li>CIDR permits an arbitrarysize: /22</li>
</ul>
</li>
</ul>
</li>
<li>Explosion in the size of the Internet routing tables</li>
</ul>
</li>
<li>Solution: Classless addressing (from 1996)
<ul>
<li>The idea is to have variable-length blocks that belongs to noclass
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2017.20.38.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Classless InterDomain Routing(CIDR，无类别域间选路)</p>
<ul>
<li>CIDR Address Format: slash notation
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2017.31.58.png" alt=""></li>
<li>CIDR编址中，前缀指明了网络，长度1-32之间</li>
<li>Rules of addressing
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2017.32.41.png" alt=""></li>
<li>例
<ul>
<li>某公司(网络地址为114.23.5.0/24)有A、B和C三个部门，其主机(及路由器)的总数分别为64、30和50台，请给这三个部门根据最小够用原则 顺序划分网络地址，写出每个部门的网络地址。</li>
<li>步骤1: 确定各地址块大小66(64+2); 32(30+2); 52(50+2)</li>
<li>步骤2:从主机地址最高位开始 114.23.5.XXXXXXXX</li>
<li>66: 114.23.5.NXXXXXXX</li>
<li>66: 114.23.5.0XXXXXXX/25 114.23.5.0/25</li>
<li>32: 114.23.5.NNNXXXXX/27</li>
<li>32: 114.23.5.100XXXXX/27 114.23.5.128/27</li>
<li>52: 114.23.5.11XXXXXX/26 114.23.5.192/26</li>
</ul>
</li>
<li>如果没有规定顺序，就按从大到小的顺序来划分</li>
</ul>
</li>
<li>
<p>路由聚合/汇聚</p>
<ul>
<li>CIDR permits route aggregation
<ul>
<li>reduce the Internet routing table
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2017.43.56.png" alt=""></li>
</ul>
</li>
<li>Example
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2017.49.27.png" alt="">
<ul>
<li>最长匹配原则</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Routing Table</p>
<ul>
<li>Routing table
<ul>
<li>An array of (IP address, netmask, outgoing line, Next hop)</li>
</ul>
</li>
<li>Scan the routing table
<ul>
<li>Mask the destination address and comparing it to the table entrylooking for a match</li>
<li>It is possible that multiple entries (with different netmask lengths) match, in which case the longest mask is used
<ul>
<li>If there is a match for a /20 mask and a /24 mask, the /24 entry is used.</li>
</ul>
</li>
</ul>
</li>
<li>Implementation
<ul>
<li>Complex algorithms have been devised to speed up the address matching process</li>
<li>commercial routers use custom VLSI (Very Large ScaleIntegration超大规模集成电路)chips with these algorithms embedded in hardware</li>
</ul>
</li>
<li>Default routing(默认/缺省路由)、direct/indirect delivery(直接/间接交付)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2017.57.15.png" alt="">
<ul>
<li>默认网关(0.0.0.0/0)可与任何IP地址匹配，但优先级最低</li>
</ul>
</li>
<li>Configuration for routing example
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2018.02.57.png" alt="">
<ul>
<li>Network-speific &amp; host-specific routing
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-20%2021.02.36.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>review
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2009.53.45.png" alt=""></p>
</li>
<li>
<p>How does Source make routing</p>
<ul>
<li>Source host applies the mask to the destination address of the packet in order to find the corresponding destination network address.
<ul>
<li>If it is local network, send directly to destination;</li>
<li>Otherwise, send to the local router
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.06.03.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.12.33.png" alt=""></li>
<li>主机不参与路由协议</li>
</ul>
</li>
</ul>
</li>
<li>
<p>How do routers make routing?</p>
<ul>
<li>Generally, a routing table needs a minimum of 4 columns:mask, destination network address, next hop addressand outgoing interface.</li>
<li>When a packet arrives, the router applies the mask tothe destination address of the packet in order to find the corresponding destination network address.</li>
<li>If found matching entry(include default routing) in routing table, the packet is sent out from the corresponding interface in the table.</li>
<li>If not found, the packet is discard and the routershould send a ICMP error(控制消息协议) report message to the sourcehost.</li>
</ul>
</li>
<li>
<p>Example
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.16.52.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.17.51.png" alt=""></p>
</li>
<li>
<p>Routing Tables in Ip with CIDR
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.19.15.png" alt=""></p>
</li>
<li>
<p>总结：路由表查找转发过程
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.19.56.png" alt=""></p>
</li>
<li>
<p>NAT: Network Address Translation</p>
<ul>
<li>Problem: IP addresses are scare</li>
<li>Solution: using reserved Private IP addresses(私有/专用地址)
<ul>
<li>10.0.0.0-10.255.255.255/8</li>
<li>172.16.00-172.31.255.255/12 (16: 0001 0000)</li>
<li>192.168.00-192.168.255.255/16</li>
</ul>
</li>
<li>NAT router converts internal IP source address to another global IP address</li>
<li>NAT router is often combined with a firewall in a single device</li>
<li>Source TCP/UDP port is also converted by NAT box</li>
<li>NAT Sample
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.25.32.png" alt=""></li>
<li>What if 2 local hosts talking to same destination?
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.27.15.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.29.51.png" alt=""></li>
<li>解决了地址空间不够的问题</li>
<li>违反了跨层原则</li>
<li>NAT example
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.33.38.png" alt=""></li>
<li>动态NAT表项
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.35.01.png" alt=""></li>
<li>静态NAT表项
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.36.06.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="563-ipv6">5.6.3 IPv6</h3>
<ul>
<li>Motivation
<ul>
<li>IPv4 is becoming insufficient for the fastgrowing Internet and the needs:
<ul>
<li>The use of addressing space is becoming insufficientfor conventional net id &amp; host id two-level addressing structure in Classful addressing</li>
<li>Real-time application i.e. video transmission requiresminimum delay strategies and reservation of resourceis not provided</li>
<li>Encryption and authentication of data and securitymechanism is not provided</li>
<li>Limitation of flexibility and mobility supported</li>
</ul>
</li>
</ul>
</li>
<li>Major Goals
<ul>
<li>Address space NAT</li>
<li>Reduce the size of the routing tables CIDR</li>
<li>Efficiency: Simplify the protocol, to allow routers toprocess packets faster</li>
<li>Security!</li>
<li>QoS: Pay more attention to type of service,particularly for real-time data</li>
<li>Multicasting</li>
<li>Mobility : Make it possible for a host to roam without changing its address</li>
<li>Scalability: Allow the protocol to evolve in the future</li>
<li>Permit the old and new protocols to coexist for years</li>
</ul>
</li>
<li>IPv6 Header
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.48.07.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.49.29.png" alt="">
<ul>
<li>流标记：支持音视频、流媒体，提高速度(IPv6 唯一增加的)</li>
<li>payload: 扩展头</li>
<li>不做CRC</li>
</ul>
</li>
<li>Improvement
<ul>
<li>Longer addresses : 128 bits long &gt; 32 bits currently inIPv4. That means a huge increase of addressing space</li>
<li>Simplification in Header: contains only 8 vital fields&lt; 13in IPv4.(speeds up routing process).-5 fields become soptions.</li>
<li>New options: to support additional function alities</li>
<li>Security: Encryption and authentication are key featuresof new IP</li>
<li>More Services: to handle special/real-time multime diatraffic.</li>
</ul>
</li>
<li>冒分十六进制
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.54.42.png" alt="">
<ul>
<li>双冒号替换(只能替换一次)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2010.56.01.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="564-arp-dhcp-and-icmp">5.6.4 ARP, DHCP and ICMP</h3>
<ul>
<li>ICMP(因特网控制报文协议) Messages
<ul>
<li>An ICMP message is encappsulated in an IP packet</li>
<li>Message types
<ul>
<li>差错报告报文(与CRC无关)
<ul>
<li>目的地不可达报告</li>
<li>超时报告</li>
<li>参数出错报告</li>
</ul>
</li>
<li>控制报文
<ul>
<li>源抑制报文</li>
<li>重定向报文</li>
</ul>
</li>
<li>请求/应答报文
<ul>
<li>回应请求/应答</li>
<li>时戳请求/应答</li>
<li>地址模请求/应答</li>
</ul>
</li>
</ul>
</li>
<li>功能
<ul>
<li>Destination Unreachable
<ul>
<li>a router cannot locate the destination</li>
<li>a packet with the DF bit cannot be delivered because a &lsquo;small.packet&rsquo;network stands in the way.</li>
<li>path MTU discovery(PMTUD)</li>
</ul>
</li>
<li>Time Exceeded
<ul>
<li>a packet is dropped because its counter has reached zero</li>
<li>Traceroute</li>
</ul>
</li>
<li>Parameter Problem
<ul>
<li>A illegal value has been detected in header field.</li>
<li>Indicate a bug in the sending host&rsquo;s IP software or possibly inthe software of a router transited.
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2011.02.57.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ARP: Address Resolution Protocol(地址解析协议)
<ul>
<li>How do IP addresses get mapped onto data linklayer addresses, such as Ethernet?
<ul>
<li>One solution is to have a configuration file somewhere inthe system that maps IP addresses onto Ethernetaddresses</li>
<li>A better solution is to output a broadcast packet ontothe Ethernet asking: Who owns IP address 192.31.65.5?
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2011.04.10.png" alt=""></li>
<li>以太网中天然的广播地址：全1(48个1)</li>
<li>neighbor table</li>
</ul>
</li>
<li>Operation
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2011.07.12.png" alt=""></li>
<li>IP Address vs. MAC Address
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2011.10.13.png" alt=""></li>
</ul>
</li>
<li>RARP(逆向ARP) 根据mac地址分配IP，已经不用了
<ul>
<li>Requirement
<ul>
<li>Given an Ethernet address, what is the corresponding Ip address?</li>
<li>Example: when a diskless work station is booted</li>
<li>Network layer protocol</li>
</ul>
</li>
<li>RARP (Reverse Address Resolution Protocol)
<ul>
<li>Allows a work station to broadcast on Ethernet:My Ethernet address is 14-04-05-18-01-25. Does anyone out there know my Ip address?</li>
</ul>
</li>
</ul>
</li>
<li>DHCP(动态主机配置协议)
<ul>
<li>Dynamic Host Configuration Protocol
<ul>
<li>Provides automatic configuration of remote hosts including
<ul>
<li>IP address, Router&rsquo;s address, net mask</li>
<li>DNS server&rsquo;s address, file server..</li>
</ul>
</li>
<li>An application layer protocol, following client-serverparadigm, using UDP to carry its messages(不长)</li>
<li>DHCP packets: Discover/Offer, Request/Ack</li>
</ul>
</li>
<li>An extension to the BOOTP protocol
<ul>
<li>It has largely replaced RARP and BOOTP</li>
</ul>
</li>
<li>Leasing &amp; renewal</li>
<li>What&rsquo;s the difference of RARP and DHCP?</li>
<li>DHCP Client-Server scenario
<ul>
<li>本网内广播，找DHCP服务器
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2011.19.19.png" alt=""></li>
</ul>
</li>
<li>DHCP Relay Agent(DHCP中继代理)
<ul>
<li>When this is no DHCP server in the LAN, DHCP relay agentrelays DHCP messages between DHCp clients and DHCp server
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2011.21.57.png" alt=""></li>
<li>大型园区网络中</li>
</ul>
</li>
</ul>
</li>
<li>Routing Architecture in the Internet
<ul>
<li>Internet is not a single network
<ul>
<li>The Internet contains a large number of diverse networks</li>
<li>Different networks controlled by different administrations</li>
</ul>
</li>
<li>Internet is divided in Autonomous Systems (AS,自治系统)that are independently administered by individualorganizations.
<ul>
<li>An AS is a network under single administrative control</li>
<li>Every As has a unigue AS number</li>
</ul>
</li>
<li>An AS is a routing domain
<ul>
<li>Within an As
<ul>
<li>Trust other routers,</li>
<li>Run a unified routing protocol (eg. LSR)</li>
</ul>
</li>
<li>Between ASes
<ul>
<li>Crossing trust boundaries</li>
<li>Lack of information about other AS&rsquo;s network
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2011.25.28.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="566--567-routing-protocols-ospf-and-bgp">5.6.6 &amp; 5.6.7 Routing Protocols: OSPF and BGP</h3>
<ul>
<li>Popular Routing Protocols in Internet
<ul>
<li>RIp: Distance Vector Routing</li>
<li>OSPF, IS-Is: Link state Routing</li>
<li>BGP: Revised Distance Vector, Path Vector Routing(PVR)</li>
<li>一个自治域内部一定选择一样的路由协议</li>
<li>不同自治域内不一定使用同样的路由协议</li>
<li>自治域之间采用外部网关协议BGP
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-22%2011.26.35.png" alt=""></li>
</ul>
</li>
<li>RIP Features
<ul>
<li>Routing Information Protocol(路由信息协议)</li>
<li><strong>内部路由协议</strong></li>
<li>Direct implementation of Distance Vector routing(<strong>DVR</strong>)</li>
<li>Path costs are based on number of hops
<ul>
<li>RIP treats all network equals; the cost of passing thrua network is the same: one hop count per network</li>
</ul>
</li>
<li>Number of hops is <strong>limited to 16</strong>, lack ofScalability 解决无穷计数问题</li>
<li>The update of complete routing table are sentevery 30 seconds</li>
<li>RIP messages are transmitted in UDP packets</li>
</ul>
</li>
<li>OSPF: Features
<ul>
<li>Open Shortest Path First(开放最短路径优先)</li>
<li>Based on Link State Routing</li>
<li>OSPF allows the administrator to (only) assign a costfor passing through a network based on the type ofservice required.</li>
<li>Each router should have the exact topology of theinternet at every moment.</li>
<li>OSPF standard supports novel concepts such as typeof service routing, load balancing and authentication.</li>
<li>OSPF messages are transported directly in IP packets
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2016.47.03.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2016.50.02.png" alt=""></li>
</ul>
</li>
<li>RIP vs. OSPF
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2016.51.56.png" alt=""></li>
<li>BGP
<ul>
<li>Ases need a common protocol for communication</li>
<li>Border Gateway Protocol(边界网关协议)</li>
<li>Path Vector Routing 路径矢量选路</li>
<li>Distance vector algorithm with extra information
<ul>
<li>Every route advertisement contains the entire AS path自治域</li>
<li>No extra computation, just extra storage</li>
</ul>
</li>
<li>Advantages
<ul>
<li>Enables router to perform policy routing
<ul>
<li>E.g. avoid path to avoid transiting particular AS</li>
<li>E.g. link speed, capacity, tendency to become congested, andoverall quality of operation, security.</li>
<li>E.g. minimizing number of transit ASs</li>
</ul>
</li>
<li>Can avoid loops at an As level</li>
<li>BGP using <strong>TCP</strong> to carry its messages, reliable delivery!可靠传输</li>
<li>路由表举例
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2016.56.20.png" alt=""></li>
</ul>
</li>
<li>How BGP Routers Choose Route
<ul>
<li>Detect and break routing loop</li>
<li>Routes via peered networks are chosen in preferenceto routes via transit providers</li>
<li>Shorter As paths are better</li>
<li>Prefer the route that has the lowest cost within AS
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2016.59.34.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>因特网的选路协议
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.01.00.png" alt=""></li>
</ul>
<h3 id="review">Review</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.04.19.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2009.55.57.png" alt="review(1)">
<img src="/images/%E6%88%AA%E5%B1%8F2024-04-24%2009.59.47.png" alt="review(2)"></p>
<h1 id="chapter-6-the-transport-layer">chapter 6 The Transport layer</h1>
<h2 id="61-function-and-services-to-transportlayer">6.1 Function and Services to TransportLayer</h2>
<ul>
<li>Position of Transport Layer
<ul>
<li>Heart of the whole protocol hierarchy.</li>
<li>用户功能的最底层
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.09.54.png" alt=""></li>
</ul>
</li>
<li>Functions of Transport Layer
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.10.57.png" alt="">
<ul>
<li>Providing efficient, reliable, and cost-effective datatransport from the source to the destination</li>
<li>Independently of the physical network or networkscurrently in use</li>
</ul>
</li>
<li>Process-to-Process Delivery进程之间的通信
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.13.01.png" alt=""></li>
<li>Scope of Transport Layer
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.16.45.png" alt=""></li>
<li>Services of Transport Layer
<ul>
<li>Masking the diversity of communication subnets andproviding a common interface to the upper layer</li>
<li>Providing multiple SAPs(Service Access Points) sharingone network link</li>
<li>Two type of services: connectionless(UDP), connection-oriented(TCP)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.18.45.png" alt=""></li>
</ul>
</li>
<li>问题
<ul>
<li>传输层服务与网络层服务很类似，如服务类型、连接的管理、寻址、流量控制等，为什么还需要设计成两层而不是合并为一层?
<ul>
<li>用户对网络层没有真正的控制权，但可以控制传输层</li>
<li>当需要增加某些通信处理功能时，修改传输层更容易</li>
<li>传输层能够向用户隐藏网络细节</li>
</ul>
</li>
</ul>
</li>
<li>Client-Server Model
<ul>
<li>Used by&rsquo; almost all network applications</li>
<li>Server
<ul>
<li>Manages some resources and provides service bymanipulating resources for clients</li>
<li>Begins execution first</li>
<li>Waits passively at prearranged location</li>
</ul>
</li>
<li>Client
<ul>
<li>Begins execution later</li>
<li>Actively initiates contact with a server
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.21.51.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="62-elements-of-transport-protocols">6.2 Elements of Transport Protocols</h2>
<h3 id="621-addressing">6.2.1 Addressing</h3>
<ul>
<li>
<p>Transport Protocol &amp; Data Link Protocol</p>
<ul>
<li>Both have to deal with error control, sequencing(顺序)and flow control, among other issues.</li>
<li>node-to-node delivery vs. process-to-process delivery</li>
<li>Environment differences
<ul>
<li>Addressing of destinations</li>
<li>Initial connection establishment</li>
<li>Storage capacity in the network</li>
<li>Difference of degree (eg. Buffering and flow control)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.27.25.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Port Number</p>
<ul>
<li>本地唯一</li>
<li>SAP of the application process</li>
<li>Deciding which application gets which messages
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.30.56.png" alt=""></li>
<li>Well-konwn
<ul>
<li>http web端口80</li>
<li>https web端口443</li>
<li>所有人都能用</li>
<li>给服务器用</li>
</ul>
</li>
<li>Registered
<ul>
<li>给服务器用</li>
</ul>
</li>
<li>Dynamic or private
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.34.24.png" alt=""></li>
<li>IP Address vs. Port Number
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.39.26.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.40.27.png" alt=""></li>
</ul>
</li>
<li>
<p>Gets the Server&rsquo;s TSAP</p>
<ul>
<li>Well-known TSAP(适用于少数永久不变的关键服务)
<ul>
<li>mail server: 25</li>
<li>web server: 80 or 443</li>
<li>&hellip;</li>
</ul>
</li>
<li>Portmapper: eg a name Server or directory server
<ul>
<li>能够根据Client的服务请求将相应的TSAP地址返回给CLient</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Process server(节省资源)</p>
<ul>
<li>If there are many server processes, most of which are rarely used, it is wasteful to have each of them active</li>
<li>进程服务器作为不常用的服务器的代理</li>
<li>仅适用于服务器进程可按需创建的场合
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.40.27.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="622-connection-establishment">6.2.2 Connection Establishment</h3>
<ul>
<li>Problems
<ul>
<li>Establishing a connection sounds easy
<ul>
<li>2-way handshake</li>
<li>One sends a Connection Request to the destination and wait for a Connection Accepted reply</li>
</ul>
</li>
<li>Problems
<ul>
<li>Network can lose, delay and retransmite packets</li>
<li>Delayed duplicates</li>
</ul>
</li>
</ul>
</li>
<li>Problem of Delayed Duplicate CR
<ul>
<li>目标:收发双方能够正确建立一个且仅一个连接</li>
<li>Connection Request(CR) TPDU was delayed and retransmitted , causing Host2 to regard the duplicate CRas a new one
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.47.26.png" alt=""></li>
</ul>
</li>
<li>Solutions: 3 Way Handshake(三次握手)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2017.53.39.png" alt=""></li>
</ul>
<h3 id="623-connection-release">6.2.3 Connection Release</h3>
<ul>
<li>
<p>Asymmetric Release (violent-突然)</p>
<ul>
<li>when one party hangs up, the connection is broken</li>
<li>Asymmetric release is abrupt and may result in data loss</li>
</ul>
</li>
<li>
<p>Symmetric Release (graceful-平滑)</p>
<ul>
<li>Treats connection as two separate unidirectional connections</li>
<li>Reguires each one to be released separately</li>
</ul>
</li>
<li>
<p>Goals</p>
<ul>
<li>释放过程不丢包</li>
<li>无半开放连接(一方资源已经释放，另一半未释放)</li>
</ul>
</li>
<li>
<p>Releasing a connection means</p>
<ul>
<li>The transport entity removes the information about the connection fromits table of currently open connections and signals the connection&rsquo;s owner(the transport user)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2018.00.26.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-27%2018.03.38.png" alt=""></li>
<li>如果第一个DR也丢失
<ul>
<li>重传n次后释放</li>
<li>Half-open connection
<ul>
<li>Initial DR and N retransmissions are all lost</li>
<li>The sender will give up and release the connection</li>
<li>The receiver is still full active</li>
</ul>
</li>
<li>Killing off half-open connection
<ul>
<li>Automatically disconnected rule自动的拆除连接的规则:
<ul>
<li>if no segments havearrived for a certain number of seconds</li>
<li>theconnection is automatically disconnected</li>
</ul>
</li>
<li>Dummy segment 哑段(防误判)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Review
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2009.51.11.png" alt=""></p>
</li>
</ul>
<h3 id="624-flow-control-and-buffering">6.2.4 Flow Control and Buffering</h3>
<ul>
<li>error contrl
<ul>
<li>ARQ自动请求重传
<ul>
<li>A segment carries an error-detecting code(Checksum)</li>
<li>A segment carries a sequence number to identify itselfand is retransmitted by the sender until it receives anacknowledgement of successful receipt from thereceiver( sequence number + timer + ACK)</li>
<li>Sliding window protocol is used to support bidirectionaldata transfer.</li>
</ul>
</li>
<li>End-to-end argument(端到端/进程-进程)</li>
<li>Error Control: Transport Layer vs. Data Link Layer
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.10.47.png" alt=""></li>
</ul>
</li>
<li>Buffering Trade-off
<ul>
<li>The buffers are needed at both the sender and the receiver</li>
<li>The best Trade-off depends on type of traffic
<ul>
<li>For low-bandwidth bursty traffic, such as BBS
<ul>
<li>it is reasonable not to dedicate any buffers, but rather to acquire them dynamically at both ends</li>
<li>relying on buffing at the sender if segments must occasionally be discard</li>
</ul>
</li>
<li>For file transfer and other high-bandwidth traffic
<ul>
<li>The receiver shall does dedicate a full window of buffers, to allow the data to flow at maximum speed</li>
<li>TCP uses this strategy</li>
</ul>
</li>
</ul>
</li>
<li>Hot to organize the buffer pool
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.17.07.png" alt=""></li>
</ul>
</li>
<li>flow control
<ul>
<li>
<p>Sending window W<!-- raw HTML omitted -->T<!-- raw HTML omitted --> is related to BD
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.19.54.png" alt=""></p>
</li>
<li>
<p>BD is large and variable, variable-sized sending windows</p>
<ul>
<li>Initial buffer negotiating</li>
</ul>
</li>
<li>
<p>Two flow contrl factor</p>
<ul>
<li>Buffer space available in the receiver
<ul>
<li>接收方在回ack的时候告诉发送方</li>
</ul>
</li>
<li>The capacity of the subnet
<ul>
<li>发送方自己计算</li>
</ul>
</li>
</ul>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.21.44.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.27.55.png" alt=""></p>
</li>
</ul>
</li>
</ul>
<h3 id="625-multiplexing复用">6.2.5 Multiplexing复用</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.29.32.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.29.45.png" alt=""></p>
<h2 id="63-congestion-control">6.3 Congestion Control</h2>
<ul>
<li>Responsibility of the network and transport layers
<ul>
<li>Congestion occurs at routers, so it is detected at the network layer (long delays, lost packets)</li>
<li>The only effective way is for the transportprotocols to send packets into the network moreslowly</li>
</ul>
</li>
<li>Internet relies heavily on the transport layer for congestion control(TCP)</li>
<li>Efficiency(效率)and Power(功率)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.31.13.png" alt="">
<ul>
<li>The load with the highest power represents an efficient load for the transport entity to place on the network</li>
</ul>
</li>
<li>How to divide bandwidth between transport senders？
<ul>
<li>Goal of Congestion Control Algorithm in transport layer
<ul>
<li>Avoid congestion</li>
<li>Find a good allocation of bandwidth to ser all the available bandwidth(Efficiency)</li>
<li>Be fair across competing transport entities(Fairness)</li>
<li>Quickly track changes in traffic (Convergence)</li>
</ul>
</li>
</ul>
</li>
<li>How to divide bandwidth betweentransport senders fairly?
<ul>
<li>Max-Min Fairness(最大最小公平性)
<ul>
<li>一个信道上，在满足最小需求的前提下，各流尽量均分带宽;如果增加任何一个参与者(分量)的带宽，将导致其它的具有相同或者更少带宽的参与者(分量)的带宽下降此时即满足了最大最小公平性。
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.36.17.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.48.56.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Convergence(收敛)
<ul>
<li>A good congestion control algorithm should rapidly converge to the ideal operating point(a fair and efficientallocation of bandwidth), and it should track that point as it changes over time.(尽快达到理想分配)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.51.52.png" alt=""></li>
</ul>
</li>
<li>Congestion Control in Internet
<ul>
<li>三步走
<ul>
<li>Congestion detection: Router根据队列长度或者线路利用率判断</li>
<li>Congestion notification 将拥塞情况通知源主机
<ul>
<li>显式拥塞通知 TCP with ECN</li>
<li>隐式拥塞通知 (RED)源主机(TCP)自己根据丢包情况判断</li>
</ul>
</li>
<li>Source reduces traffic: 源主机采取措施(TCP)
<ul>
<li>在出现拥塞时，降低发送速率</li>
<li>再无拥塞时，增加发送速率</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Control Law: AIMD(加法增乘法减)
<ul>
<li>Motive: to arrive at the efficient and fair operating point
<ul>
<li>Assumed two connections competing for the bandwidth of a single link
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2010.58.18.png" alt=""></li>
<li>AIAD, MIMD or MIAD are hard to converge to theoptimal point(which is both fair and efficient)!</li>
</ul>
</li>
<li>AIMD 加法增乘法减
<ul>
<li>Additive Increase Multiplicative Decrease(AIMD): AIMDdoes converge to the optimal point that is efficient,fair,and convergence
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2011.03.43.png" alt=""></li>
<li>AIMD可以收敛于最优点</li>
<li>AIMD is used by TCP</li>
</ul>
</li>
</ul>
</li>
<li>Control laws used by TCP
<ul>
<li>AIMD</li>
<li>Stability argument: It is easy to drive the network into congestion and difficult to recover, so the increase policy should be gentle and the decrease policy should be aggressive.</li>
<li>Not adjusting the rate directly, a strategy used in practice is to adjust the size of a sliding window</li>
<li>TCP-friendly congestion control
<ul>
<li>TCP is the dominant form of congestion control</li>
<li>New transport protocol should complete fairly with TCP</li>
<li>TCP and non-TCP transport protocols can be friendly mixed with no ill effects</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="64-user-datagram-protocol-udp">6.4 User Datagram Protocol (UDP)</h2>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2011.09.10.png" alt=""></p>
<ul>
<li>UDP: User Datagram Protocol单播/组播/广播
<ul>
<li>Connectionless</li>
<li>Unreliable transfer
<ul>
<li>没有ack</li>
<li>没有error control</li>
<li>没有flow control</li>
<li>没有congestion control</li>
<li>Same best-effort service model as Ip</li>
</ul>
</li>
<li>Provides multiplexing/demultiplexing over Ip</li>
<li>Can be used to send broadcast datagrams(IPv4) or multicast datagrams(IPv4 and IPv6), in addition to unicastand any cast datagrams</li>
</ul>
</li>
<li>UDP Applications
<ul>
<li>DNs (Domain Name system,53)</li>
<li>DHCP (Dynamic Host Configuration Protocol, 67/68)</li>
<li>RIP (Routing Information Protocol)(要求知道上述三种协议的传输层采用UDP协议)</li>
</ul>
</li>
<li>UDP Datagram Format
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2011.12.41.png" alt="">
<ul>
<li>UDP preserves message boundaries(保留消息边界between the sender and the receiver).
<ul>
<li>当消息过长时会有问题</li>
<li>当消息过短时效率低</li>
</ul>
</li>
<li>Pseudoheader(伪报头) 跨层设计
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2011.14.50.png" alt=""></li>
</ul>
</li>
<li>UDP Checksum
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2011.16.28.png" alt=""></li>
</ul>
<h2 id="65-transmission-control-protocol-tcp">6.5 Transmission Control Protocol (TCP)</h2>
<h3 id="651-3-tcp-features">6.5.1-3 TCP Features</h3>
<ul>
<li>
<p>TCP was designed to provide a connection-oriented reliable end-to-end byte stream over an unreliable internetwork</p>
</li>
<li>
<p>Connection-oriented: TCP connection</p>
<ul>
<li>Full-duplex</li>
<li>End-to-End: TCP supports only unicast connections, not supportmulticasting or broadcasting单播</li>
<li>Socket(four-tuple)(source port + destination port)
<ul>
<li>Each connection is identified by a pair of socketseg.(socket1,socket2)</li>
<li>socket address: IP address+Port (16-bit, TSAP)</li>
</ul>
</li>
<li>Well-known ports
<ul>
<li>Port number below 1024 is reserved for standard services</li>
<li>RFC1700</li>
<li>&lsquo;inetd&rsquo; process (Internet daemon)(同时关联到多个端口上)
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2011.20.57.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Features of TCP</p>
<ul>
<li>Reliable delivery(ARQ) (checksum, sequence number, acknowledgement number, window size)
<ul>
<li>Checksums + Retransmission + Acknowledgement(cumulative ACK)</li>
<li>Sequence numbers + timer detect missing, or mis-sequenced data</li>
<li>Sliding Window Flow control prevents flooding of receiver</li>
</ul>
</li>
<li>Congestion control: to share network capacity among users</li>
<li>Byte stream oriented: Message boundaries are not preserved endto end(不能保留消息边界)
<ul>
<li>TCP报文段内携带多少字节数据由TCP协议决定，<strong>与上层消息长度无关</strong>
<img src="/images/%E6%88%AA%E5%B1%8F2024-05-29%2011.24.02.png" alt=""></li>
<li>The only thing that is guaranteed is that all data sent will bereceived without any error and in the correct order.(TCP仅保证交给上层的数据正确、按序)</li>
<li>TCP连接上每个数据字节均被编号，即拥有自己的唯一的序号</li>
<li>Q&amp;A:是否有数据长度限制?接收方用户如何区分不同消息?
<ul>
<li>没有数据长度限制</li>
<li>接收方根据应用层的消息边界区分</li>
</ul>
</li>
<li>Buffers and Segments
<ul>
<li>延迟发送、延迟交付
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2016.58.12.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Review
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2016.50.41.png" alt=""></p>
</li>
<li>
<p>More on TCP Segment(报文段)</p>
<ul>
<li>TCP segment=(20 or more bytes) head+(n bytes) data</li>
<li>Segments without any data are legal and are commonly used for ACK and control messages</li>
<li>MSS (Maximum Segment Size)：Maximum data length in a segment( payload length)
<ul>
<li>Limited by IP datagram length (65515 Bytes)</li>
<li>Limited by MTU of each data link (generally 1500 Bytes—Ethernet payload size), so router may fragment a segment</li>
</ul>
</li>
<li>Byte-oriented sequence number and ACK number
<ul>
<li>TCP段中的序号是该段<strong>第一个字节</strong>的序号</li>
<li>ACK段中的确认序号是<strong>下一个期待的字节的序号</strong></li>
</ul>
</li>
<li>Variable sized sliding window</li>
</ul>
</li>
</ul>
<h3 id="654-tcp-segment-header">6.5.4 TCP Segment Header</h3>
<ul>
<li>TCP Segment Header
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.03.10.png" alt=""></li>
<li>Example of Seq. No. , ACK No. and window size
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.04.46.png" alt=""></li>
<li>Flags Field
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.07.36.png" alt="">
<ul>
<li>ACK置1时，ACK number和Window size才有效</li>
<li>Window size and ack. No.
<ul>
<li>eg: 某接受端发送了一个段
<ul>
<li>Acknowledgement number = 701 Window size = 1000</li>
<li>Means: 701号之前的字节已收到，发送方还可以发送1000字节消息</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ECN and ECE/CWR
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.13.51.png" alt="">
<ul>
<li>接收方若收到ECN=1的数据报，就发回ECE=1的数据报(发送的任何包ECE=1)</li>
<li>发送方收到ECE=1的数据报，减速，停止发送ECN=1的数据报，发送CWR=1的数据报</li>
<li>接收方收到CWR=1的消息，停止发送ECE=1的数据报</li>
</ul>
</li>
<li>Example
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.15.44.png" alt=""></li>
<li>The TCP checksum
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.27.17.png" alt="">
<ul>
<li>IP、UDP和TCP使用相同的校验码算法(checksum,16bit)</li>
<li>IPv4: 只对IP包头校验</li>
<li>IPv6:无校验码</li>
<li>IP之上的协议采用伪报头(Pseudoheader)
<ul>
<li>Pseudoheader includes
<ul>
<li>source Ip</li>
<li>destincation Ip</li>
<li>protocol</li>
<li>lengthi segment</li>
</ul>
</li>
<li>UDP: 可选，伪报头+UDP头+数据进行校验</li>
<li>TCP:必选，伪报头+TCP头+数据进行校验</li>
</ul>
</li>
</ul>
</li>
<li>Options in TCP Header
<ul>
<li>MSS(Maximum Segment Size)
<ul>
<li>Allow hosts to specify the MSS it is willing to accept</li>
<li>Negotiated during connection setup</li>
<li>Default MSS is 536B without this option(536+20+20)</li>
<li>MSS need not be the same in the two directions</li>
</ul>
</li>
<li>Window scale
<ul>
<li>Allows the sender and receiver to negotiate a window scale factor at the start of a connection</li>
<li>2<!-- raw HTML omitted -->16<!-- raw HTML omitted -->=64KB</li>
<li>Shift the window size field up to 14 bits to the left, allowing the window size up to 2<!-- raw HTML omitted -->30<!-- raw HTML omitted --> bytes</li>
</ul>
</li>
<li>Timestamp
<ul>
<li>Used to compute round-trip time samples</li>
<li>PAWS(Protection Against Wrapped Sequence numbers)</li>
</ul>
</li>
<li>SACK(Selective ACK)
<ul>
<li>Allow a receiver to tell a sender the ranges of sequencenumbers that it has received.</li>
<li>It supplements the Acknowledgement number and is usedafter a packet has been lost but the subseguence(ordulplicate) data has arrived</li>
<li>With SACK, the sender is explicitly aware of what data thereceiver has and hence determine what data should beretransmitted</li>
<li>Defined in RFc 2108 and RFC 2883
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.36.02.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="655-connection-establishment">6.5.5 Connection Establishment</h3>
<ul>
<li>TCP Connection Establishment
<ul>
<li>Client
<ul>
<li>Executes a CONNECT primitive, specifying the IP address and port</li>
<li>sends a TCP segment with the SYN bit on(SYN=1) and ACK bit off(ACK=0) and waits for a response</li>
</ul>
</li>
<li>Server
<ul>
<li>When client’s SYN segment arrives, checks to see if there is a process that has done a LISTEN on the port
<ul>
<li>If not, it sends a reply with the RST bit on to reject the connection</li>
<li>If some process is listening to the port, that process is given the incoming TCP segment, &hellip;&hellip;
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.42.58.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Initial sequence number
<ul>
<li>Initial sequence number
<ul>
<li>A clock-based scheme is used, with a clock tick every 4 µsec</li>
</ul>
</li>
<li>Security
<ul>
<li>A vulnerability with three-way handshakes is that the listening process must remember its sequence number as soon it responds with its own SYN segment&mdash;SYN flooding attack</li>
<li>SYN Cookie—one way to defend against this attack
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.46.57.png" alt="TCP Data transfer"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="656-connection-release">6.5.6 Connection Release</h3>
<ul>
<li>4-step Connection Release:Half-close(半关闭连接)
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.49.35.png" alt="">
<ul>
<li>FIN: 表示是一个连接释放的请求</li>
<li>双向释放，四条消息</li>
<li>FIN占一个序号</li>
<li>控制消息，不考虑其包含数据</li>
</ul>
</li>
<li>3-way handshaking
<ul>
<li>将中间两条消息释放
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2017.56.58.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="657-connection-modeling">6.5.7 Connection Modeling</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2018.05.36.png" alt=""></p>
<ul>
<li>
<p>MSL最大存活时间</p>
</li>
<li>
<p>1RTT-1.5RTT</p>
</li>
<li>
<p>1RTT+2MSL-1.5RTT
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2018.06.08.png" alt=""></p>
</li>
<li>
<p>Review-TCP
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2009.54.04.png" alt=""></p>
</li>
</ul>
<h3 id="658-flow-control">6.5.8 Flow Control</h3>
<ul>
<li>Sliding Window
<ul>
<li>Acknowledgement and buffer allocation are separated 流量控制和差错控制分隔</li>
<li>Differences with Data Link Layer Flow Control:
<ul>
<li>SW in TCP is byte oriented, but SW in DL is frame oriented</li>
<li>TCP SW is variable size（acknowledgement number + Window Size）, but DL SW is fixed size</li>
</ul>
</li>
<li>When the window announced by receiver is 0
<ul>
<li>Sender may not normally send segments</li>
<li>Urgent data may be sent</li>
<li>Window probe: Sender may re-send a 1-byte segment to probe ACK &amp; window update to prevent deadlock
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-03%2019.04.45.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Features of TCP&rsquo;s Silding Windows
<ul>
<li>Senders are not required to transmit data as Soon as they come in from the application.</li>
<li>Dynamic Window Size
<ul>
<li>The sender window size is totally controlled by the receiver window value. However, the actual window size can be smaller if there is congestion in the network.</li>
</ul>
</li>
<li>The receiver can send an acknowledgment at anytime.
<ul>
<li>cumulative acknowledgment</li>
<li>SACK</li>
<li>delayed acknowledgment (delay 500ms)</li>
</ul>
</li>
</ul>
</li>
<li>Nagle&rsquo;s algorithm
<ul>
<li>Problem:Small packets problem (Small packets are wasteful)
<ul>
<li>Overhead: TCp head + Ip head=20+20 bytes</li>
<li>When used in TELNET connection, 1 byte data carried with 40 bytesoverhead</li>
</ul>
</li>
<li>Improvemetn: Sending larger segments(避免发小包)
<ul>
<li>Sender: Nalge algorithm(针对发送方)
<ul>
<li>Send the first piece and buffer all the rest</li>
<li>Do not send until either of the following conditions exist:
<ul>
<li>Acknowledgement to last segment has been received 上一个帧的ACK回来了</li>
<li>Buffered data fills half the window or a maximum segment(MSS) 达到最大段长度或者充满了半个窗口</li>
</ul>
</li>
<li>避免连发小包</li>
</ul>
</li>
<li>Receiver: Delay acknowledgement and window update, reduce the load placed by the receiver</li>
<li>可能对实时性要求比较高的应用不友好</li>
</ul>
</li>
<li>TCP Option选项
<ul>
<li>TCP_NODELAy: Disable Nagle&rsquo;s algorithm &amp; using PUsH bit</li>
<li>Linux TCP CORK: Disable Nagle&rsquo;s algorithm, wait 200ms to accumulate datafor sending</li>
</ul>
</li>
</ul>
</li>
<li>Silly Window Syndrome
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2010.21.54.png" alt="">
<ul>
<li>Clark&rsquo;s solution 针对接收方</li>
<li>The receiver should not send a window update until it can handle the MsS or its buffer is half empty, whichever is smaller最大段长或整个缓冲区的一半
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2010.23.55.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="补-error-control">(补) Error Control</h3>
<ul>
<li>TCP provides reliable transmission</li>
<li>Error control includes mechanism for detectingcorrupted segments, lost segments, out-of-ordersegments and duplicated segments.</li>
<li>Error checking and correction using ARQ
<ul>
<li>Checksum: to check for corrupted segment anddiscard it.</li>
<li>Acknowledgement (ACK): to confirm the receipt ofsegments.</li>
<li>Time-out : Timer set for retransmission of segments!referred as RTO(Retransmission Time-Out) timer.</li>
</ul>
</li>
<li>The heart of error control mechanism is Retransmission</li>
<li>No retransmission and timer set for an ACK segment</li>
<li>Normal Operation
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2010.26.14.png" alt="Normal Operation">
<ul>
<li>500ms是等待的最长时间
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2010.28.55.png" alt=""></li>
<li>Fast Retransmission(快速重传)
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2010.30.09.png" alt="">
<ul>
<li>连续收到三个相同序号的ACK-&gt;立即重传，不需要等time out</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="659-tcp-timer-management">6.5.9 TCP Timer Management</h3>
<ul>
<li>Timer
<ul>
<li>RTO(Retransmission timeout)
<ul>
<li>Data Link Layer vs. TCP
<ul>
<li>How long shoud the timeout be?</li>
<li>It is much more difficult in the TL than in DL
<ul>
<li>Probability density of Round Trip Time(RTT)
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2010.42.44.png" alt=""></li>
</ul>
</li>
<li>TCP中，RTO不能是定值，要随网络变化而变化</li>
</ul>
</li>
<li>Retransmission Timer(Textbook 6.5.10)
<ul>
<li>Solution: use a dynamic algorithm that constantlyadapts the timeout interval, based on continuousmeasurements of network performance</li>
<li>Jacobson algorithm
<ul>
<li>RTO(重传计时器)is sensitive to in RTT-variance(RTTVAR) as well as SRTT 变化量</li>
<li>SRTT: Smoothed RTT(Round-Trip Time) 计算的平均值
<ul>
<li>SRTT: Smoothed RTT(Round-Trip Time)</li>
<li>SRTT = a * SRTT + (1 - a) * (new sample)</li>
<li>SRTT = a * SRTT + (1 - a) * (new sample)</li>
<li>a越大，说明受历史值的影响很大</li>
</ul>
</li>
</ul>
</li>
<li>RTTVAR: The variance in round-trip times
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2010.49.00.png" alt=""></li>
<li>RTO = SRTT + 4 * RTTVAR</li>
<li>Question: For retransmission, how to calculateSample and RTO?
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2010.51.09.png" alt="">
<ul>
<li>Karn&rsquo;s algorithm
<ul>
<li>do not update estimates on any segments that have been retransmitted.</li>
<li>RTO is doubled on each successive retransmission</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Persistence
<ul>
<li>It is designed to prevent the 0-window deadlock</li>
<li>When timer goes off, the sender transmits a probe segment to thereceiver.The response to the probe gives the window size 探帧段</li>
</ul>
</li>
<li>Keep-alive
<ul>
<li>It is designed to prevent the half-open connection半开连接</li>
<li>When a connection has been idle for a long time, the keepalive timermay go off to cause one side to check whether the other side is stilthere</li>
<li>This feature is controversial</li>
</ul>
</li>
<li>Time-waited
<ul>
<li>2MSL(Maximum SegmentLifetime)</li>
<li>To make sure that when aconnection is closed, all packetscreated by it have died off
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2010.36.34.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="6510-congestion-control隐式拥塞控制">6.5.10 Congestion Control(隐式拥塞控制)</h3>
<ul>
<li>Congestion Control in Internet
<ul>
<li>Router(network layer): detects congestion when queues grow large and tries to manage itif only by dropping packets.</li>
<li>Source host (transport layer,TCP): receivescongestion feedback from the network layerand slow down the rate of traffic that it issending into the network.</li>
</ul>
</li>
<li>cwnd(Congestion Window)
<ul>
<li>Congestion Window (cwnd) is a variable held by the TCP sender for each connection.</li>
<li>Denotes how many bytes network is able to absorb</li>
<li>越小说明网络处理能力越差</li>
</ul>
</li>
<li>Van Jacobson&rsquo;s Solution
<ul>
<li>To approximate an AIMD congestion window</li>
<li>TCP maintains a congestion window(cwnd) and a flow control window(rwnd), both are tracked dynamically, the sender window isthe smaller of them. min(cwnd, rwnd)</li>
<li>Using 段丢失 as a congestion signal
<ul>
<li>Depends on transmission errors being relatively rare</li>
<li>This is why 802.11 includes its own retransmission mechanism</li>
</ul>
</li>
<li>A good timer is needed to detect packet loss accurately
<ul>
<li>The timer includes estimates of the mean and variation in RTT</li>
</ul>
</li>
</ul>
</li>
<li>How to detect congestions
<ul>
<li>Packet dropping is the best sign of congestion</li>
<li>How to detect packet drops? ACKs
<ul>
<li>TCP uses ACKs to inform receipt of data</li>
<li>ACK indicates last contiguous byte received</li>
</ul>
</li>
<li>No ACK after time-out implies packet drop</li>
</ul>
</li>
<li>How to adjust sending rate (AIMD)
<ul>
<li>Upon receipt of ACK, increasing rate</li>
<li>Upon detection of packet loss, decreasing rate</li>
</ul>
</li>
<li>TCP Congestion Control Algorithms
<ul>
<li>For simplicity, number of segments is used instead of number of bytes</li>
<li><strong>Slow-Start</strong>: initial rate is slow (cwnd=1)
<ul>
<li>cwnd+1 upon receipt of ACK (Exponential growth)</li>
<li>Exponential growth fills the network &ldquo;pipe&rdquo; in no time</li>
</ul>
</li>
<li>When to leave Slow start and enter AI?
<ul>
<li>A Threshold is necessary: ssthresh</li>
</ul>
</li>
<li><strong>Additive Increase</strong>: A more gentle adjustment algorithm-AIMD
<ul>
<li>Additive Increase, Multiplicative Decrease</li>
<li>Gentle increase, Drastic decrease
<ul>
<li>On receipt of ACK, cwnd += 1/cwnd</li>
<li>On detection of packet loss( time out), cwnd = 1
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2011.05.07.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2011.05.45.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Fast Retransmission and Fast Recovery
<ul>
<li>Fast Retransmission
<ul>
<li>Duplicate ACKs: As packets beyond the lost packet arrive at thereceiver, they trigger ACKs that bear the same ACK number.</li>
<li>Fast retransmission: Three duplicate ACKs imply that a packethas been lost, the lost packet can be retransmitted right awaybefore the RTO fires.</li>
<li>TCp Tahoe treats 3 duplicate ACKS the same as a timeout, then anew slow start phase starts</li>
</ul>
</li>
<li>Fast Recovery: For 3 duplicate ACKs, TCP Reno.the congestion window, perform a &ldquo;fast recovery&rdquo;, andenter a new congestion avoidance phase
<ul>
<li>Fast Recovery</li>
<li>threshold=1/2window</li>
<li>cwnd = threshold
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2011.10.22.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2011.11.08.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>AIMD Effect
<ul>
<li>Addictive Increase
<ul>
<li>Increasing Congestion Window by 1 when a full window of packets has been sent without loss of packets</li>
<li>Linear increasing to avoid congestion</li>
</ul>
</li>
<li>Multiplicative decrease
<ul>
<li>Cutting Congestion Window in half after packet loss
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2011.12.43.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Summary of TCP Congestion Control
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2011.13.41.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2011.16.24.png" alt=""></li>
</ul>
<h3 id="review-of-tcp">Review of TCP</h3>
<ul>
<li>（1）
<ul>
<li>提供面向连接的字节流服务</li>
<li>采用三次握手建立连接</li>
<li>采用四步释放或三次握手关闭连接</li>
<li>采用ARQ机制实现差错控制</li>
<li>采用动态的滑动窗口实现流量控制
<ul>
<li>减少小包，提高传输效率</li>
<li>Nagle&rsquo;s算法：发送方使用，一次尽可能发送较多的数据</li>
<li>Clark&rsquo;s算法: 接收方使用，在有较大空闲缓存时才发送窗口更新通知，解决傻瓜窗口问题</li>
</ul>
</li>
<li>超市重传时间RTO
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2011.25.28.png" alt=""></li>
</ul>
</li>
<li>（2）拥塞控制
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-05%2011.26.04.png" alt=""></li>
</ul>
<h1 id="chapter-7-the-application-layer">chapter 7 The application layer</h1>
<h2 id="introduction-to-application-layer">Introduction to Application Layer</h2>
<ul>
<li>
<p>Positions and functions of application layer
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-09%2021.17.34.png" alt=""></p>
<ul>
<li>Duties and Features of Application Layer
<ul>
<li>Providing various applications to end users</li>
<li>Maximum number of protocols and most complex</li>
<li>Each protocol is specified to a type of application, no general-purpose protocols
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-09%2021.19.42.png" alt=""></li>
</ul>
</li>
<li>Conventional Internet Application Protocols
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-09%2021.21.58.png" alt=""></li>
</ul>
</li>
<li>
<p>Peer-to-peer paradigm vs. Client-server paradigm</p>
<ul>
<li>Client-server paradigm
<ul>
<li>The tasks, capabilities and protocol machines are different at each side.</li>
</ul>
</li>
<li>server:
<ul>
<li>always-on</li>
<li>permanent IP address</li>
<li>server farms for scaling</li>
</ul>
</li>
<li>clients:
<ul>
<li>communicate with server</li>
<li>may be intermittently connected</li>
<li>may have dynamic IP addresses</li>
<li>do not communicate directly with each other</li>
<li>DNS, Web, email…
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-09%2021.24.22.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Pure P2P Architecture in Computer Networks</p>
<ul>
<li>arbitrary end systems directly communicate</li>
<li>peers are intermittently connected and change IP addresses</li>
<li>BT,eMule, 迅雷…
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-09%2021.25.43.png" alt=""></li>
</ul>
</li>
</ul>
<h2 id="domain-name-system-dns-域名系统">Domain Name System (DNS) 域名系统</h2>
<ul>
<li>Hierarchical namespace
<ul>
<li>IP address and Host name</li>
<li>Name Space
<ul>
<li>Flat(平面) Name Space, each host in the network is unique and independent from each other，Out-dated “hosts.txt”</li>
<li>Hierarchical(层次) Name Space: Host have a composite names that are all hierarchically organized</li>
</ul>
</li>
<li>DNS
<ul>
<li>primarily used for mapping host names(domain name) and email destinations to IP addresses - but can be used for other purposes</li>
<li>domain name: identifies each host on the Internet with a unique user-friendly name,e.g. <a href="https://www.bupt.edu.cn">www.bupt.edu.cn</a> instead of 123.127.134.10</li>
</ul>
</li>
<li>Providing support for other applications
<ul>
<li>Translating domain name (host name) to IP address</li>
</ul>
</li>
</ul>
</li>
<li>Domain Name System(域名系统)
<ul>
<li>Host ID in Internet
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.08.28.png" alt="Host ID in Internet"></li>
</ul>
</li>
<li>DNS Features
<ul>
<li>Client/Server application, DNS Server (port number 53)</li>
<li><strong>UDP</strong> datagram</li>
<li>Domain name space&ndash;hierarchical name space</li>
<li>Distributed database</li>
<li>Naming follows organizational boundaries, not physical networks</li>
</ul>
</li>
<li>Hierarchical Name Space
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.26.42.png" alt="Hierarchica Name Space">
<ul>
<li>Within an organization
<ul>
<li>Subdivision possible</li>
<li>Arbitrary levels possible (maximum depth =128)</li>
<li>Not standardized, controlled locally by the organization</li>
</ul>
</li>
<li>Naming policy: by the path upward from leaf to root, separated by “.”</li>
</ul>
</li>
<li>Resource records
<ul>
<li>Each domain in the DNS can have a set of resource records(RRs) associated with it. These records are the DNS database.</li>
<li>The primary function of DNS is to map domain names onto resource records.</li>
<li>A RR is a five-tuple, the format as follows:
<ul>
<li>Domain_name Time_to_live Class Type Value
<ul>
<li>Domain_name : tells the domain to which this record applies</li>
<li>TTL: specifies the Time To Live (in unit of second) of the cached RRs</li>
<li>Type: tells what kind of record this is（Figure7-3）
<ul>
<li>A – IPv4 address of a hose(32-Bit)</li>
<li>AAAA – IPv6 address of a hose(128-Bit)</li>
<li>NS – Name Server</li>
<li>CNAME – Canonical Name, alias</li>
<li>MX - 电子邮件交换记录</li>
</ul>
</li>
<li>Class: specifies the protocol family to use
<ul>
<li>IN – the Internet information</li>
</ul>
</li>
<li>Value: depend on type</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>DNS function
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.34.45.png" alt=""></li>
<li>DNS client and DNS server
<ul>
<li>Client: Known as resolver(解析器)
<ul>
<li>software running on client, able to access at least one name server, i.e. Local name server(本地名字服务器)
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.35.36.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>DNS servers
<ul>
<li>Hierarchical(层次化组织)
<ul>
<li>a single point of failure</li>
<li>traffic volume</li>
<li>distant centralized database</li>
<li>maintenance
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.37.50.png" alt=""></li>
</ul>
</li>
<li>DNS name space is divided into nonoverlapping zones</li>
<li>Each circled zone contains some of the tree</li>
<li>A zone corresponds to an administrative authority that is responsible for that portion of the hierarchy e.g. bupt controls *.bupt.edu.cn</li>
<li>Each zone is associated with one or more name servers. These are hosts that hold the database for the zone.
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.39.19.png" alt=""></li>
<li>Authoritative Name Server(权威域名服务器)
<ul>
<li>contains all the records for the hosts in its zone</li>
<li>gets records information from a file on its disk</li>
<li>Authoritative record is one that comes from the authority that manages the record and is thus always correct.</li>
</ul>
</li>
<li>How does a server know about other servers that are responsible for the other zones?
<ul>
<li>Every server knows the root</li>
<li>Root server knows about all TLD servers</li>
<li>Every server knows the server(s) further down the hierarchy</li>
</ul>
</li>
<li>local name Server (本地域名服务器/默认域名服务器)</li>
</ul>
</li>
<li>Name Resolution Procedure
<ul>
<li>The process of looking up a name and finding an address is called name resolution.</li>
<li>Applications
<ul>
<li>Becoming DNS client</li>
<li>Sending request first to local name server</li>
</ul>
</li>
<li>Local name server
<ul>
<li>Listening at port 53, normally using UDP</li>
<li>If answer known, returns response</li>
<li>If answer unknown
<ul>
<li>Requests root or TLD name server</li>
<li>Follows links</li>
<li>Until reaching Authoritative Name Server, which performs name translation and returns response
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.43.14.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Name Resolution Methods
<ul>
<li>Recursive resolution(递归解析/递归查询):
<ul>
<li>If the queried server does not have the information, it must make the appropriate query or queries to get the information</li>
<li>The queried server performs another recursive query until it has the desired answer to return. It does not return partial answers.</li>
</ul>
</li>
<li>Iterative resolution(迭代解析/迭代查询):
<ul>
<li>If the queried server does not have the information, it may then respond with the address of another server (partial answers); the local name server (on behalf of resolver )then queries that server (which might respond with the address of another server, and so on)</li>
<li>Commonly used by name servers on the Internet</li>
</ul>
</li>
</ul>
</li>
<li>DNS Caching
<ul>
<li>All of the answers, including all the partial answers returned.
<ul>
<li>Server always caches answers</li>
<li>Host can cache answers</li>
</ul>
</li>
<li>Using cached answers greatly reduces the steps in a query and improves performance</li>
<li>Cached answers are not authoritative, cache entries should not live too long.
<ul>
<li>TTL：Time_to_live
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.46.16.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>review
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.46.40.png" alt="DNS"></li>
</ul>
<h2 id="email-system-and-protocols">Email System and Protocols</h2>
<ul>
<li>What is Email?
<ul>
<li>Electronic Mail (email, e-mail)</li>
<li>Provides a means to send electronic messages from one person to another asynchronously</li>
<li>One of the most popular applications on the Internet and one of the most important communication methods today</li>
<li>Email service can be provided by
<ul>
<li>ISPs: @126.com, @163.com, @sina.com, yahoo.com.cn, …</li>
<li>Corporations and institutes: @baidu.com, @bupt.edu.cn, @ietf.org, …</li>
<li>Bundled with other services: @139.com, @qq.com, …</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="system-components">System components</h3>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.50.10.png" alt=""></p>
<ul>
<li>UA (User Agent)
<ul>
<li>end-user mail program</li>
<li>Interface between the end users and the email servers</li>
<li>E.g., outlook, foxmail, …</li>
</ul>
</li>
<li>MTA(Message Transfer Agent)—Mail Server
<ul>
<li>Responsible for transmitting/receiving emails and reporting status information about mail transferring to the mail sender</li>
<li>Both a client and a server</li>
</ul>
</li>
<li>Mailbox: store email</li>
<li>Email protocols
<ul>
<li>SMTP: used for sending an email</li>
<li>POP3/IMAP: used for receiving an email
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2016.51.34.png" alt=""></li>
</ul>
</li>
<li>Basic Functions Of Email System
<ul>
<li>Composition - refers to the process of creating messages and answers.</li>
<li>Transfer - refers to moving messages from the originator to the recipient</li>
<li>Reporting - refers to the process of informing the originator what happened to the message</li>
<li>Displaying - means of showing the messages.</li>
<li>Disposition(处置) - refers to what happened to the message after it has been read by the receiver.</li>
</ul>
</li>
<li>Email Address
<ul>
<li>The destination address must be in a format that the message transfer agents can deal with</li>
<li>The expected form of an address is user@dns-address( RFC 5322 )</li>
<li>Each email address is unique on the Internet because
<ul>
<li>dns-address is unique on the Internet</li>
<li>user is unique in the dns-address</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="message-format-mime">Message Format, MIME</h3>
<ul>
<li>Message Format
<ul>
<li>Message envelop
<ul>
<li>Contains whatever information is needed to accomplish transmission and delivery</li>
<li>Constructed by Message Transfer Agent</li>
</ul>
</li>
<li>Message contents
<ul>
<li>comprise the object to be delivered to the recipient</li>
<li>Headers: from, to, subject, date, postmarks</li>
<li>Blank line</li>
<li>Body: actual message, may have many parts
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.13.49.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.14.58.png" alt=""></li>
</ul>
</li>
<li>example
<ul>
<li>The header is everything up to the blank line, and the body is everything after the blank line
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.16.42.png" alt=""></li>
<li>Problem of RFC 822: Only 7 bit ASCII format can be used</li>
</ul>
</li>
</ul>
</li>
<li>MIME
<ul>
<li>Multipurpose Internet Mail Extension, widely used now</li>
<li>Extension for multipart &amp; multimedia email</li>
<li>The basic idea of MIME is to continue to use the RFC822 format but to add structure to the message body and define encoding rules for the transfer of non-ASCII message.</li>
<li>Supports multipart message content type
<ul>
<li>each part has its own type and encoding</li>
</ul>
</li>
<li>MIME messages can be sent using the existing mail programs and protocols</li>
<li>Widely used now
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.18.57.png" alt=""></li>
<li>New Headers
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.19.29.png" alt=""></li>
<li>Content Types and Subtypes
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.20.23.png" alt=""></li>
<li>example
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.21.21.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.21.49.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="smtp">SMTP</h3>
<ul>
<li>Mail transfer and delivery
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.22.22.png" alt=""></li>
<li>Simple Mail Transfer Protocol: Used in transferring mail messages from UA to mail server, and between mail servers(MTA client and MTA server)</li>
<li>SMTP is a simple ASCII protocol</li>
<li>SMTP server listens to port 25，SMTP client establishes a <strong>TCP</strong> connection to this port</li>
<li>If the message cannot be delivered, an error report containing the first part of the undeliverable message is returned to the sender – eventually
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.23.49.png" alt=""></li>
<li>example
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.24.30.png" alt=""></li>
</ul>
<h3 id="pop3imap">POP3，IMAP</h3>
<ul>
<li>POP3
<ul>
<li>Mail delivery—POP: Basic Model
<ul>
<li>Used to transfer mail from a mail server to a UA
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.25.30.png" alt=""></li>
</ul>
</li>
<li>Essentially store and forward.
<ul>
<li>Mail is stored on the server until the client connects and then is downloaded to the client.</li>
<li>You MAY be able to leave a copy on the server</li>
</ul>
</li>
<li>Simple protocol and widely used
<ul>
<li>Many clients available such as foxmail, outlook</li>
</ul>
</li>
<li>protocol: POP3 (POP Version 3)</li>
<li>using POP3 to Fetch 3 Messages
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.27.07.png" alt=""></li>
</ul>
</li>
<li>IMAP: Internet Message Access Protocol
<ul>
<li>POP3 is bad for mobile users or users that use multiple machines during the day
<ul>
<li>Mail is usually downloaded to the user agent computer, instead of remaining on the mail server.</li>
<li>Solution: IMAP (Internet Message Access Protocol)</li>
</ul>
</li>
<li>For mobile users or users that use multiple machines during the day
<ul>
<li>IMAP (Internet Message Access Protocol) is one of the main protocols that is used for final delivery of message.</li>
<li>RFC3501: IMAP4</li>
<li>The mail server runs an IMAP server that listens to port 143</li>
<li>The user agent runs an IMAP client.</li>
<li>IMAP is an improvement of POP3</li>
</ul>
</li>
<li>pop3 vs. imap
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.29.50.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.30.22.png" alt=""></li>
</ul>
</li>
<li>Webmail: HTTP
<ul>
<li>Can deliver mail message in web page format
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.31.12.png" alt=""></li>
<li>Protocols and communication entities
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.31.40.png" alt=""></li>
</ul>
</li>
<li>Review
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.32.05.png" alt=""></li>
</ul>
<h2 id="world-wide-web-www">World Wide Web (WWW)</h2>
<h3 id="www-architecture">WWW Architecture</h3>
<ul>
<li>WWW: World Wide Web
<ul>
<li>WWW(Web), one of mostly widely used Internet application, is an architectural framework for accessing linked content spread out over millions of machines all over the Internet
<ul>
<li>Information is distributed in Internet, stored in web servers</li>
<li>accessed by hyperlinks(超级链接)</li>
</ul>
</li>
<li>A distributed hyper-media system, including multiple media information such as text, graph, image, audio, even video</li>
<li>Client/Server mode, with browser program as client</li>
<li>WWW documents are located with URL: Uniform Resource Locator</li>
<li>WWW documents are written in HTML: HyperText Markup Language</li>
<li>Client and server interact with HTTP: Hyper-Text Transfer Protocol</li>
<li>Searching engines facilitate user to find information needed</li>
</ul>
</li>
<li>Web Client: Browser(浏览器)
<ul>
<li>An application program used by the user to view the web page, as user’s interface to Web
<ul>
<li>Fetching information (web page) from Web server</li>
<li>Displaying information for users</li>
</ul>
</li>
<li>After the user clicks on a hyperlink, Browser
<ul>
<li>Determines URL, name of the linked web page, eg. <a href="https://www.abc.com/example.html">www.abc.com/example.html</a></li>
<li>Asks DNS for the IP address of <a href="https://www.abc.com">www.abc.com</a></li>
<li>Establishes a TCP connection to replied IP address</li>
<li>Sends over an HTTP request asking for the page/example.html</li>
<li>Fetches embedded images</li>
<li>Displays all the texts and images in /example.html</li>
<li>Releases TCP connection</li>
</ul>
</li>
</ul>
</li>
<li>Web Server
<ul>
<li>Stores set of Web documents</li>
<li>Responds to request from browser by sending copy of document</li>
<li>Steps of server’s loop</li>
<li>Accept a TCP connection from a client (a browser)</li>
<li>Get the path to the page, which is the name of the file requested.</li>
<li>Get the file (from disk).</li>
<li>Send the contents of the file to the client.</li>
<li>Release the TCP connection</li>
</ul>
</li>
<li>Web Documents
<ul>
<li>Also called a web page(HTML)</li>
<li>Type
<ul>
<li>Static web page
<ul>
<li>Each URL corresponded to a single file stored on some hard disk, unchanging</li>
<li>Edit in HTML format, .html, .htm
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.37.56.png" alt=""></li>
<li>HTML – HyperText Markup Language
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.38.27.png" alt=""></li>
</ul>
</li>
<li>Dynamic web page
<ul>
<li>Can change whenever a server receives a request</li>
<li>Generated on server side</li>
<li>Output from a program on server, usually a script, ASP, JSP, VB Script, PHP, CGI or other programs</li>
<li>.asp, .shtm, .php, .cgi etc.
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.39.53.png" alt=""></li>
</ul>
</li>
<li>Active web page
<ul>
<li>Can change after the document has been loaded into a browser</li>
<li>Generated on client side</li>
<li>Consists of a computer program, known as Java, running in browser
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.40.39.png" alt=""></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Links to Other Pages
<ul>
<li>Embedded in HTML document</li>
<li>Browser
<ul>
<li>Hides text of link from user</li>
<li>Associates link with item on page</li>
</ul>
</li>
<li>Called Uniform Resource Locator (URL)统一资源定位符
<ul>
<li>Serving as worldwide name of a web page</li>
<li>Consists of three parts: the protocol(http/https) ; the DNS name of the host(<a href="https://www.bupt.edu.cn">www.bupt.edu.cn</a>); the path name (index.html)
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.42.17.png" alt=""></li>
</ul>
</li>
<li>只有域名不能省略</li>
</ul>
</li>
<li>Some Common URLs
<ul>
<li>Web browsers are often called Universal Clients because most can talk other protocols besides HTTP
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.43.04.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="hypertext-transfer-protocol-http">Hypertext Transfer Protocol (HTTP)</h3>
<ul>
<li>HTTP : Hyper-Text Transfer Protocol
<ul>
<li>Client-server architecture</li>
<li>Synchronous request/reply protocol
<ul>
<li>Running over <strong>TCP</strong></li>
<li>Port 80(http),443(https)</li>
</ul>
</li>
<li>Stateless
<ul>
<li>Each command is executed independently, without any knowledge of the previous operations
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.45.12.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>Operations of HTTP
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.45.52.png" alt=""></li>
<li>HTTP Transaction
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.46.25.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.46.47.png" alt=""></li>
<li>HTTP Request Methods
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.47.05.png" alt=""></li>
<li>HTTP Message Headers
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.47.41.png" alt=""></li>
<li>HTTP Status Codes and reason-phrase
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.48.17.png" alt=""></li>
<li>Example of HTTP Transaction
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.48.42.png" alt=""></li>
<li>HTTP/1.1 Performance Enhancements
<ul>
<li>HTTP/1.0 is a “stop and wait” protocol
<ul>
<li>Separate TCP connection for each file
<ul>
<li>Connect setup and tear down is incurred for each file</li>
<li>Inefficient use of packets</li>
<li>Server must maintain many connections
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.51.17.png" alt=""></li>
</ul>
</li>
</ul>
</li>
<li>HTTP/1.1 specification focus on performance enhancements
<ul>
<li>Persistent connections
<ul>
<li>Use the same TCP connection(s) for transfer of multiple files</li>
<li>Reduces packet traffic significantly
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.51.39.png" alt=""></li>
</ul>
</li>
<li>Pipelining
<ul>
<li>Multiple HTTP requests can be written out to a socket together without waiting for the corresponding responses.</li>
<li>Pack several HTTP requests into one TCP/IP packet
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.51.59.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.52.18.png" alt=""></li>
</ul>
</li>
<li>Enhanced caching options</li>
<li>Support for compression</li>
</ul>
</li>
</ul>
</li>
<li>Review
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.52.39.png" alt=""></li>
</ul>
<h2 id="key-points">Key Points</h2>
<p><img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.54.36.png" alt="">
<img src="/images/%E6%88%AA%E5%B1%8F2024-06-12%2017.54.52.png" alt=""></p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://y-m-m.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://y-m-m.github.io/css/toc.css' />

  
<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='https://y-m-m.github.io/css/gitalk.css'>
<script src='https://y-m-m.github.io/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'Ov23livxKNtTlPeMjV2H',
    clientSecret: '6d3bc9f47a1296f29628a63701ea5624cd28a26b',
    repo: 'y-m-m.github.io\/',
    owner: 'Y-M-M',
    admin: ['Y-M-M'],
    id: eval("location.pathname"), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>

</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://y-m-m.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://y-m-m.github.io/js/github-style.js"></script>



<script type="text/javascript" async
  src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        TeX: {
          equationNumbers: { autoNumber: "AMS" },
          extensions: ["AMSmath.js", "AMSsymbols.js"]
        }
      }
    });

    MathJax.Hub.Queue(function () {
      
      
      
      var all = MathJax.Hub.getAllJax(), i;
      for (i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

<style>
  code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
  }
</style>



<script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
<script type="application/javascript" src='https://y-m-m.github.io/js/search.js'></script>



</html>